import{am as T,aa as g,r as F,C as O,a9 as S,ab as U,ak as R,an as f,ao as V,ac as A,j as r,ap as j,v as q,aq as m,y as h,c as B,o as H,u as v}from"./Cpc0UKJE.js";import{u as $}from"./d9a9iJTn.js";function E(c={}){const o=T(),l=g().path||"/";if(o.payload.path===l){const u=F(!1);u.value=!0}}function J(c,o={},a={}){return E({...a})}const N=O({__name:"[...slug]",setup(c){const{t:o}=S(),a=g(),l=U(),u=R(),{switchToIndex:b,closeViewer:w,openViewer:x}=f(),{isViewerOpen:_}=V(f()),{photos:p}=A(),k=r(()=>a.params.slug||[]),s=r(()=>k.value[0]||null),t=r(()=>p.value.find(e=>e.id===s.value)),d=j("hasShownUpdateToast",()=>!1);q(()=>{!s.value&&!d.value&&(u.add({title:"欢迎来到看见.",description:["1. 本ChronoFrame程序来自 fork 版本1.0.0-beta-fix-2025-12-31，本版本还在优化修改当中暂未提交。","3. 优化了队列上传的读取速度","4. 优化了首页图片部分展示照片为圆角状态","5. 优化了加载动画","6. 本次优化版本号为v1.0.0-beta-fix-2025-12-31,以上为本次优化内容说明。"].join(`
`),icon:"tabler:info-circle",color:"primary",duration:1e4,ui:{description:"whitespace-pre-line"},actions:[{label:"关闭",click:()=>{}}]}),d.value=!0)}),J("Photo",{headline:t.value?"PHOTO":"ChronoFrame",title:t.value?.title||m("app:title"),description:t.value?t.value.description:m("app:title"),thumbnailJpegUrl:t.value&&t.value.thumbnailKey?`/thumb/${encodeURIComponent(t.value.thumbnailUrl||"")}`:void 0,photo:t.value||void 0});const{clearAllFilters:y,toggleFilter:C}=$();return h(()=>a.query.tag,e=>{e&&typeof e=="string"&&!s.value&&(y(),C("tags",e),l.replace("/"))},{immediate:!0}),h([s,p],([e,n])=>{if(e&&n.length>0){const i=n.findIndex(I=>I.id===e);i!==-1&&(v({title:n[i]?.title||o("title.fallback.photo")}),_.value?b(i):x(i,null))}else e||(w(),v({title:""}))},{immediate:!0}),(e,n)=>(H(),B("div"))}});export{N as default};
