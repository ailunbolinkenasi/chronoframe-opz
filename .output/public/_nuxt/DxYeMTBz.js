import{_ as N,a as j}from"./CPTTSFvb.js";import{u as E,_ as M}from"./Chyyx_Sw.js";import{_ as O}from"./DZlQVDzI.js";import{C as A,a9 as W,u as H,br as I,j as v,M as m,w as e,o as i,a as c,b as s,c as h,F,a5 as U,O as t,ai as L,d as x,t as V}from"./Cpc0UKJE.js";import{_ as P}from"./DO3xSySP.js";import"./BjUXi3JB.js";import"./CXUgo2PS.js";import"./BdLvxhSi.js";import"./Bk1GAyqG.js";import"./yl6JOf5H.js";import"./Ct_BEpIm.js";import"./C7QMAU0h.js";import"./CxsYCXXx.js";import"./wnGbbVmH.js";import"./BdRmTPAZ.js";import"./DY-ki2PF.js";import"./CzWYPtMs.js";import"./B7XY3PeF.js";import"./BJ-5YYua.js";import"./P0jURR1P.js";import"./D3oo-TiF.js";import"./uqxPgdyf.js";const T={class:"space-y-6 max-w-6xl"},de=A({__name:"general",setup(q){const{t:p}=W();H({title:p("title.generalSettings")});const $=I(),{fields:u,state:n,submit:d,loading:_}=E("app"),f=v(()=>u.value.filter(r=>!r.key.startsWith("appearance."))),y=v(()=>u.value.filter(r=>r.key.startsWith("appearance."))),w=async()=>{const r=Object.fromEntries(f.value.map(a=>[a.key,n[a.key]]));try{await d(r)}catch{}},B=async()=>{const r=Object.fromEntries(y.value.map(a=>[a.key,n[a.key]]));try{await d(r),n["appearance.theme"]&&($.preference=n["appearance.theme"])}catch{}};return(r,a)=>{const C=j,g=M,b=O,k=L,S=P,D=N;return i(),m(D,null,{header:e(()=>[s(C,{title:t(p)("title.generalSettings")},null,8,["title"])]),body:e(()=>[c("div",T,[s(S,{variant:"outline"},{header:e(()=>[c("span",null,V(t(p)("title.generalSettings")),1)]),footer:e(()=>[s(k,{loading:t(_),type:"submit",form:"appSettingsForm",variant:"soft",icon:"tabler:device-floppy"},{default:e(()=>[...a[0]||(a[0]=[x(" 保存设置 ",-1)])]),_:1},8,["loading"])]),default:e(()=>[s(b,{id:"appSettingsForm",class:"space-y-4",onSubmit:w},{default:e(()=>[(i(!0),h(F,null,U(t(f),o=>(i(),m(g,{key:o.key,field:o,"model-value":t(n)[o.key],"onUpdate:modelValue":l=>t(n)[o.key]=l},null,8,["field","model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),s(S,{variant:"outline"},{header:e(()=>[c("span",null,V(t(p)("title.appearanceSettings")),1)]),footer:e(()=>[s(k,{loading:t(_),type:"submit",form:"appearanceSettingsForm",variant:"soft",icon:"tabler:device-floppy"},{default:e(()=>[...a[1]||(a[1]=[x(" 保存设置 ",-1)])]),_:1},8,["loading"])]),default:e(()=>[s(b,{id:"appearanceSettingsForm",class:"space-y-4",onSubmit:B},{default:e(()=>[(i(!0),h(F,null,U(t(y),o=>(i(),m(g,{key:o.key,field:o,"model-value":t(n)[o.key],"onUpdate:modelValue":l=>t(n)[o.key]=l},null,8,["field","model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})])]),_:1})}}});export{de as default};
