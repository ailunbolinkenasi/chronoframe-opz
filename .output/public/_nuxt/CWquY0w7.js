import{ah as U,C as F,a9 as V,K as B,c as d,b as i,a as o,w as f,R as _,t as b,M as k,a2 as $,F as D,a5 as E,O as t,ai as C,a6 as I,o as l,a3 as L,d as A,H as j,u as z,aj as N,ak as R,aa as H,ab as P,r as T,al as G,_ as O}from"./Cpc0UKJE.js";import{_ as M}from"./DnnPpv4o.js";import{_ as q}from"./CXUgo2PS.js";import{_ as K,a as J}from"./DZlQVDzI.js";import{o as Q,s as W,e as X}from"./oIv4vp1I.js";const Y=U("/web-app-manifest-192x192.png"),Z={class:"flex flex-col items-center"},tt={key:0,class:"mb-2"},et={key:1,class:"text-2xl font-medium text-highlighted text-pretty"},st={key:2,class:"mt-1 text-sm text-muted text-pretty"},ot={class:"flex flex-col gap-4"},at={class:"flex flex-col gap-2"},nt=F({__name:"AuthForm",props:{icon:{},title:{},subtitle:{},providers:{},class:{},loading:{type:Boolean}},emits:["submit"],setup(e,{emit:p}){const{t:a}=V(),h=p,g=Q({email:X(a("auth.form.errors.invalidEmail")),password:W().min(6,a("auth.form.errors.invalidPassword"))}),u=B({email:void 0,password:""}),x=async c=>{h("submit",c)};return(c,r)=>{const m=C,n=I,y=M,v=q,w=J,S=K;return l(),d("div",{class:$(t(L)("w-full space-y-6 max-w-sm",c.$props.class))},[i(m,{type:"button",variant:"link",color:"neutral",icon:"tabler:arrow-left",size:"xs",to:"/"},{default:f(()=>[A(b(t(a)("auth.form.action.backToHome")),1)]),_:1}),o("div",Z,[e.icon?(l(),d("div",tt,[i(n,{name:e.icon,class:"size-8 inline-block shrink-0"},null,8,["name"])])):_("",!0),r[2]||(r[2]=o("div",{class:"mb-2"},[o("img",{src:Y,alt:"App Logo",class:"size-24 rounded-full object-cover"})],-1)),e.title?(l(),d("div",et,b(e.title),1)):_("",!0),e.subtitle?(l(),d("div",st,b(e.subtitle),1)):_("",!0)]),o("div",ot,[e.providers&&e.providers.filter(s=>!!s).length>0?(l(),d("div",{key:0,class:$(e.providers.length>3?"space-y-2":"flex items-center gap-2")},[(l(!0),d(D,null,E(e.providers.filter(s=>!!s),s=>(l(),k(m,j({key:s.icon},{ref_for:!0},s,{loading:e.loading}),null,16,["loading"]))),128))],2)):_("",!0),e.providers&&e.providers.filter(s=>!!s).length>0?(l(),k(y,{key:1,label:t(a)("auth.form.action.or")},null,8,["label"])):_("",!0),i(S,{class:"space-y-4",schema:t(g),state:t(u),disabled:e.loading,onSubmit:x},{default:f(()=>[i(w,{label:t(a)("auth.form.labels.email"),name:"email"},{default:f(()=>[i(v,{modelValue:t(u).email,"onUpdate:modelValue":r[0]||(r[0]=s=>t(u).email=s),autofocus:!1,class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),i(w,{label:t(a)("auth.form.labels.password"),name:"password"},{default:f(()=>[i(v,{modelValue:t(u).password,"onUpdate:modelValue":r[1]||(r[1]=s=>t(u).password=s),autofocus:!1,type:"password",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),o("div",at,[i(m,{type:"submit",variant:"soft",color:"info","trailing-icon":"tabler:login-2",block:"",loading:e.loading},{default:f(()=>[A(b(t(a)("auth.form.action.continue")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state","disabled"])])],2)}}}),it=Object.assign(nt,{__name:"AuthForm"}),lt={class:"relative w-full min-h-svh flex flex-col items-center justify-center p-4 pb-12 overflow-hidden bg-[#F8F6F6] text-[#132843]"},rt={class:"relative w-full max-w-md bg-white/80 backdrop-blur-sm border border-[#D6DEEB] shadow-xl shadow-[#132843]/5 rounded-2xl p-6 md:p-8"},ut={class:"mb-6 text-center"},ct={class:"text-2xl font-bold text-[#132843]"},dt={class:"mt-2 text-sm text-[#3966A2]/80"},mt=F({__name:"signin",setup(e){const{t:p}=V();z({title:p("auth.form.signin.title")});const{fetch:a}=N(),h=G(),g=R(),u=H(),x=P(),c=T(!1),r=async m=>{c.value=!0,await $fetch("/api/login",{method:"POST",body:m.data}).then(async()=>{await a(),x.push(u.query.redirect?.toString()||"/")}).catch(n=>{console.error("Login error:",n),g.add({color:"error",title:"Login Failed",description:n?.data?.message||"An unexpected error occurred. Please try again."})}).finally(()=>{c.value=!1})};return(m,n)=>{const y=it;return l(),d("div",lt,[n[0]||(n[0]=o("div",{class:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-[#D6DEEB] blur-[100px] opacity-60 pointer-events-none"},null,-1)),n[1]||(n[1]=o("div",{class:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-[#6191D3] blur-[120px] opacity-20 pointer-events-none"},null,-1)),o("div",rt,[o("div",ut,[o("h1",ct,b(t(p)("auth.form.signin.title")),1),o("p",dt,b(t(p)("auth.form.signin.subtitle",[t(h).public.app.title])),1)]),i(y,{class:"/* === 1. 登录按钮布局 === */ [&_button[type=submit]]:mx-auto [&_button[type=submit]]:block [&_button[type=submit]]:w-fit [&_button[type=submit]]:min-w-[140px] /* === 2. 登录按钮外观 (无填充) === */ [&_button[type=submit]]:bg-transparent [&_button[type=submit]]:border-2 [&_button[type=submit]]:border-[#3966A2] [&_button[type=submit]]:text-[#3966A2] [&_button[type=submit]]:font-semibold [&_button[type=submit]]:rounded-full [&_button[type=submit]]:transition-all [&_button[type=submit]]:px-10 /* 增加一点内边距保持平衡 */ /* === 3. 【核心修改】彻底隐藏右侧图标 === */ /* 匹配所有以 i- 开头的类名 (Nuxt UI Icon 的标准写法) */ [&_button[type=submit]_[class*='i-']]:!hidden /* 匹配 raw SVG (防止图标是纯 SVG 渲染的) */ [&_button[type=submit]_svg]:!hidden /* === 4. 登录按钮悬停效果 === */ [&_button[type=submit]]:hover:bg-[#3966A2] [&_button[type=submit]]:hover:text-white [&_button[type=submit]]:hover:shadow-lg [&_button[type=submit]]:hover:shadow-[#3966A2]/20 /* === 5. 输入框样式 === */ [&_input]:bg-white [&_input]:border-[#D6DEEB] [&_input]:text-[#132843] [&_input]:rounded-lg [&_input:focus]:!border-[#3966A2] [&_input:focus]:!ring-1 [&_input:focus]:!ring-[#3966A2] [&_label]:text-[#132843] [&_label]:font-medium",title:"",subtitle:"",loading:t(c),providers:[t(h).public.oauth.github.enabled&&{icon:"tabler:brand-github",label:"GitHub",block:!0,size:"lg",to:"/api/auth/github",external:!0}],onSubmit:r},null,8,["loading","providers"])])])}}}),gt=O(mt,[["__scopeId","data-v-1056d991"]]);export{gt as default};
