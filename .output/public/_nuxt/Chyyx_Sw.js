import{_ as ee}from"./CXUgo2PS.js";import{_ as ae}from"./BdLvxhSi.js";import{_ as te}from"./Bk1GAyqG.js";import{bs as se,C as I,W as Y,D as H,aJ as G,j as V,M as w,o as y,w as q,N as C,R as z,O as e,H as U,Y as W,aM as D,aI as J,b as $,aO as re,r as F,bt as N,aN as le,bu as ie,aS as oe,aU as de,b1 as ne,b9 as ue,aX as ce,bv as fe,aY as L,a as j,c as S,a2 as x,d as M,t as A,F as pe,a5 as me,a_ as B,b4 as K,a9 as be,aF as ve,ak as he,K as ye,v as ge,bf as P}from"./Cpc0UKJE.js";import{L as O,a as ke}from"./DZlQVDzI.js";import{u as qe}from"./CxsYCXXx.js";import{u as X}from"./wnGbbVmH.js";import{R as we}from"./P0jURR1P.js";import{V as Q}from"./CzWYPtMs.js";import{R as Re}from"./D3oo-TiF.js";import{_ as _e}from"./uqxPgdyf.js";const Ve="radio.select";function xe(r,f,a){se(Ve,a,{originalEvent:r,value:f})}var Ce=I({__name:"Radio",props:{id:{type:String,required:!1},value:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},checked:{type:Boolean,required:!1,default:void 0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:checked","select"],setup(r,{emit:f}){const a=r,t=f,n=Y(a,"checked",t,{passive:a.checked===void 0}),{value:v}=H(a),{forwardRef:u,currentElement:c}=G(),g=X(c),p=V(()=>a.id&&c.value?document.querySelector(`[for="${a.id}"]`)?.innerText??a.value:void 0);function h(o){a.disabled||xe(o,a.value,l=>{t("select",l),!l?.defaultPrevented&&(n.value=!0,g.value&&l.stopPropagation())})}return(o,l)=>(y(),w(e(D),U(o.$attrs,{id:o.id,ref:e(u),role:"radio",type:o.as==="button"?"button":void 0,as:o.as,"aria-checked":e(n),"aria-label":p.value,"as-child":o.asChild,disabled:o.disabled?"":void 0,"data-state":e(n)?"checked":"unchecked","data-disabled":o.disabled?"":void 0,value:e(v),required:o.required,name:o.name,onClick:W(h,["stop"])}),{default:q(()=>[C(o.$slots,"default",{checked:e(n)}),e(g)&&o.name?(y(),w(e(Q),{key:0,type:"radio",tabindex:"-1",value:e(v),checked:!!e(n),name:o.name,disabled:o.disabled,required:o.required},null,8,["value","checked","name","disabled","required"])):z("v-if",!0)]),_:3},16,["id","type","as","aria-checked","aria-label","as-child","disabled","data-state","data-disabled","value","required","name"]))}}),ze=Ce;const[Ue,$e]=J("RadioGroupRoot");var Ie=I({__name:"RadioGroupRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"],setup(r,{emit:f}){const a=r,t=f,{forwardRef:n,currentElement:v}=G(),u=Y(a,"modelValue",t,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),{disabled:c,loop:g,orientation:p,name:h,required:o,dir:l}=H(a),s=qe(l),m=X(v);return $e({modelValue:u,changeModelValue:b=>{u.value=b},disabled:c,loop:g,orientation:p,name:h?.value,required:o}),(b,k)=>(y(),w(e(we),{"as-child":"",orientation:e(p),dir:e(s),loop:e(g)},{default:q(()=>[$(e(D),{ref:e(n),role:"radiogroup","data-disabled":e(c)?"":void 0,"as-child":b.asChild,as:b.as,"aria-orientation":e(p),"aria-required":e(o),dir:e(s)},{default:q(()=>[C(b.$slots,"default",{modelValue:e(u)}),e(m)&&e(h)?(y(),w(e(Q),{key:0,required:e(o),disabled:e(c),value:e(u),name:e(h)},null,8,["required","disabled","value","name"])):z("v-if",!0)]),_:3},8,["data-disabled","as-child","as","aria-orientation","aria-required","dir"])]),_:3},8,["orientation","dir","loop"]))}}),Se=Ie;const[Fe,Be]=J("RadioGroupItem");var Ge=I({inheritAttrs:!1,__name:"RadioGroupItem",props:{id:{type:String,required:!1},value:{type:null,required:!1},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["select"],setup(r,{emit:f}){const a=r,t=f,{forwardRef:n,currentElement:v}=G(),u=Ue(),c=V(()=>u.disabled.value||a.disabled),g=V(()=>u.required.value||a.required),p=V(()=>re(u.modelValue?.value,a.value));Be({disabled:c,checked:p});const h=F(!1),o=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];N("keydown",s=>{o.includes(s.key)&&(h.value=!0)}),N("keyup",()=>{h.value=!1});function l(){setTimeout(()=>{h.value&&v.value?.click()},0)}return(s,m)=>(y(),w(e(Re),{checked:p.value,disabled:c.value,"as-child":"",focusable:!c.value,active:p.value},{default:q(()=>[$(ze,U({...s.$attrs,...a},{ref:e(n),checked:p.value,required:g.value,disabled:c.value,"onUpdate:checked":m[0]||(m[0]=b=>e(u).changeModelValue(s.value)),onSelect:m[1]||(m[1]=b=>t("select",b)),onKeydown:m[2]||(m[2]=le(W(()=>{},["prevent"]),["enter"])),onFocus:l}),{default:q(()=>[C(s.$slots,"default",{checked:p.value,required:g.value,disabled:c.value})]),_:3},16,["checked","required","disabled"])]),_:3},8,["checked","disabled","focusable","active"]))}}),Ee=Ge,Te=I({__name:"RadioGroupIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(r){const{forwardRef:f}=G(),a=Fe();return(t,n)=>(y(),w(e(ie),{present:t.forceMount||e(a).checked.value},{default:q(()=>[$(e(D),U({ref:e(f),"data-state":e(a).checked.value?"checked":"unchecked","data-disabled":e(a).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},t.$attrs),{default:q(()=>[C(t.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),Me=Te;const Ae={slots:{root:"relative",fieldset:"flex gap-x-2",legend:"mb-1 block font-medium text-default",item:"flex items-start",container:"flex items-center",base:"rounded-full ring ring-inset ring-accented overflow-hidden focus-visible:outline-2 focus-visible:outline-offset-2",indicator:"flex items-center justify-center size-full after:bg-default after:rounded-full",wrapper:"w-full",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"focus-visible:outline-primary",indicator:"bg-primary"},secondary:{base:"focus-visible:outline-secondary",indicator:"bg-secondary"},success:{base:"focus-visible:outline-success",indicator:"bg-success"},info:{base:"focus-visible:outline-info",indicator:"bg-info"},warning:{base:"focus-visible:outline-warning",indicator:"bg-warning"},error:{base:"focus-visible:outline-error",indicator:"bg-error"},neutral:{base:"focus-visible:outline-inverted",indicator:"bg-inverted"}},variant:{list:{item:""},card:{item:"border border-muted rounded-lg"},table:{item:"border border-muted"}},orientation:{horizontal:{fieldset:"flex-row"},vertical:{fieldset:"flex-col"}},indicator:{start:{item:"flex-row",wrapper:"ms-2"},end:{item:"flex-row-reverse",wrapper:"me-2"},hidden:{base:"sr-only",wrapper:"text-center"}},size:{xs:{fieldset:"gap-y-0.5",legend:"text-xs",base:"size-3",item:"text-xs",container:"h-4",indicator:"after:size-1"},sm:{fieldset:"gap-y-0.5",legend:"text-xs",base:"size-3.5",item:"text-xs",container:"h-4",indicator:"after:size-1"},md:{fieldset:"gap-y-1",legend:"text-sm",base:"size-4",item:"text-sm",container:"h-5",indicator:"after:size-1.5"},lg:{fieldset:"gap-y-1",legend:"text-sm",base:"size-4.5",item:"text-sm",container:"h-5",indicator:"after:size-1.5"},xl:{fieldset:"gap-y-1.5",legend:"text-base",base:"size-5",item:"text-base",container:"h-6",indicator:"after:size-2"}},disabled:{true:{item:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}},required:{true:{legend:"after:content-['*'] after:ms-0.5 after:text-error"}}},compoundVariants:[{size:"xs",variant:["card","table"],class:{item:"p-2.5"}},{size:"sm",variant:["card","table"],class:{item:"p-3"}},{size:"md",variant:["card","table"],class:{item:"p-3.5"}},{size:"lg",variant:["card","table"],class:{item:"p-4"}},{size:"xl",variant:["card","table"],class:{item:"p-4.5"}},{orientation:"horizontal",variant:"table",class:{item:"first-of-type:rounded-s-lg last-of-type:rounded-e-lg",fieldset:"gap-0 -space-x-px"}},{orientation:"vertical",variant:"table",class:{item:"first-of-type:rounded-t-lg last-of-type:rounded-b-lg",fieldset:"gap-0 -space-y-px"}},{color:"primary",variant:"card",class:{item:"has-data-[state=checked]:border-primary"}},{color:"secondary",variant:"card",class:{item:"has-data-[state=checked]:border-secondary"}},{color:"success",variant:"card",class:{item:"has-data-[state=checked]:border-success"}},{color:"info",variant:"card",class:{item:"has-data-[state=checked]:border-info"}},{color:"warning",variant:"card",class:{item:"has-data-[state=checked]:border-warning"}},{color:"error",variant:"card",class:{item:"has-data-[state=checked]:border-error"}},{color:"neutral",variant:"card",class:{item:"has-data-[state=checked]:border-inverted"}},{color:"primary",variant:"table",class:{item:"has-data-[state=checked]:bg-primary/10 has-data-[state=checked]:border-primary/50 has-data-[state=checked]:z-[1]"}},{color:"secondary",variant:"table",class:{item:"has-data-[state=checked]:bg-secondary/10 has-data-[state=checked]:border-secondary/50 has-data-[state=checked]:z-[1]"}},{color:"success",variant:"table",class:{item:"has-data-[state=checked]:bg-success/10 has-data-[state=checked]:border-success/50 has-data-[state=checked]:z-[1]"}},{color:"info",variant:"table",class:{item:"has-data-[state=checked]:bg-info/10 has-data-[state=checked]:border-info/50 has-data-[state=checked]:z-[1]"}},{color:"warning",variant:"table",class:{item:"has-data-[state=checked]:bg-warning/10 has-data-[state=checked]:border-warning/50 has-data-[state=checked]:z-[1]"}},{color:"error",variant:"table",class:{item:"has-data-[state=checked]:bg-error/10 has-data-[state=checked]:border-error/50 has-data-[state=checked]:z-[1]"}},{color:"neutral",variant:"table",class:{item:"has-data-[state=checked]:bg-elevated has-data-[state=checked]:border-inverted/50 has-data-[state=checked]:z-[1]"}},{variant:["card","table"],disabled:!0,class:{item:"cursor-not-allowed"}}],defaultVariants:{size:"md",color:"primary",variant:"list",orientation:"vertical",indicator:"start"}},Ke={__name:"URadioGroup",props:{as:{type:null,required:!1},legend:{type:String,required:!1},valueKey:{type:null,required:!1,default:"value"},labelKey:{type:null,required:!1,default:"label"},descriptionKey:{type:null,required:!1,default:"description"},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},size:{type:null,required:!1},variant:{type:null,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},indicator:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["change","update:modelValue"],setup(r,{emit:f}){const a=r,t=f,n=oe(),v=de(),u=ne(ue(a,"as","loop","required"),t),{emitFormChange:c,emitFormInput:g,color:p,name:h,size:o,id:l,disabled:s,ariaAttrs:m}=ce(a,{bind:!1}),b=l.value??fe(),k=V(()=>L({extend:L(Ae),...v.ui?.radioGroup||{}})({size:o.value,color:p.value,disabled:s.value,required:a.required,orientation:a.orientation,variant:a.variant,indicator:a.indicator}));function E(i){if(i===null)return{id:`${b}:null`,value:void 0,label:void 0};if(typeof i=="string"||typeof i=="number"||typeof i=="bigint")return{id:`${b}:${i}`,value:String(i),label:String(i)};const _=K(i,a.valueKey),d=K(i,a.labelKey),Z=K(i,a.descriptionKey);return{...i,value:_,label:d,description:Z,id:`${b}:${_}`}}const T=V(()=>a.items?a.items.map(E):[]);function R(i){const _=new Event("change",{target:{value:i}});t("change",_),c(),g()}return(i,_)=>(y(),w(e(Se),U({id:e(b)},e(u),{"model-value":r.modelValue,"default-value":r.defaultValue,orientation:r.orientation,name:e(h),disabled:e(s),"data-slot":"root",class:k.value.root({class:[a.ui?.root,a.class]}),"onUpdate:modelValue":R}),{default:q(()=>[j("fieldset",U({"data-slot":"fieldset",class:k.value.fieldset({class:a.ui?.fieldset})},e(m)),[r.legend||n.legend?(y(),S("legend",{key:0,"data-slot":"legend",class:x(k.value.legend({class:a.ui?.legend}))},[C(i.$slots,"legend",{},()=>[M(A(r.legend),1)])],2)):z("",!0),(y(!0),S(pe,null,me(T.value,d=>(y(),w(B(!r.variant||r.variant==="list"?"div":e(O)),{key:d.value,"data-slot":"item",class:x(k.value.item({class:[a.ui?.item,d.ui?.item,d.class],disabled:d.disabled||e(s)}))},{default:q(()=>[j("div",{"data-slot":"container",class:x(k.value.container({class:[a.ui?.container,d.ui?.container]}))},[$(e(Ee),{id:d.id,value:d.value,disabled:d.disabled||e(s),"data-slot":"base",class:x(k.value.base({class:[a.ui?.base,d.ui?.base],disabled:d.disabled||e(s)}))},{default:q(()=>[$(e(Me),{"data-slot":"indicator",class:x(k.value.indicator({class:[a.ui?.indicator,d.ui?.indicator]}))},null,8,["class"])]),_:2},1032,["id","value","disabled","class"])],2),d.label||n.label||d.description||n.description?(y(),S("div",{key:0,"data-slot":"wrapper",class:x(k.value.wrapper({class:[a.ui?.wrapper,d.ui?.wrapper]}))},[d.label||n.label?(y(),w(B(!r.variant||r.variant==="list"?e(O):"p"),{key:0,for:d.id,"data-slot":"label",class:x(k.value.label({class:[a.ui?.label,d.ui?.label],disabled:d.disabled||e(s)}))},{default:q(()=>[C(i.$slots,"label",{item:d,modelValue:r.modelValue},()=>[M(A(d.label),1)])]),_:2},1032,["for","class"])):z("",!0),d.description||n.description?(y(),S("p",{key:1,"data-slot":"description",class:x(k.value.description({class:[a.ui?.description,d.ui?.description],disabled:d.disabled||e(s)}))},[C(i.$slots,"description",{item:d,modelValue:r.modelValue},()=>[M(A(d.description),1)])],2)):z("",!0)],2)):z("",!0)]),_:2},1032,["class"]))),128))],16)]),_:3},16,["id","model-value","default-value","orientation","name","disabled","class"]))}},Pe=I({__name:"SettingField",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup(r,{emit:f}){const{t:a}=be(),t=r,n=f,v=R=>({input:"UInput",password:"UInput",url:"UInput",textarea:"UTextarea",select:"USelectMenu",radio:"URadioGroup",tabs:"UTabs",toggle:"UToggle",number:"UInput",custom:"UInput"})[R]||"UInput",u=ee,c=ae,g=te,p=Ke,h=_e,o=ve("UToggle"),l=ke,s=V(()=>{switch(v(t.field.ui.type)){case"UInput":return u;case"UTextarea":return c;case"USelectMenu":return g;case"URadioGroup":return p;case"UTabs":return h;case"UToggle":return o;default:return u}}),m=()=>{const R=t.field.ui.type,i={};switch(t.field.ui.placeholder&&(i.placeholder=t.field.ui.placeholder),R){case"password":case"url":case"number":i.type=R;break;case"select":i.items=t.field.ui.options?Array.from(t.field.ui.options):[],i["label-key"]="label",i["value-key"]="value";break;case"radio":i.options=t.field.ui.options?Array.from(t.field.ui.options):[];break;case"tabs":i.items=t.field.ui.options?Array.from(t.field.ui.options).map(_=>({label:a(_.label)||_.label,value:_.value,icon:_.icon})):[];break;case"textarea":i.rows=3;break}return i},b=V(()=>m()),k=R=>{n("update:modelValue",R)},E=V(()=>t.field.label?t.field.label:`settings.${t.field.namespace}.${t.field.key}.label`),T=V(()=>t.field.description?t.field.description:`settings.${t.field.namespace}.${t.field.key}.description`);return(R,i)=>(y(),w(B(e(l)),{name:r.field.key,label:e(a)(e(E)),description:e(a)(e(T)),help:r.field.ui.help?e(a)(r.field.ui.help):void 0,required:r.field.ui.required,ui:{container:"w-full sm:max-w-sm *:w-full"}},{default:q(()=>[(y(),w(B(e(s)),U({"model-value":r.modelValue},e(b),{"onUpdate:modelValue":k}),null,16,["model-value"]))]),_:1},8,["name","label","description","help","required"]))}}),Ze=Object.assign(Pe,{__name:"SettingField"});function ea(r){const f=he(),a=F([]),t=ye({}),n=F(!1),v=F(null),u=async()=>{n.value=!0,v.value=null;try{const l=await $fetch("/api/system/settings/fields",{query:{namespace:r}});a.value=l.fields,l.fields.forEach(s=>{t[s.key]=s.value??s.defaultValue??null})}catch(l){const s=l.message;v.value=s,f.add({title:"加载设置失败",description:s,color:"error"})}finally{n.value=!1}},c=async l=>{n.value=!0,v.value=null;try{const s=Object.entries(l).map(([m,b])=>({namespace:r,key:m,value:b}));await $fetch("/api/system/settings/batch",{method:"PUT",body:{updates:s}}),await u(),f.add({title:"设置已保存",color:"success"})}catch(s){const m=s.message;throw v.value=m,f.add({title:"保存设置失败",description:m,color:"error"}),s}finally{n.value=!1}},g=()=>{a.value.forEach(l=>{t[l.key]=l.value??l.defaultValue??null})},p=(l,s)=>{t[l]=s},h=l=>a.value.find(s=>s.key===l),o=l=>t[l];return ge(()=>{u()}),{fields:P(a),state:t,loading:P(n),error:P(v),submit:c,reset:g,fetchFields:u,updateField:p,getField:h,getFieldValue:o}}export{Ze as _,ea as u};
