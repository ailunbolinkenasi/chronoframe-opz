import{_ as S}from"./CXUgo2PS.js";import{C as _,j as g,M as h,o as v,au as b,a5 as x,w,N as y,Z as $,$ as F,H as k,O as z,at as I,ak as W,r as f,v as j}from"./Cpc0UKJE.js";import{a as A}from"./DZlQVDzI.js";import{u as C}from"./CNcvAVgZ.js";const M=_({inheritAttrs:!1,__name:"Input",props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:r}){const u=n,o=r,s=g({get:()=>u.modelValue,set:e=>o("update:modelValue",e)});return(e,a)=>{const l=S;return v(),h(l,k(e.$attrs,{modelValue:z(s),"onUpdate:modelValue":a[0]||(a[0]=c=>I(s)?s.value=c:null),ui:{root:"relative w-full",base:"w-full bg-white/5 border border-white/10 text-white placeholder:text-neutral-500 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all duration-200 rounded-lg",padding:{sm:"px-3 py-2.5",md:"px-4 py-3",lg:"px-5 py-4"},variant:{outline:"shadow-sm"}},variant:"none"}),b({_:2},[x(e.$slots,(c,d)=>({name:d,fn:w(t=>[y(e.$slots,d,$(F(t)))])}))]),1040,["modelValue"])}}}),q=Object.assign(M,{__name:"WizardInput"}),O=_({inheritAttrs:!1,__name:"FormField",setup(n){return(r,u)=>{const o=A;return v(),h(o,k(r.$attrs,{ui:{label:"text-neutral-300 font-medium mb-1.5",description:"text-neutral-500 text-xs mt-1",error:"text-red-400 text-xs mt-1",hint:"text-neutral-500 text-xs"}}),b({_:2},[x(r.$slots,(s,e)=>({name:e,fn:w(a=>[y(r.$slots,e,$(F(a)))])}))]),1040)}}}),E=Object.assign(O,{__name:"WizardFormField"});function H(n){const r=W(),u=f([]),o=f(!1),s=f(null),e=C(),a=g({get:()=>{switch(n){case"admin":return e.admin;case"app":return e.site;case"storage":return e.storage;case"map":return e.map;default:return{}}},set:t=>{switch(n){case"admin":e.updateAdmin(t);break;case"app":e.updateSite(t);break;case"storage":e.updateStorage(t);break;case"map":e.updateMap(t);break}}}),l=async()=>{o.value=!0,s.value=null;try{const t=await $fetch("/api/wizard/schema",{query:{namespace:n}});u.value=t.fields;const i={};t.fields.forEach(p=>{i[p.key]=p.value??p.defaultValue??""});const m=a.value,V={...i,...m};a.value=V}catch(t){s.value=t.message,r.add({title:"Failed to load wizard schema",description:t.message,color:"error"})}finally{o.value=!1}},c=t=>{if(!t.ui?.visibleIf)return!0;const{fieldKey:i,value:m}=t.ui.visibleIf;return a.value[i]===m},d=t=>u.value.find(i=>i.key===t);return j(()=>{l()}),{fields:u,state:a,loading:o,error:s,isFieldVisible:c,fetchSchema:l,getField:d}}export{E as _,q as a,H as u};
