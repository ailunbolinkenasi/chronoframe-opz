import{C as b,r as h,ak as w,M as k,w as m,o as z,a as o,b as p,av as C,O as S,d as B}from"./Cpc0UKJE.js";import{_ as D,a as T}from"./ChlxyZLr.js";import{u as W}from"./CNcvAVgZ.js";const $={class:"flex flex-col items-center justify-center py-12 space-y-8 text-center"},j={class:"relative"},F={class:"relative size-28 bg-linear-to-br from-green-400/20 to-green-600/20 rounded-full flex items-center justify-center border border-green-500/30 shadow-2xl shadow-green-500/20"},V=b({__name:"complete",setup(K){const i=h(!1),a=W(),u=w();async function f(){i.value=!0;try{const s=a.admin,e=a.site,t=a.storage,r=t.provider,n={provider:r};Object.keys(t).forEach(d=>{if(d.startsWith(r+".")){const y=d.split(".")[1];n[y]=t[d]}});const _={name:t.name,config:n},l=a.map,c=l.provider,g=`${c}.token`,x=`${c}.style`,v={provider:c,token:l[g],style:l[x]};await $fetch("/api/wizard/submit",{method:"POST",body:{admin:s,site:e,storage:_,map:v}}),a.clear(),window.location.href="/dashboard"}catch(s){console.error(s),u.add({title:"Setup Failed",description:s.data?.message||"Failed to complete setup",color:"error"})}finally{i.value=!1}}return(s,e)=>{const t=C,r=T,n=D;return z(),k(n,{title:"即将完成！",description:"您的 ChronoFrame 画廊已准备好使用。"},{default:m(()=>[o("div",$,[o("div",j,[e[0]||(e[0]=o("div",{class:"absolute inset-0 bg-green-500/20 blur-3xl rounded-full"},null,-1)),o("div",F,[p(t,{name:"tabler:check",class:"size-18 text-green-400"})])]),e[2]||(e[2]=o("div",{class:"max-w-md text-neutral-300 text-lg"},[o("p",null," 您已完成了所有基本配置。现在可以使用管理员账户登录并开始上传照片。 ")],-1)),p(r,{size:"xl",color:"primary",loading:S(i),class:"px-6 py-3 text-base font-bold shadow-xl shadow-primary-500/20 hover:shadow-primary-500/40 transition-all duration-300",onClick:f},{default:m(()=>[...e[1]||(e[1]=[B(" 前往仪表盘 ",-1)])]),_:1},8,["loading"])])]),_:1})}}});export{V as default};
