import{al as U,aa as x,r as k,C as R,a9 as A,ab as O,aj as E,am as I,an as V,ac as j,ao as B,ap as q,j as d,aq as D,v as H,u as v,y as M,c as $,ar as b,o as G,as as J,_ as K}from"./Do4Ulm4h.js";import{u as N}from"./B_ZWtxNr.js";function z(h={}){const s=U(),c=x().path||"/";if(s.payload.path===c){const p=k(!1);p.value=!0}}function L(h,s={},u={}){return z({...u})}const Q={class:"sr-only"},W=R({__name:"[...slug]",setup(h){const{t:s}=A(),u=x(),c=O(),p=E(),{switchToIndex:m,closeViewer:w,openViewer:g}=I(),{isViewerOpen:f}=V(I()),{photos:t}=j(),i=B([]),_=q("hasShownUpdateToast",()=>!1),S=["1.本ChronoFrame程序来自 fork 版本1.0.0-beta-fix-2025-12-31，本版本还在优化修改当中暂未提交。","2.优化了队列上传的读取速度","3.优化了首页图片部分展示照片为圆角状态","4.优化了加载动画","5.当前版本号为v1.0.0-beta-fix-2025-12-31"],a=d(()=>i.value[0]??null),o=d(()=>a.value?t.value.find(e=>e.id===a.value)??null:null,{}),T=d(()=>({headline:o.value?"PHOTO":"ChronoFrame",title:o.value?.title||b("app:title"),description:o.value?.description||b("app:title"),thumbnailJpegUrl:o.value?.thumbnailKey?`/thumb/${encodeURIComponent(o.value.thumbnailUrl||"")}`:void 0,photo:o.value||void 0}));L("Photo",T);const{clearAllFilters:y,toggleFilter:C}=N(),F=J(e=>{e&&typeof e=="string"&&!a.value&&(y(),C("tags",e),c.replace("/"))},300);return D(async(e,n)=>{i.value=e.params.slug||[];const l=i.value[0]??null;if(l&&t.value.length>0){const r=t.value.findIndex(P=>P.id===l);r!==-1&&(v({title:t.value[r]?.title||s("title.fallback.photo")}),f.value?m(r):g(r,null))}else l||(w(),v({title:""}));F(e.query.tag)}),H(()=>{if(i.value=u.params.slug||[],!a.value&&!_.value&&(p.add({title:"欢迎来到看见.",description:S.join(`
`),icon:"tabler:info-circle",color:"blue",duration:1e4,ui:{description:"whitespace-pre-line"},actions:[{label:"关闭",click:()=>{}}]}),_.value=!0),a.value&&t.value.length>0){const e=t.value.findIndex(n=>n.id===a.value);e!==-1&&(v({title:t.value[e]?.title||s("title.fallback.photo")}),f.value||g(e,null))}}),M(()=>t.value.length,e=>{if(a.value&&e>0){const n=t.value.findIndex(l=>l.id===a.value);n!==-1&&f.value&&m(n)}},{immediate:!1}),(e,n)=>(G(),$("div",Q,"Photo viewer page"))}}),Z=K(W,[["__scopeId","data-v-099fff77"]]);export{Z as default};
