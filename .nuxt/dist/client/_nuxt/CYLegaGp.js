import{C as V,a9 as S,K as z,c as m,b as l,a,w as p,R as h,t as f,M as k,a2 as $,F as A,a5 as B,O as t,ah as C,a6 as j,o as n,a3 as L,d as F,H as D,u as E,ai as H,aj as I,aa as N,ab as P,r as R,ak as T,_ as O}from"./Do4Ulm4h.js";import{_ as M}from"./Ds_hjWQ0.js";import{_ as q}from"./D_BgBUvd.js";import{_ as G,a as K}from"./CPK4N6jr.js";import{_ as J}from"./BcZAMJLg.js";import{o as Q,s as W,e as X}from"./oIv4vp1I.js";const Y={class:"flex flex-col items-center"},Z={key:0,class:"mb-2"},tt={key:1,class:"text-2xl font-medium text-highlighted text-pretty"},et={key:2,class:"mt-1 text-sm text-muted text-pretty"},at={class:"flex flex-col gap-4"},st={class:"flex flex-col gap-2"},ot=V({__name:"AuthForm",props:{icon:{},title:{},subtitle:{},providers:{},class:{},loading:{type:Boolean}},emits:["submit"],setup(e,{emit:b}){const{t:o}=S(),g=b,x=Q({email:X(o("auth.form.errors.invalidEmail")),password:W().min(6,o("auth.form.errors.invalidPassword"))}),r=z({email:void 0,password:""}),_=async c=>{g("submit",c)};return(c,i)=>{const d=C,u=j,v=M,w=q,y=K,U=G;return n(),m("div",{class:$(t(L)("w-full space-y-6 max-w-sm",c.$props.class))},[l(d,{type:"button",variant:"link",color:"neutral",icon:"tabler:arrow-left",size:"xs",to:"/"},{default:p(()=>[F(f(t(o)("auth.form.action.backToHome")),1)]),_:1}),a("div",Y,[e.icon?(n(),m("div",Z,[l(u,{name:e.icon,class:"size-8 inline-block shrink-0"},null,8,["name"])])):h("",!0),i[2]||(i[2]=a("div",{class:"mb-2"},[a("img",{src:J,alt:"App Logo",class:"size-24 rounded-full object-cover"})],-1)),e.title?(n(),m("div",tt,f(e.title),1)):h("",!0),e.subtitle?(n(),m("div",et,f(e.subtitle),1)):h("",!0)]),a("div",at,[e.providers&&e.providers.filter(s=>!!s).length>0?(n(),m("div",{key:0,class:$(e.providers.length>3?"space-y-2":"flex items-center gap-2")},[(n(!0),m(A,null,B(e.providers.filter(s=>!!s),s=>(n(),k(d,D({key:s.icon},{ref_for:!0},s,{loading:e.loading}),null,16,["loading"]))),128))],2)):h("",!0),e.providers&&e.providers.filter(s=>!!s).length>0?(n(),k(v,{key:1,label:t(o)("auth.form.action.or")},null,8,["label"])):h("",!0),l(U,{class:"space-y-4",schema:t(x),state:t(r),disabled:e.loading,onSubmit:_},{default:p(()=>[l(y,{label:t(o)("auth.form.labels.email"),name:"email"},{default:p(()=>[l(w,{modelValue:t(r).email,"onUpdate:modelValue":i[0]||(i[0]=s=>t(r).email=s),autofocus:!1,class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),l(y,{label:t(o)("auth.form.labels.password"),name:"password"},{default:p(()=>[l(w,{modelValue:t(r).password,"onUpdate:modelValue":i[1]||(i[1]=s=>t(r).password=s),autofocus:!1,type:"password",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),a("div",st,[l(d,{type:"submit",variant:"soft",color:"info","trailing-icon":"tabler:login-2",block:"",loading:e.loading},{default:p(()=>[F(f(t(o)("auth.form.action.continue")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state","disabled"])])],2)}}}),lt=Object.assign(ot,{__name:"AuthForm"}),nt={class:"relative w-full min-h-svh flex flex-col items-center justify-center p-4 overflow-hidden bg-[#F8F6F6] text-[#132843]"},it={class:"relative w-full max-w-md bg-white/70 backdrop-blur-xl border border-white/50 ring-1 ring-[#132843]/5 shadow-2xl shadow-[#132843]/10 rounded-3xl p-8 contain-layout animate-fade-in-up"},rt={class:"mb-8 text-center space-y-2"},ct={class:"text-3xl font-bold tracking-tight text-[#132843]"},ut={class:"text-sm font-medium text-[#3966A2]/80"},mt=V({__name:"signin",setup(e){const{t:b}=S();E({title:b("auth.form.signin.title")});const{fetch:o}=H(),g=T(),x=I(),r=N(),_=P(),c=R(!1),i=async d=>{c.value=!0,await $fetch("/api/login",{method:"POST",body:d.data}).then(async()=>{await o(),_.push(r.query.redirect?.toString()||"/")}).catch(u=>{console.error("Login error:",u),x.add({color:"error",title:"Login Failed",description:u?.data?.message||"An unexpected error occurred. Please try again."})}).finally(()=>{c.value=!1})};return(d,u)=>{const v=lt;return n(),m("div",nt,[u[0]||(u[0]=a("div",{class:"absolute inset-0 overflow-hidden pointer-events-none select-none"},[a("div",{class:"absolute top-0 left-[-10%] w-[50vw] h-[50vw] min-w-[300px] min-h-[300px] bg-[#D6DEEB] rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob will-change-transform translate-z-0"}),a("div",{class:"absolute bottom-0 right-[-10%] w-[50vw] h-[50vw] min-w-[300px] min-h-[300px] bg-[#6191D3] rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000 will-change-transform translate-z-0"}),a("div",{class:"absolute top-[20%] right-[20%] w-[40vw] h-[40vw] min-w-[200px] min-h-[200px] bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000 will-change-transform translate-z-0"})],-1)),a("div",it,[a("div",rt,[a("h1",ct,f(t(b)("auth.form.signin.title")),1),a("p",ut,f(t(b)("auth.form.signin.subtitle",[t(g).public.app.title])),1)]),l(v,{class:"auth-custom-form",title:"",subtitle:"",loading:t(c),providers:[t(g).public.oauth.github.enabled&&{icon:"tabler:brand-github",label:"GitHub",block:!0,size:"lg",to:"/api/auth/github",external:!0}],onSubmit:i},null,8,["loading","providers"])])])}}}),xt=O(mt,[["__scopeId","data-v-08628b78"]]);export{xt as default};
