import { _ as _sfc_main$m } from "./Checkbox-Dq2sl8WT.js";
import { h as useVModel, Y as useForwardExpose, aY as useFocusWithin, ap as useCollection, ae as createContext, R as Primitive, m as motion, l as __nuxt_component_0, k as _sfc_main$9, am as _sfc_main$a, B as _sfc_main$b, aO as _sfc_main$c, _ as _export_sfc, S as useAppConfig, aG as useLocale, an as createReusableTemplate, a8 as useFormField, V as tv, X as _sfc_main$e, W as _sfc_main$f, af as VisuallyHidden_default, q as useI18n, aZ as __nuxt_component_1, ak as usePortal, ag as useForwardPropsEmits, aJ as reactiveOmit, as as isArrayOfArray, at as get, a_ as omit, a$ as _sfc_main$k, b0 as pickLinkProps, b1 as _sfc_main$l, U as reactivePick, a9 as useFieldGroup, aa as useComponentIcons, z as __nuxt_component_0$1, u as useHead, x as usePhotos, D as useToast, aN as formatBytes, j as __nuxt_component_2$1, n as useDayjs, a as __nuxt_component_0$2, au as _sfc_main$q, aM as setInterval } from "../server.mjs";
import { _ as _sfc_main$n, a as _sfc_main$y } from "./DashboardNavbar-DXyxgaXz.js";
import { _ as _sfc_main$d } from "./Alert-BqiNJJCg.js";
import { defineComponent, toRefs, ref, computed, createBlock, openBlock, unref, withCtx, createVNode, renderSlot, createCommentVNode, withKeys, nextTick, mergeProps, createTextVNode, toDisplayString, watch, Fragment, renderList, useSSRContext, reactive, mergeModels, useSlots, useModel, toRef, withModifiers, resolveDynamicComponent, isRef, createSlots, useTemplateRef, toRaw, onUnmounted, readonly, h, resolveComponent } from "vue";
import { ssrRenderComponent, ssrRenderClass, ssrRenderList, ssrRenderStyle, ssrInterpolate, ssrRenderAttrs, ssrRenderSlot, ssrRenderVNode } from "vue/server-renderer";
import { _ as _sfc_main$o, a as _sfc_main$u } from "./Modal-B7zVIbEG.js";
import { u as useArrowNavigation, D as DropdownMenu, a as DropdownMenuRoot_default, b as DropdownMenuTrigger_default, c as DropdownMenuArrow_default, _ as _sfc_main$p } from "./Popover-CFijGsgn.js";
import { _ as _sfc_main$h, a as _sfc_main$j } from "./Tooltip-DYR4jUlr.js";
import { _ as _sfc_main$r, a as _sfc_main$s } from "./SelectMenu-BWx3h-Kw.js";
import { _ as _sfc_main$g } from "./Input-DTvqSRuX.js";
import { _ as _sfc_main$i } from "./Tabs-BLAj4WIP.js";
import { u as usePhotoFilters, a as usePhotoSort } from "./usePhotoFilters-aLj9DRyf.js";
import { defu } from "D:/chronoframe-opz/node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs";
import { _ as _sfc_main$t } from "./Table-Cek17xfi.js";
import { _ as _sfc_main$v, a as _sfc_main$w } from "./FormField-CKjh6qS6.js";
import { _ as _sfc_main$x } from "./Textarea-DypkF1uq.js";
import { u as useDirection } from "./useDirection-C-Y8mi8I.js";
import { u as useFormControl } from "./useFormControl-UP-XrpNq.js";
import { V as VisuallyHiddenInput_default } from "./VisuallyHiddenInput-8qWid5cT.js";
import { isEqual } from "D:/chronoframe-opz/node_modules/.pnpm/ohash@2.0.11/node_modules/ohash/dist/index.mjs";
import { u as useId } from "./useId-CmnGJZbL.js";
import { _ as __nuxt_component_1$1 } from "./ProviderMarker-D5gqE7-y.js";
import { _ as __nuxt_component_28 } from "./Photo-BszBA6M8.js";
import "D:/chronoframe-opz/node_modules/.pnpm/hookable@5.5.3/node_modules/hookable/dist/index.mjs";
import "./isValueEqualOrExist-87Clxp1I.js";
import "./RovingFocusItem-Bp2YpNRE.js";
import "./utils-Dht0ZB_U.js";
import "./RovingFocusGroup-U7ENIF_g.js";
import "D:/chronoframe-opz/node_modules/.pnpm/ofetch@1.5.1/node_modules/ofetch/dist/node.mjs";
import "#internal/nuxt/paths";
import "D:/chronoframe-opz/node_modules/.pnpm/unctx@2.5.0/node_modules/unctx/dist/index.mjs";
import "D:/chronoframe-opz/node_modules/.pnpm/h3@1.15.4/node_modules/h3/dist/index.mjs";
import "pinia";
import "vue-router";
import "D:/chronoframe-opz/node_modules/.pnpm/radix3@1.1.2/node_modules/radix3/dist/index.mjs";
import "D:/chronoframe-opz/node_modules/.pnpm/klona@2.0.6/node_modules/klona/dist/index.mjs";
import "D:/chronoframe-opz/node_modules/.pnpm/devalue@5.6.1/node_modules/devalue/index.js";
import "D:/chronoframe-opz/node_modules/.pnpm/@unhead+vue@2.1.1_vue@3.5.26_typescript@5.9.3_/node_modules/@unhead/vue/dist/index.mjs";
import "D:/chronoframe-opz/node_modules/.pnpm/cookie-es@2.0.0/node_modules/cookie-es/dist/index.mjs";
import "D:/chronoframe-opz/node_modules/.pnpm/destr@2.0.5/node_modules/destr/dist/index.mjs";
import "dayjs";
import "dayjs/plugin/updateLocale.js";
import "dayjs/locale/zh-cn.js";
import "dayjs/locale/zh-hk.js";
import "dayjs/locale/en.js";
import "dayjs/plugin/relativeTime.js";
import "dayjs/plugin/utc.js";
import "dayjs/plugin/timezone.js";
import "dayjs/plugin/duration.js";
import "dayjs/plugin/localizedFormat.js";
import "dayjs/plugin/isBetween.js";
import "tailwindcss/colors";
import "@yeger/vue-masonry-wall";
import "tailwind-merge";
import "D:/chronoframe-opz/node_modules/.pnpm/perfect-debounce@2.0.0/node_modules/perfect-debounce/dist/index.mjs";
import "thumbhash";
import "D:/chronoframe-opz/shared/utils/u8array.ts";
import "swiper/vue";
import "swiper/modules";
import "file-type";
import "D:/chronoframe-opz/shared/types/map.ts";
import "dayjs/locale/zh-tw.js";
import "./DashboardSidebarToggle-B_He8lib.js";
import "./DismissableLayer-8FDXRr8x.js";
import "./utils-Cr016bia.js";
import "./PopperArrow-Ddp-yvF2.js";
import "./floating-ui.vue-JO3O6Egx.js";
import "./useFocusGuards-BzyvJ7MS.js";
import "./useTypeahead-EUwWhm9r.js";
import "./handleAndDispatchCustomEvent-Bk_AVSSo.js";
import "./index-Cm3iXkLk.js";
import "D:/chronoframe-opz/node_modules/.pnpm/scule@1.3.0/node_modules/scule/dist/index.mjs";
import "mapbox-gl";
import "maplibre-gl";
const [injectTagsInputRootContext, provideTagsInputRootContext] = createContext("TagsInputRoot");
var TagsInputRoot_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
  __name: "TagsInputRoot",
  props: {
    modelValue: {
      type: [Array, null],
      required: false
    },
    defaultValue: {
      type: Array,
      required: false,
      default: () => []
    },
    addOnPaste: {
      type: Boolean,
      required: false
    },
    addOnTab: {
      type: Boolean,
      required: false
    },
    addOnBlur: {
      type: Boolean,
      required: false
    },
    duplicate: {
      type: Boolean,
      required: false
    },
    disabled: {
      type: Boolean,
      required: false
    },
    delimiter: {
      type: null,
      required: false,
      default: ","
    },
    dir: {
      type: String,
      required: false
    },
    max: {
      type: Number,
      required: false,
      default: 0
    },
    id: {
      type: String,
      required: false
    },
    convertValue: {
      type: Function,
      required: false
    },
    displayValue: {
      type: Function,
      required: false,
      default: (value) => value.toString()
    },
    asChild: {
      type: Boolean,
      required: false
    },
    as: {
      type: null,
      required: false
    },
    name: {
      type: String,
      required: false
    },
    required: {
      type: Boolean,
      required: false
    }
  },
  emits: [
    "update:modelValue",
    "invalid",
    "addTag",
    "removeTag"
  ],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const { addOnPaste, disabled, delimiter, max, id, dir: propDir, addOnBlur, addOnTab } = toRefs(props);
    const dir = useDirection(propDir);
    const modelValue = useVModel(props, "modelValue", emits, {
      defaultValue: props.defaultValue,
      passive: true,
      deep: true
    });
    const { forwardRef, currentElement } = useForwardExpose();
    const { focused } = useFocusWithin(currentElement);
    const isFormControl = useFormControl(currentElement);
    const { getItems, CollectionSlot } = useCollection({ isProvider: true });
    const selectedElement = ref();
    const isInvalidInput = ref(false);
    const currentModelValue = computed(() => Array.isArray(modelValue.value) ? [...modelValue.value] : []);
    function handleRemoveTag(index) {
      if (index !== -1) {
        const collection = getItems().filter((i) => i.ref.dataset.disabled !== "");
        modelValue.value = modelValue.value.filter((_, i) => i !== index);
        emits("removeTag", collection[index].value);
      }
    }
    provideTagsInputRootContext({
      modelValue,
      onAddValue: (_payload) => {
        const array = [...currentModelValue.value];
        const modelValueIsObject = array.length > 0 && typeof array[0] === "object";
        const defaultValueIsObject = array.length > 0 && typeof props.defaultValue[0] === "object";
        if ((modelValueIsObject || defaultValueIsObject) && typeof props.convertValue !== "function") throw new Error("You must provide a `convertValue` function when using objects as values.");
        const payload = props.convertValue ? props.convertValue(_payload) : _payload;
        if (array.length >= max.value && !!max.value) {
          emits("invalid", payload);
          return false;
        }
        if (props.duplicate) {
          modelValue.value = [...array, payload];
          emits("addTag", payload);
          return true;
        } else {
          const exist = array.includes(payload);
          if (!exist) {
            modelValue.value = [...array, payload];
            emits("addTag", payload);
            return true;
          } else isInvalidInput.value = true;
        }
        emits("invalid", payload);
        return false;
      },
      onRemoveValue: handleRemoveTag,
      onInputKeydown: (event) => {
        const target = event.target;
        const collection = getItems().map((i) => i.ref).filter((i) => i.dataset.disabled !== "");
        if (!collection.length) return;
        const lastTag = collection.at(-1);
        switch (event.key) {
          case "Delete":
          case "Backspace": {
            if (target.selectionStart !== 0 || target.selectionEnd !== 0) break;
            if (selectedElement.value) {
              const index = collection.findIndex((i) => i === selectedElement.value);
              handleRemoveTag(index);
              selectedElement.value = selectedElement.value === lastTag ? collection.at(index - 1) : collection.at(index + 1);
              event.preventDefault();
            } else if (event.key === "Backspace") {
              selectedElement.value = lastTag;
              event.preventDefault();
            }
            break;
          }
          case "Home":
          case "End":
          case "ArrowRight":
          case "ArrowLeft": {
            const isArrowRight = event.key === "ArrowRight" && dir.value === "ltr" || event.key === "ArrowLeft" && dir.value === "rtl";
            const isArrowLeft = !isArrowRight;
            if (target.selectionStart !== 0 || target.selectionEnd !== 0) break;
            if (isArrowLeft && !selectedElement.value) {
              selectedElement.value = lastTag;
              event.preventDefault();
            } else if (isArrowRight && lastTag && selectedElement.value === lastTag) {
              selectedElement.value = void 0;
              event.preventDefault();
            } else if (selectedElement.value) {
              const el = useArrowNavigation(event, selectedElement.value, void 0, {
                itemsArray: collection,
                loop: false,
                dir: dir.value
              });
              if (el) selectedElement.value = el;
              event.preventDefault();
            }
            break;
          }
          case "ArrowUp":
          case "ArrowDown": {
            if (selectedElement.value) event.preventDefault();
            break;
          }
          default:
            selectedElement.value = void 0;
        }
      },
      selectedElement,
      isInvalidInput,
      addOnPaste,
      addOnBlur,
      addOnTab,
      dir,
      disabled,
      delimiter,
      max,
      id,
      displayValue: props.displayValue
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(CollectionSlot), null, {
        default: withCtx(() => [createVNode(unref(Primitive), {
          ref: unref(forwardRef),
          dir: unref(dir),
          as: _ctx.as,
          "as-child": _ctx.asChild,
          "data-invalid": isInvalidInput.value ? "" : void 0,
          "data-disabled": unref(disabled) ? "" : void 0,
          "data-focused": unref(focused) ? "" : void 0
        }, {
          default: withCtx(() => [renderSlot(_ctx.$slots, "default", { modelValue: unref(modelValue) }), unref(isFormControl) && _ctx.name ? (openBlock(), createBlock(unref(VisuallyHiddenInput_default), {
            key: 0,
            name: _ctx.name,
            value: unref(modelValue),
            required: _ctx.required,
            disabled: unref(disabled)
          }, null, 8, [
            "name",
            "value",
            "required",
            "disabled"
          ])) : createCommentVNode("v-if", true)]),
          _: 3
        }, 8, [
          "dir",
          "as",
          "as-child",
          "data-invalid",
          "data-disabled",
          "data-focused"
        ])]),
        _: 3
      });
    };
  }
});
var TagsInputRoot_default = TagsInputRoot_vue_vue_type_script_setup_true_lang_default;
var TagsInputInput_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
  __name: "TagsInputInput",
  props: {
    placeholder: {
      type: String,
      required: false
    },
    autoFocus: {
      type: Boolean,
      required: false
    },
    maxLength: {
      type: Number,
      required: false
    },
    asChild: {
      type: Boolean,
      required: false
    },
    as: {
      type: null,
      required: false,
      default: "input"
    }
  },
  setup(__props) {
    const context = injectTagsInputRootContext();
    const { forwardRef } = useForwardExpose();
    function handleBlur(event) {
      context.selectedElement.value = void 0;
      if (!context.addOnBlur.value) return;
      const target = event.target;
      if (!target.value) return;
      const isAdded = context.onAddValue(target.value);
      if (isAdded) target.value = "";
    }
    function handleTab(event) {
      if (!context.addOnTab.value) return;
      handleCustomKeydown(event);
    }
    const isComposing = ref(false);
    function onCompositionStart() {
      isComposing.value = true;
    }
    function onCompositionEnd() {
      nextTick(() => {
        isComposing.value = false;
      });
    }
    async function handleCustomKeydown(event) {
      if (isComposing.value) return;
      await nextTick();
      if (event.defaultPrevented) return;
      const target = event.target;
      if (!target.value) return;
      const isAdded = context.onAddValue(target.value);
      if (isAdded) target.value = "";
      event.preventDefault();
    }
    function handleInput(event) {
      context.isInvalidInput.value = false;
      if (event.data === null) return;
      const delimiter = context.delimiter.value;
      const matchesDelimiter = delimiter === event.data || delimiter instanceof RegExp && delimiter.test(event.data);
      if (matchesDelimiter) {
        const target = event.target;
        target.value = target.value.replace(delimiter, "");
        if (target.value.trim() === "") {
          target.value = "";
          return;
        }
        const isAdded = context.onAddValue(target.value);
        if (isAdded) target.value = "";
      }
    }
    function handlePaste(event) {
      if (context.addOnPaste.value) {
        event.preventDefault();
        const clipboardData = event.clipboardData;
        if (!clipboardData) return;
        const value = clipboardData.getData("text");
        if (context.delimiter.value) {
          const splitValue = value.split(context.delimiter.value);
          splitValue.forEach((v) => {
            context.onAddValue(v);
          });
        } else context.onAddValue(value);
      }
    }
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(Primitive), {
        id: unref(context).id?.value,
        ref: unref(forwardRef),
        type: "text",
        autocomplete: "off",
        autocorrect: "off",
        autocapitalize: "off",
        as: _ctx.as,
        "as-child": _ctx.asChild,
        maxlength: _ctx.maxLength,
        placeholder: _ctx.placeholder,
        disabled: unref(context).disabled.value,
        "data-invalid": unref(context).isInvalidInput.value ? "" : void 0,
        onInput: handleInput,
        onKeydown: [
          withKeys(handleCustomKeydown, ["enter"]),
          withKeys(handleTab, ["tab"]),
          unref(context).onInputKeydown
        ],
        onBlur: handleBlur,
        onCompositionstart: onCompositionStart,
        onCompositionend: onCompositionEnd,
        onPaste: handlePaste
      }, {
        default: withCtx(() => [renderSlot(_ctx.$slots, "default")]),
        _: 3
      }, 8, [
        "id",
        "as",
        "as-child",
        "maxlength",
        "placeholder",
        "disabled",
        "data-invalid",
        "onKeydown"
      ]);
    };
  }
});
var TagsInputInput_default = TagsInputInput_vue_vue_type_script_setup_true_lang_default;
const [injectTagsInputItemContext, provideTagsInputItemContext] = createContext("TagsInputItem");
var TagsInputItem_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
  __name: "TagsInputItem",
  props: {
    value: {
      type: null,
      required: true
    },
    disabled: {
      type: Boolean,
      required: false
    },
    asChild: {
      type: Boolean,
      required: false
    },
    as: {
      type: null,
      required: false
    }
  },
  setup(__props) {
    const props = __props;
    const { value } = toRefs(props);
    const context = injectTagsInputRootContext();
    const { forwardRef, currentElement } = useForwardExpose();
    const { CollectionItem } = useCollection();
    const isSelected = computed(() => context.selectedElement.value === currentElement.value);
    const disabled = computed(() => props.disabled || context.disabled.value);
    const itemContext = provideTagsInputItemContext({
      value,
      isSelected,
      disabled,
      textId: "",
      displayValue: computed(() => context.displayValue(value.value))
    });
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(CollectionItem), { value: unref(value) }, {
        default: withCtx(() => [createVNode(unref(Primitive), {
          ref: unref(forwardRef),
          as: _ctx.as,
          "as-child": _ctx.asChild,
          "aria-labelledby": unref(itemContext).textId,
          "aria-current": isSelected.value,
          "data-disabled": disabled.value ? "" : void 0,
          "data-state": isSelected.value ? "active" : "inactive"
        }, {
          default: withCtx(() => [renderSlot(_ctx.$slots, "default")]),
          _: 3
        }, 8, [
          "as",
          "as-child",
          "aria-labelledby",
          "aria-current",
          "data-disabled",
          "data-state"
        ])]),
        _: 3
      }, 8, ["value"]);
    };
  }
});
var TagsInputItem_default = TagsInputItem_vue_vue_type_script_setup_true_lang_default;
var TagsInputItemDelete_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
  __name: "TagsInputItemDelete",
  props: {
    asChild: {
      type: Boolean,
      required: false
    },
    as: {
      type: null,
      required: false,
      default: "button"
    }
  },
  setup(__props) {
    const props = __props;
    useForwardExpose();
    const context = injectTagsInputRootContext();
    const itemContext = injectTagsInputItemContext();
    const disabled = computed(() => itemContext.disabled?.value || context.disabled.value);
    function handleDelete() {
      if (disabled.value) return;
      const index = context.modelValue.value.findIndex((i) => isEqual(i, itemContext.value.value));
      context.onRemoveValue(index);
    }
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(Primitive), mergeProps({ tabindex: "-1" }, props, {
        "aria-labelledby": unref(itemContext).textId,
        "aria-current": unref(itemContext).isSelected.value,
        "data-state": unref(itemContext).isSelected.value ? "active" : "inactive",
        "data-disabled": disabled.value ? "" : void 0,
        type: _ctx.as === "button" ? "button" : void 0,
        onClick: handleDelete
      }), {
        default: withCtx(() => [renderSlot(_ctx.$slots, "default")]),
        _: 3
      }, 16, [
        "aria-labelledby",
        "aria-current",
        "data-state",
        "data-disabled",
        "type"
      ]);
    };
  }
});
var TagsInputItemDelete_default = TagsInputItemDelete_vue_vue_type_script_setup_true_lang_default;
var TagsInputItemText_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({
  __name: "TagsInputItemText",
  props: {
    asChild: {
      type: Boolean,
      required: false
    },
    as: {
      type: null,
      required: false,
      default: "span"
    }
  },
  setup(__props) {
    const props = __props;
    const itemContext = injectTagsInputItemContext();
    useForwardExpose();
    itemContext.textId ||= useId(void 0, "reka-tags-input-item-text");
    return (_ctx, _cache) => {
      return openBlock(), createBlock(unref(Primitive), mergeProps(props, { id: unref(itemContext).textId }), {
        default: withCtx(() => [renderSlot(_ctx.$slots, "default", {}, () => [createTextVNode(toDisplayString(unref(itemContext).displayValue.value), 1)])]),
        _: 3
      }, 16, ["id"]);
    };
  }
});
var TagsInputItemText_default = TagsInputItemText_vue_vue_type_script_setup_true_lang_default;
const particleCount = 12;
const _sfc_main$8 = /* @__PURE__ */ defineComponent({
  __name: "UploadQueueItem",
  __ssrInlineRender: true,
  props: {
    uploadingFile: {},
    fileId: {}
  },
  emits: ["removeFile"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const fileIcon = computed(() => {
      const file = props.uploadingFile.file;
      if (file.type.startsWith("image/")) {
        return "tabler:photo";
      } else if (file.type.startsWith("video/")) {
        return "tabler:video";
      }
      return "tabler:file";
    });
    const statusColor = computed(() => {
      switch (props.uploadingFile.status) {
        case "waiting":
          return "neutral";
        case "preparing":
          return "primary";
        case "uploading":
          return "primary";
        case "processing":
          return "info";
        case "completed":
          return "success";
        case "error":
          return "error";
        case "skipped":
          return "warning";
        case "blocked":
          return "error";
        default:
          return "neutral";
      }
    });
    const statusText = computed(() => {
      switch (props.uploadingFile.status) {
        case "waiting":
          return "等待上传";
        case "preparing":
          return "准备中";
        case "uploading":
          return `上传中 ${props.uploadingFile.progress || 0}%`;
        case "processing":
          return props.uploadingFile.stage ? getStageText(props.uploadingFile.stage) : "等待处理";
        case "completed":
          return "完成";
        case "error":
          return "错误";
        case "skipped":
          return "已跳过";
        case "blocked":
          return "被阻止";
        default:
          return "未知";
      }
    });
    const getStageText = (stage) => {
      const stageMap = {
        preprocessing: "预处理中",
        metadata: "提取元数据",
        thumbnail: "生成缩略图",
        exif: "处理 EXIF",
        "reverse-geocoding": "地理解析",
        "live-photo": "检测 LivePhoto"
      };
      return stageMap[stage] || stage;
    };
    const formatBytes2 = (bytes) => {
      if (bytes === 0) return "0 B";
      const k = 1024;
      const sizes = ["B", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + " " + sizes[i];
    };
    const showParticles = ref(false);
    const showProcessingWarning = ref(false);
    const processingStartTime = ref(null);
    let processingTimer = null;
    watch(
      () => props.uploadingFile.status,
      async (newStatus, oldStatus) => {
        if (newStatus === "completed" && oldStatus !== "completed") {
          await nextTick();
          setTimeout(() => {
            showParticles.value = true;
            setTimeout(() => {
              showParticles.value = false;
            }, 2e3);
          }, 300);
        }
        if (newStatus === "processing" && oldStatus !== "processing") {
          processingStartTime.value = Date.now();
          showProcessingWarning.value = false;
          processingTimer = setTimeout(() => {
            if (props.uploadingFile.status === "processing") {
              showProcessingWarning.value = true;
            }
          }, 3e4);
        } else if (oldStatus === "processing" && newStatus !== "processing") {
          if (processingTimer) {
            clearTimeout(processingTimer);
            processingTimer = null;
          }
          showProcessingWarning.value = false;
          processingStartTime.value = null;
        }
      }
    );
    const generateParticleStyle = (index) => {
      const angle = 360 / particleCount * index;
      const distance = 60 + Math.random() * 40;
      const duration = 1.5 + Math.random() * 0.5;
      return {
        "--angle": `${angle}deg`,
        "--distance": `${distance}px`,
        "--duration": `${duration}s`,
        "--delay": `${Math.random() * 0.3}s`
      };
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = __nuxt_component_0;
      const _component_UBadge = _sfc_main$a;
      const _component_UButton = _sfc_main$b;
      const _component_UProgress = _sfc_main$c;
      const _component_UAlert = _sfc_main$d;
      _push(ssrRenderComponent(unref(motion).div, mergeProps({
        class: "bg-white dark:bg-neutral-800 rounded-lg p-3 shadow-sm border border-neutral-200 dark:border-neutral-700",
        initial: { opacity: 0, scale: 0.95, y: 20 },
        animate: { opacity: 1, scale: 1, y: 0 },
        exit: { opacity: 0, scale: 0.95, y: -20 },
        transition: { duration: 0.3, ease: "easeOut" },
        layout: ""
      }, _attrs), {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="flex items-start justify-between" data-v-967c796b${_scopeId}><div class="flex items-center gap-3 flex-1 min-w-0" data-v-967c796b${_scopeId}>`);
            _push2(ssrRenderComponent(unref(motion).div, {
              class: "relative flex-shrink-0",
              transition: {
                duration: __props.uploadingFile.status === "processing" ? 2 : 0.3,
                repeat: __props.uploadingFile.status === "processing" ? Infinity : 0,
                ease: "linear"
              }
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="${ssrRenderClass([{
                    "bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800/50": statusColor.value === "primary" || statusColor.value === "info",
                    "bg-green-100 dark:bg-green-900/30 border-green-200 dark:border-green-800/50": statusColor.value === "success",
                    "bg-red-100 dark:bg-red-900/30 border-red-200 dark:border-red-800/50": statusColor.value === "error",
                    "bg-yellow-100 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800/50": statusColor.value === "warning",
                    "bg-neutral-100 dark:bg-neutral-900/30 border-neutral-200 dark:border-neutral-800/50": statusColor.value === "neutral"
                  }, "w-10 h-10 rounded-lg border flex items-center justify-center"])}" data-v-967c796b${_scopeId2}>`);
                  _push3(ssrRenderComponent(_component_Icon, {
                    name: fileIcon.value,
                    class: ["w-5 h-5", {
                      "text-blue-600/80 dark:text-blue-400/80": statusColor.value === "primary" || statusColor.value === "info",
                      "text-green-600/80 dark:text-green-400/80": statusColor.value === "success",
                      "text-red-600/80 dark:text-red-400/80": statusColor.value === "error",
                      "text-yellow-600/80 dark:text-yellow-400/80": statusColor.value === "warning",
                      "text-neutral-600/80 dark:text-neutral-400/80": statusColor.value === "neutral"
                    }]
                  }, null, _parent3, _scopeId2));
                  _push3(`</div>`);
                  if (__props.uploadingFile.status === "completed") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      class: "absolute -top-2 -right-2 size-5 bg-green-900 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_Icon, {
                            name: "tabler:check",
                            class: "size-3 text-white"
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_Icon, {
                              name: "tabler:check",
                              class: "size-3 text-white"
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                  if (__props.uploadingFile.status === "skipped") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      class: "absolute -top-2 -right-2 size-5 bg-yellow-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_Icon, {
                            name: "tabler:arrow-big-right-lines",
                            class: "size-3 text-white"
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_Icon, {
                              name: "tabler:arrow-big-right-lines",
                              class: "size-3 text-white"
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                  if (__props.uploadingFile.status === "blocked") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      class: "absolute -top-2 -right-2 size-5 bg-red-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_Icon, {
                            name: "tabler:cancel",
                            class: "size-3 text-white"
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_Icon, {
                              name: "tabler:cancel",
                              class: "size-3 text-white"
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                  _push3(ssrRenderComponent(unref(_sfc_main$9), null, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        if (showParticles.value && __props.uploadingFile.status === "completed") {
                          _push4(ssrRenderComponent(unref(motion).div, {
                            class: "absolute -top-2 -right-2 size-5 pointer-events-none",
                            initial: { opacity: 0 },
                            animate: { opacity: 1 },
                            exit: { opacity: 0 },
                            transition: { duration: 0.2 }
                          }, {
                            default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                              if (_push5) {
                                _push5(`<!--[-->`);
                                ssrRenderList(particleCount, (i) => {
                                  _push5(`<div class="absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full particle-burst" style="${ssrRenderStyle(generateParticleStyle(i - 1))}" data-v-967c796b${_scopeId4}></div>`);
                                });
                                _push5(`<!--]-->`);
                              } else {
                                return [
                                  (openBlock(), createBlock(Fragment, null, renderList(particleCount, (i) => {
                                    return createVNode("div", {
                                      key: i,
                                      class: "absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full particle-burst",
                                      style: generateParticleStyle(i - 1)
                                    }, null, 4);
                                  }), 64))
                                ];
                              }
                            }),
                            _: 1
                          }, _parent4, _scopeId3));
                        } else {
                          _push4(`<!---->`);
                        }
                      } else {
                        return [
                          showParticles.value && __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                            key: 0,
                            class: "absolute -top-2 -right-2 size-5 pointer-events-none",
                            initial: { opacity: 0 },
                            animate: { opacity: 1 },
                            exit: { opacity: 0 },
                            transition: { duration: 0.2 }
                          }, {
                            default: withCtx(() => [
                              (openBlock(), createBlock(Fragment, null, renderList(particleCount, (i) => {
                                return createVNode("div", {
                                  key: i,
                                  class: "absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full particle-burst",
                                  style: generateParticleStyle(i - 1)
                                }, null, 4);
                              }), 64))
                            ]),
                            _: 1
                          })) : createCommentVNode("", true)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode("div", {
                      class: ["w-10 h-10 rounded-lg border flex items-center justify-center", {
                        "bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800/50": statusColor.value === "primary" || statusColor.value === "info",
                        "bg-green-100 dark:bg-green-900/30 border-green-200 dark:border-green-800/50": statusColor.value === "success",
                        "bg-red-100 dark:bg-red-900/30 border-red-200 dark:border-red-800/50": statusColor.value === "error",
                        "bg-yellow-100 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800/50": statusColor.value === "warning",
                        "bg-neutral-100 dark:bg-neutral-900/30 border-neutral-200 dark:border-neutral-800/50": statusColor.value === "neutral"
                      }]
                    }, [
                      createVNode(_component_Icon, {
                        name: fileIcon.value,
                        class: ["w-5 h-5", {
                          "text-blue-600/80 dark:text-blue-400/80": statusColor.value === "primary" || statusColor.value === "info",
                          "text-green-600/80 dark:text-green-400/80": statusColor.value === "success",
                          "text-red-600/80 dark:text-red-400/80": statusColor.value === "error",
                          "text-yellow-600/80 dark:text-yellow-400/80": statusColor.value === "warning",
                          "text-neutral-600/80 dark:text-neutral-400/80": statusColor.value === "neutral"
                        }]
                      }, null, 8, ["name", "class"])
                    ], 2),
                    __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      class: "absolute -top-2 -right-2 size-5 bg-green-900 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_Icon, {
                          name: "tabler:check",
                          class: "size-3 text-white"
                        })
                      ]),
                      _: 1
                    })) : createCommentVNode("", true),
                    __props.uploadingFile.status === "skipped" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 1,
                      class: "absolute -top-2 -right-2 size-5 bg-yellow-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_Icon, {
                          name: "tabler:arrow-big-right-lines",
                          class: "size-3 text-white"
                        })
                      ]),
                      _: 1
                    })) : createCommentVNode("", true),
                    __props.uploadingFile.status === "blocked" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 2,
                      class: "absolute -top-2 -right-2 size-5 bg-red-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                      initial: { scale: 0 },
                      animate: { scale: 1 },
                      transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_Icon, {
                          name: "tabler:cancel",
                          class: "size-3 text-white"
                        })
                      ]),
                      _: 1
                    })) : createCommentVNode("", true),
                    createVNode(unref(_sfc_main$9), null, {
                      default: withCtx(() => [
                        showParticles.value && __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                          key: 0,
                          class: "absolute -top-2 -right-2 size-5 pointer-events-none",
                          initial: { opacity: 0 },
                          animate: { opacity: 1 },
                          exit: { opacity: 0 },
                          transition: { duration: 0.2 }
                        }, {
                          default: withCtx(() => [
                            (openBlock(), createBlock(Fragment, null, renderList(particleCount, (i) => {
                              return createVNode("div", {
                                key: i,
                                class: "absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full particle-burst",
                                style: generateParticleStyle(i - 1)
                              }, null, 4);
                            }), 64))
                          ]),
                          _: 1
                        })) : createCommentVNode("", true)
                      ]),
                      _: 1
                    })
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`<div class="flex-1 min-w-0" data-v-967c796b${_scopeId}><div class="flex items-center gap-2 mb-1" data-v-967c796b${_scopeId}><p class="font-medium text-sm truncate text-neutral-900 dark:text-neutral-100" data-v-967c796b${_scopeId}>${ssrInterpolate(__props.uploadingFile.fileName)}</p>`);
            _push2(ssrRenderComponent(_component_UBadge, {
              color: statusColor.value,
              variant: "soft",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`${ssrInterpolate(statusText.value)}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(statusText.value), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div><div class="flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400" data-v-967c796b${_scopeId}><span data-v-967c796b${_scopeId}>${ssrInterpolate(formatBytes2(__props.uploadingFile.file.size))}</span>`);
            if (__props.uploadingFile.uploadProgress?.speedText && __props.uploadingFile.status === "uploading") {
              _push2(`<span class="hidden sm:inline" data-v-967c796b${_scopeId}> • ${ssrInterpolate(__props.uploadingFile.uploadProgress.speedText)}</span>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div></div></div><div class="flex items-center gap-2 ml-2" data-v-967c796b${_scopeId}>`);
            if (__props.uploadingFile.status === "uploading" && __props.uploadingFile.canAbort) {
              _push2(ssrRenderComponent(unref(motion).div, {
                initial: { opacity: 0, scale: 0.8 },
                animate: { opacity: 1, scale: 1 },
                exit: { opacity: 0, scale: 0.8 }
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(ssrRenderComponent(_component_UButton, {
                      size: "xs",
                      color: "error",
                      variant: "ghost",
                      icon: "tabler:x",
                      onClick: ($event) => __props.uploadingFile.abortUpload?.()
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(` 中止 `);
                        } else {
                          return [
                            createTextVNode(" 中止 ")
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    return [
                      createVNode(_component_UButton, {
                        size: "xs",
                        color: "error",
                        variant: "ghost",
                        icon: "tabler:x",
                        onClick: ($event) => __props.uploadingFile.abortUpload?.()
                      }, {
                        default: withCtx(() => [
                          createTextVNode(" 中止 ")
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
            if (__props.uploadingFile.status === "completed" || __props.uploadingFile.status === "error") {
              _push2(ssrRenderComponent(unref(motion).div, {
                initial: { opacity: 0, scale: 0.8 },
                animate: { opacity: 1, scale: 1 },
                exit: { opacity: 0, scale: 0.8 }
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(ssrRenderComponent(_component_UButton, {
                      size: "xs",
                      color: "neutral",
                      variant: "soft",
                      icon: "tabler:x",
                      onClick: ($event) => emit("removeFile", __props.fileId)
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(` 清除 `);
                        } else {
                          return [
                            createTextVNode(" 清除 ")
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    return [
                      createVNode(_component_UButton, {
                        size: "xs",
                        color: "neutral",
                        variant: "soft",
                        icon: "tabler:x",
                        onClick: ($event) => emit("removeFile", __props.fileId)
                      }, {
                        default: withCtx(() => [
                          createTextVNode(" 清除 ")
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div></div>`);
            _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  if (__props.uploadingFile.status === "uploading" || __props.uploadingFile.status === "processing") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      initial: { opacity: 0, height: 0 },
                      animate: { opacity: 1, height: "auto" },
                      exit: { opacity: 0, height: 0 },
                      transition: { duration: 0.3 },
                      class: "space-y-2 mt-3"
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          if (__props.uploadingFile.status === "uploading") {
                            _push4(`<div class="space-y-1" data-v-967c796b${_scopeId3}><div class="flex justify-between items-center" data-v-967c796b${_scopeId3}><span class="text-xs text-neutral-600 dark:text-neutral-400" data-v-967c796b${_scopeId3}> 上传进度 </span><span class="text-xs font-mono text-neutral-600 dark:text-neutral-400" data-v-967c796b${_scopeId3}>${ssrInterpolate(__props.uploadingFile.progress)}% </span></div>`);
                            _push4(ssrRenderComponent(unref(motion).div, {
                              class: "relative",
                              initial: { scaleX: 0 },
                              animate: { scaleX: 1 },
                              transition: { duration: 0.5 }
                            }, {
                              default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                if (_push5) {
                                  _push5(ssrRenderComponent(_component_UProgress, {
                                    "model-value": __props.uploadingFile.progress,
                                    color: statusColor.value
                                  }, null, _parent5, _scopeId4));
                                } else {
                                  return [
                                    createVNode(_component_UProgress, {
                                      "model-value": __props.uploadingFile.progress,
                                      color: statusColor.value
                                    }, null, 8, ["model-value", "color"])
                                  ];
                                }
                              }),
                              _: 1
                            }, _parent4, _scopeId3));
                            if (__props.uploadingFile.uploadProgress?.timeRemainingText) {
                              _push4(`<div class="text-xs text-neutral-500 dark:text-neutral-400" data-v-967c796b${_scopeId3}> 剩余时间: ${ssrInterpolate(__props.uploadingFile.uploadProgress.timeRemainingText)}</div>`);
                            } else {
                              _push4(`<!---->`);
                            }
                            _push4(`</div>`);
                          } else {
                            _push4(`<!---->`);
                          }
                          if (__props.uploadingFile.status === "processing") {
                            _push4(`<div class="space-y-1" data-v-967c796b${_scopeId3}><div class="flex justify-between items-center" data-v-967c796b${_scopeId3}><span class="text-xs text-neutral-600 dark:text-neutral-400" data-v-967c796b${_scopeId3}> 处理状态 </span>`);
                            _push4(ssrRenderComponent(unref(motion).span, {
                              class: "text-xs text-info-600 dark:text-info-400",
                              animate: { opacity: [0.8, 1, 0.8] },
                              transition: { duration: 2, repeat: Infinity }
                            }, {
                              default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                if (_push5) {
                                  _push5(`${ssrInterpolate(getStageText(__props.uploadingFile.stage || "pending"))}`);
                                } else {
                                  return [
                                    createTextVNode(toDisplayString(getStageText(__props.uploadingFile.stage || "pending")), 1)
                                  ];
                                }
                              }),
                              _: 1
                            }, _parent4, _scopeId3));
                            _push4(`</div>`);
                            _push4(ssrRenderComponent(_component_UProgress, {
                              "model-value": null,
                              animation: "swing",
                              color: "info"
                            }, null, _parent4, _scopeId3));
                            _push4(`</div>`);
                          } else {
                            _push4(`<!---->`);
                          }
                        } else {
                          return [
                            __props.uploadingFile.status === "uploading" ? (openBlock(), createBlock("div", {
                              key: 0,
                              class: "space-y-1"
                            }, [
                              createVNode("div", { class: "flex justify-between items-center" }, [
                                createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 上传进度 "),
                                createVNode("span", { class: "text-xs font-mono text-neutral-600 dark:text-neutral-400" }, toDisplayString(__props.uploadingFile.progress) + "% ", 1)
                              ]),
                              createVNode(unref(motion).div, {
                                class: "relative",
                                initial: { scaleX: 0 },
                                animate: { scaleX: 1 },
                                transition: { duration: 0.5 }
                              }, {
                                default: withCtx(() => [
                                  createVNode(_component_UProgress, {
                                    "model-value": __props.uploadingFile.progress,
                                    color: statusColor.value
                                  }, null, 8, ["model-value", "color"])
                                ]),
                                _: 1
                              }),
                              __props.uploadingFile.uploadProgress?.timeRemainingText ? (openBlock(), createBlock("div", {
                                key: 0,
                                class: "text-xs text-neutral-500 dark:text-neutral-400"
                              }, " 剩余时间: " + toDisplayString(__props.uploadingFile.uploadProgress.timeRemainingText), 1)) : createCommentVNode("", true)
                            ])) : createCommentVNode("", true),
                            __props.uploadingFile.status === "processing" ? (openBlock(), createBlock("div", {
                              key: 1,
                              class: "space-y-1"
                            }, [
                              createVNode("div", { class: "flex justify-between items-center" }, [
                                createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 处理状态 "),
                                createVNode(unref(motion).span, {
                                  class: "text-xs text-info-600 dark:text-info-400",
                                  animate: { opacity: [0.8, 1, 0.8] },
                                  transition: { duration: 2, repeat: Infinity }
                                }, {
                                  default: withCtx(() => [
                                    createTextVNode(toDisplayString(getStageText(__props.uploadingFile.stage || "pending")), 1)
                                  ]),
                                  _: 1
                                })
                              ]),
                              createVNode(_component_UProgress, {
                                "model-value": null,
                                animation: "swing",
                                color: "info"
                              })
                            ])) : createCommentVNode("", true)
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                } else {
                  return [
                    __props.uploadingFile.status === "uploading" || __props.uploadingFile.status === "processing" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { opacity: 0, height: 0 },
                      animate: { opacity: 1, height: "auto" },
                      exit: { opacity: 0, height: 0 },
                      transition: { duration: 0.3 },
                      class: "space-y-2 mt-3"
                    }, {
                      default: withCtx(() => [
                        __props.uploadingFile.status === "uploading" ? (openBlock(), createBlock("div", {
                          key: 0,
                          class: "space-y-1"
                        }, [
                          createVNode("div", { class: "flex justify-between items-center" }, [
                            createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 上传进度 "),
                            createVNode("span", { class: "text-xs font-mono text-neutral-600 dark:text-neutral-400" }, toDisplayString(__props.uploadingFile.progress) + "% ", 1)
                          ]),
                          createVNode(unref(motion).div, {
                            class: "relative",
                            initial: { scaleX: 0 },
                            animate: { scaleX: 1 },
                            transition: { duration: 0.5 }
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UProgress, {
                                "model-value": __props.uploadingFile.progress,
                                color: statusColor.value
                              }, null, 8, ["model-value", "color"])
                            ]),
                            _: 1
                          }),
                          __props.uploadingFile.uploadProgress?.timeRemainingText ? (openBlock(), createBlock("div", {
                            key: 0,
                            class: "text-xs text-neutral-500 dark:text-neutral-400"
                          }, " 剩余时间: " + toDisplayString(__props.uploadingFile.uploadProgress.timeRemainingText), 1)) : createCommentVNode("", true)
                        ])) : createCommentVNode("", true),
                        __props.uploadingFile.status === "processing" ? (openBlock(), createBlock("div", {
                          key: 1,
                          class: "space-y-1"
                        }, [
                          createVNode("div", { class: "flex justify-between items-center" }, [
                            createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 处理状态 "),
                            createVNode(unref(motion).span, {
                              class: "text-xs text-info-600 dark:text-info-400",
                              animate: { opacity: [0.8, 1, 0.8] },
                              transition: { duration: 2, repeat: Infinity }
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(getStageText(__props.uploadingFile.stage || "pending")), 1)
                              ]),
                              _: 1
                            })
                          ]),
                          createVNode(_component_UProgress, {
                            "model-value": null,
                            animation: "swing",
                            color: "info"
                          })
                        ])) : createCommentVNode("", true)
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  if (__props.uploadingFile.status === "error" && __props.uploadingFile.error) {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      initial: { opacity: 0, height: 0, y: -10 },
                      animate: { opacity: 1, height: "auto", y: 0 },
                      exit: { opacity: 0, height: 0, y: -10 },
                      transition: { duration: 0.3 },
                      class: "mt-3"
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_UAlert, {
                            description: __props.uploadingFile.error,
                            color: "error",
                            variant: "soft",
                            icon: "tabler:alert-circle",
                            ui: {
                              root: "px-2.5 py-2"
                            }
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_UAlert, {
                              description: __props.uploadingFile.error,
                              color: "error",
                              variant: "soft",
                              icon: "tabler:alert-circle",
                              ui: {
                                root: "px-2.5 py-2"
                              }
                            }, null, 8, ["description"])
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                } else {
                  return [
                    __props.uploadingFile.status === "error" && __props.uploadingFile.error ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { opacity: 0, height: 0, y: -10 },
                      animate: { opacity: 1, height: "auto", y: 0 },
                      exit: { opacity: 0, height: 0, y: -10 },
                      transition: { duration: 0.3 },
                      class: "mt-3"
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UAlert, {
                          description: __props.uploadingFile.error,
                          color: "error",
                          variant: "soft",
                          icon: "tabler:alert-circle",
                          ui: {
                            root: "px-2.5 py-2"
                          }
                        }, null, 8, ["description"])
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  if (showProcessingWarning.value && __props.uploadingFile.status === "processing") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      initial: { opacity: 0, height: 0, y: -10 },
                      animate: { opacity: 1, height: "auto", y: 0 },
                      exit: { opacity: 0, height: 0, y: -10 },
                      transition: { duration: 0.3 },
                      class: "mt-3"
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_UAlert, {
                            description: "大文件处理时间较长，为正常现象",
                            color: "info",
                            variant: "soft",
                            icon: "tabler:info-circle",
                            ui: {
                              root: "px-2.5 py-2"
                            }
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_UAlert, {
                              description: "大文件处理时间较长，为正常现象",
                              color: "info",
                              variant: "soft",
                              icon: "tabler:info-circle",
                              ui: {
                                root: "px-2.5 py-2"
                              }
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                } else {
                  return [
                    showProcessingWarning.value && __props.uploadingFile.status === "processing" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { opacity: 0, height: 0, y: -10 },
                      animate: { opacity: 1, height: "auto", y: 0 },
                      exit: { opacity: 0, height: 0, y: -10 },
                      transition: { duration: 0.3 },
                      class: "mt-3"
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UAlert, {
                          description: "大文件处理时间较长，为正常现象",
                          color: "info",
                          variant: "soft",
                          icon: "tabler:info-circle",
                          ui: {
                            root: "px-2.5 py-2"
                          }
                        })
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  if (__props.uploadingFile.status === "completed") {
                    _push3(ssrRenderComponent(unref(motion).div, {
                      initial: { opacity: 0, scale: 0.8, y: 10 },
                      animate: {
                        opacity: 1,
                        scale: [0.8, 1.1, 1],
                        y: 0
                      },
                      exit: { opacity: 0, scale: 0.9, y: -10 },
                      transition: {
                        duration: 0.6,
                        ease: "backOut"
                      },
                      class: "mt-3"
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_UAlert, {
                            description: "文件已成功上传并处理",
                            color: "success",
                            variant: "soft",
                            icon: "tabler:circle-check",
                            ui: {
                              root: "px-2.5 py-2"
                            }
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_UAlert, {
                              description: "文件已成功上传并处理",
                              color: "success",
                              variant: "soft",
                              icon: "tabler:circle-check",
                              ui: {
                                root: "px-2.5 py-2"
                              }
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                } else {
                  return [
                    __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { opacity: 0, scale: 0.8, y: 10 },
                      animate: {
                        opacity: 1,
                        scale: [0.8, 1.1, 1],
                        y: 0
                      },
                      exit: { opacity: 0, scale: 0.9, y: -10 },
                      transition: {
                        duration: 0.6,
                        ease: "backOut"
                      },
                      class: "mt-3"
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UAlert, {
                          description: "文件已成功上传并处理",
                          color: "success",
                          variant: "soft",
                          icon: "tabler:circle-check",
                          ui: {
                            root: "px-2.5 py-2"
                          }
                        })
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
          } else {
            return [
              createVNode("div", { class: "flex items-start justify-between" }, [
                createVNode("div", { class: "flex items-center gap-3 flex-1 min-w-0" }, [
                  createVNode(unref(motion).div, {
                    class: "relative flex-shrink-0",
                    transition: {
                      duration: __props.uploadingFile.status === "processing" ? 2 : 0.3,
                      repeat: __props.uploadingFile.status === "processing" ? Infinity : 0,
                      ease: "linear"
                    }
                  }, {
                    default: withCtx(() => [
                      createVNode("div", {
                        class: ["w-10 h-10 rounded-lg border flex items-center justify-center", {
                          "bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800/50": statusColor.value === "primary" || statusColor.value === "info",
                          "bg-green-100 dark:bg-green-900/30 border-green-200 dark:border-green-800/50": statusColor.value === "success",
                          "bg-red-100 dark:bg-red-900/30 border-red-200 dark:border-red-800/50": statusColor.value === "error",
                          "bg-yellow-100 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800/50": statusColor.value === "warning",
                          "bg-neutral-100 dark:bg-neutral-900/30 border-neutral-200 dark:border-neutral-800/50": statusColor.value === "neutral"
                        }]
                      }, [
                        createVNode(_component_Icon, {
                          name: fileIcon.value,
                          class: ["w-5 h-5", {
                            "text-blue-600/80 dark:text-blue-400/80": statusColor.value === "primary" || statusColor.value === "info",
                            "text-green-600/80 dark:text-green-400/80": statusColor.value === "success",
                            "text-red-600/80 dark:text-red-400/80": statusColor.value === "error",
                            "text-yellow-600/80 dark:text-yellow-400/80": statusColor.value === "warning",
                            "text-neutral-600/80 dark:text-neutral-400/80": statusColor.value === "neutral"
                          }]
                        }, null, 8, ["name", "class"])
                      ], 2),
                      __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                        key: 0,
                        class: "absolute -top-2 -right-2 size-5 bg-green-900 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                        initial: { scale: 0 },
                        animate: { scale: 1 },
                        transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_Icon, {
                            name: "tabler:check",
                            class: "size-3 text-white"
                          })
                        ]),
                        _: 1
                      })) : createCommentVNode("", true),
                      __props.uploadingFile.status === "skipped" ? (openBlock(), createBlock(unref(motion).div, {
                        key: 1,
                        class: "absolute -top-2 -right-2 size-5 bg-yellow-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                        initial: { scale: 0 },
                        animate: { scale: 1 },
                        transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_Icon, {
                            name: "tabler:arrow-big-right-lines",
                            class: "size-3 text-white"
                          })
                        ]),
                        _: 1
                      })) : createCommentVNode("", true),
                      __props.uploadingFile.status === "blocked" ? (openBlock(), createBlock(unref(motion).div, {
                        key: 2,
                        class: "absolute -top-2 -right-2 size-5 bg-red-600 rounded-full border-2 border-white dark:border-neutral-800 flex items-center justify-center",
                        initial: { scale: 0 },
                        animate: { scale: 1 },
                        transition: { delay: 0.2, duration: 0.3, ease: "backOut" }
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_Icon, {
                            name: "tabler:cancel",
                            class: "size-3 text-white"
                          })
                        ]),
                        _: 1
                      })) : createCommentVNode("", true),
                      createVNode(unref(_sfc_main$9), null, {
                        default: withCtx(() => [
                          showParticles.value && __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                            key: 0,
                            class: "absolute -top-2 -right-2 size-5 pointer-events-none",
                            initial: { opacity: 0 },
                            animate: { opacity: 1 },
                            exit: { opacity: 0 },
                            transition: { duration: 0.2 }
                          }, {
                            default: withCtx(() => [
                              (openBlock(), createBlock(Fragment, null, renderList(particleCount, (i) => {
                                return createVNode("div", {
                                  key: i,
                                  class: "absolute top-1/2 left-1/2 w-1.5 h-1.5 rounded-full particle-burst",
                                  style: generateParticleStyle(i - 1)
                                }, null, 4);
                              }), 64))
                            ]),
                            _: 1
                          })) : createCommentVNode("", true)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }, 8, ["transition"]),
                  createVNode("div", { class: "flex-1 min-w-0" }, [
                    createVNode("div", { class: "flex items-center gap-2 mb-1" }, [
                      createVNode("p", { class: "font-medium text-sm truncate text-neutral-900 dark:text-neutral-100" }, toDisplayString(__props.uploadingFile.fileName), 1),
                      createVNode(_component_UBadge, {
                        color: statusColor.value,
                        variant: "soft",
                        size: "sm"
                      }, {
                        default: withCtx(() => [
                          createTextVNode(toDisplayString(statusText.value), 1)
                        ]),
                        _: 1
                      }, 8, ["color"])
                    ]),
                    createVNode("div", { class: "flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400" }, [
                      createVNode("span", null, toDisplayString(formatBytes2(__props.uploadingFile.file.size)), 1),
                      __props.uploadingFile.uploadProgress?.speedText && __props.uploadingFile.status === "uploading" ? (openBlock(), createBlock("span", {
                        key: 0,
                        class: "hidden sm:inline"
                      }, " • " + toDisplayString(__props.uploadingFile.uploadProgress.speedText), 1)) : createCommentVNode("", true)
                    ])
                  ])
                ]),
                createVNode("div", { class: "flex items-center gap-2 ml-2" }, [
                  __props.uploadingFile.status === "uploading" && __props.uploadingFile.canAbort ? (openBlock(), createBlock(unref(motion).div, {
                    key: 0,
                    initial: { opacity: 0, scale: 0.8 },
                    animate: { opacity: 1, scale: 1 },
                    exit: { opacity: 0, scale: 0.8 }
                  }, {
                    default: withCtx(() => [
                      createVNode(_component_UButton, {
                        size: "xs",
                        color: "error",
                        variant: "ghost",
                        icon: "tabler:x",
                        onClick: ($event) => __props.uploadingFile.abortUpload?.()
                      }, {
                        default: withCtx(() => [
                          createTextVNode(" 中止 ")
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ]),
                    _: 1
                  })) : createCommentVNode("", true),
                  __props.uploadingFile.status === "completed" || __props.uploadingFile.status === "error" ? (openBlock(), createBlock(unref(motion).div, {
                    key: 1,
                    initial: { opacity: 0, scale: 0.8 },
                    animate: { opacity: 1, scale: 1 },
                    exit: { opacity: 0, scale: 0.8 }
                  }, {
                    default: withCtx(() => [
                      createVNode(_component_UButton, {
                        size: "xs",
                        color: "neutral",
                        variant: "soft",
                        icon: "tabler:x",
                        onClick: ($event) => emit("removeFile", __props.fileId)
                      }, {
                        default: withCtx(() => [
                          createTextVNode(" 清除 ")
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ]),
                    _: 1
                  })) : createCommentVNode("", true)
                ])
              ]),
              createVNode(unref(_sfc_main$9), null, {
                default: withCtx(() => [
                  __props.uploadingFile.status === "uploading" || __props.uploadingFile.status === "processing" ? (openBlock(), createBlock(unref(motion).div, {
                    key: 0,
                    initial: { opacity: 0, height: 0 },
                    animate: { opacity: 1, height: "auto" },
                    exit: { opacity: 0, height: 0 },
                    transition: { duration: 0.3 },
                    class: "space-y-2 mt-3"
                  }, {
                    default: withCtx(() => [
                      __props.uploadingFile.status === "uploading" ? (openBlock(), createBlock("div", {
                        key: 0,
                        class: "space-y-1"
                      }, [
                        createVNode("div", { class: "flex justify-between items-center" }, [
                          createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 上传进度 "),
                          createVNode("span", { class: "text-xs font-mono text-neutral-600 dark:text-neutral-400" }, toDisplayString(__props.uploadingFile.progress) + "% ", 1)
                        ]),
                        createVNode(unref(motion).div, {
                          class: "relative",
                          initial: { scaleX: 0 },
                          animate: { scaleX: 1 },
                          transition: { duration: 0.5 }
                        }, {
                          default: withCtx(() => [
                            createVNode(_component_UProgress, {
                              "model-value": __props.uploadingFile.progress,
                              color: statusColor.value
                            }, null, 8, ["model-value", "color"])
                          ]),
                          _: 1
                        }),
                        __props.uploadingFile.uploadProgress?.timeRemainingText ? (openBlock(), createBlock("div", {
                          key: 0,
                          class: "text-xs text-neutral-500 dark:text-neutral-400"
                        }, " 剩余时间: " + toDisplayString(__props.uploadingFile.uploadProgress.timeRemainingText), 1)) : createCommentVNode("", true)
                      ])) : createCommentVNode("", true),
                      __props.uploadingFile.status === "processing" ? (openBlock(), createBlock("div", {
                        key: 1,
                        class: "space-y-1"
                      }, [
                        createVNode("div", { class: "flex justify-between items-center" }, [
                          createVNode("span", { class: "text-xs text-neutral-600 dark:text-neutral-400" }, " 处理状态 "),
                          createVNode(unref(motion).span, {
                            class: "text-xs text-info-600 dark:text-info-400",
                            animate: { opacity: [0.8, 1, 0.8] },
                            transition: { duration: 2, repeat: Infinity }
                          }, {
                            default: withCtx(() => [
                              createTextVNode(toDisplayString(getStageText(__props.uploadingFile.stage || "pending")), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        createVNode(_component_UProgress, {
                          "model-value": null,
                          animation: "swing",
                          color: "info"
                        })
                      ])) : createCommentVNode("", true)
                    ]),
                    _: 1
                  })) : createCommentVNode("", true)
                ]),
                _: 1
              }),
              createVNode(unref(_sfc_main$9), null, {
                default: withCtx(() => [
                  __props.uploadingFile.status === "error" && __props.uploadingFile.error ? (openBlock(), createBlock(unref(motion).div, {
                    key: 0,
                    initial: { opacity: 0, height: 0, y: -10 },
                    animate: { opacity: 1, height: "auto", y: 0 },
                    exit: { opacity: 0, height: 0, y: -10 },
                    transition: { duration: 0.3 },
                    class: "mt-3"
                  }, {
                    default: withCtx(() => [
                      createVNode(_component_UAlert, {
                        description: __props.uploadingFile.error,
                        color: "error",
                        variant: "soft",
                        icon: "tabler:alert-circle",
                        ui: {
                          root: "px-2.5 py-2"
                        }
                      }, null, 8, ["description"])
                    ]),
                    _: 1
                  })) : createCommentVNode("", true)
                ]),
                _: 1
              }),
              createVNode(unref(_sfc_main$9), null, {
                default: withCtx(() => [
                  showProcessingWarning.value && __props.uploadingFile.status === "processing" ? (openBlock(), createBlock(unref(motion).div, {
                    key: 0,
                    initial: { opacity: 0, height: 0, y: -10 },
                    animate: { opacity: 1, height: "auto", y: 0 },
                    exit: { opacity: 0, height: 0, y: -10 },
                    transition: { duration: 0.3 },
                    class: "mt-3"
                  }, {
                    default: withCtx(() => [
                      createVNode(_component_UAlert, {
                        description: "大文件处理时间较长，为正常现象",
                        color: "info",
                        variant: "soft",
                        icon: "tabler:info-circle",
                        ui: {
                          root: "px-2.5 py-2"
                        }
                      })
                    ]),
                    _: 1
                  })) : createCommentVNode("", true)
                ]),
                _: 1
              }),
              createVNode(unref(_sfc_main$9), null, {
                default: withCtx(() => [
                  __props.uploadingFile.status === "completed" ? (openBlock(), createBlock(unref(motion).div, {
                    key: 0,
                    initial: { opacity: 0, scale: 0.8, y: 10 },
                    animate: {
                      opacity: 1,
                      scale: [0.8, 1.1, 1],
                      y: 0
                    },
                    exit: { opacity: 0, scale: 0.9, y: -10 },
                    transition: {
                      duration: 0.6,
                      ease: "backOut"
                    },
                    class: "mt-3"
                  }, {
                    default: withCtx(() => [
                      createVNode(_component_UAlert, {
                        description: "文件已成功上传并处理",
                        color: "success",
                        variant: "soft",
                        icon: "tabler:circle-check",
                        ui: {
                          root: "px-2.5 py-2"
                        }
                      })
                    ]),
                    _: 1
                  })) : createCommentVNode("", true)
                ]),
                _: 1
              })
            ];
          }
        }),
        _: 1
      }, _parent));
    };
  }
});
const _sfc_setup$8 = _sfc_main$8.setup;
_sfc_main$8.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/ui/UploadQueueItem.vue");
  return _sfc_setup$8 ? _sfc_setup$8(props, ctx) : void 0;
};
const __nuxt_component_2 = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$8, [["__scopeId", "data-v-967c796b"]]), { __name: "UploadQueueItem" });
const _sfc_main$7 = /* @__PURE__ */ defineComponent({
  __name: "UploadQueuePanel",
  __ssrInlineRender: true,
  props: {
    uploadingFiles: {},
    collapsed: { type: Boolean }
  },
  emits: ["removeFile", "clearCompleted", "clearAll", "toggle", "goToQueue"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const isCollapsed = ref(props.collapsed || false);
    const stats = computed(() => {
      const files = Array.from(props.uploadingFiles.values());
      return {
        total: files.length,
        waiting: files.filter((f) => f.status === "waiting").length,
        uploading: files.filter((f) => f.status === "uploading").length,
        processing: files.filter((f) => f.status === "processing").length,
        completed: files.filter((f) => f.status === "completed").length,
        error: files.filter((f) => f.status === "error").length,
        skipped: files.filter((f) => f.status === "skipped").length,
        blocked: files.filter((f) => f.status === "blocked").length,
        active: files.filter(
          (f) => f.status === "uploading" || f.status === "processing"
        ).length,
        pending: files.filter(
          (f) => f.status === "waiting" || f.status === "preparing"
        ).length
      };
    });
    const overallProgress = computed(() => {
      const files = Array.from(props.uploadingFiles.values());
      if (files.length === 0) return 0;
      let totalProgress = 0;
      files.forEach((file) => {
        if (file.status === "completed") {
          totalProgress += 100;
        } else if (file.status === "uploading" && file.progress !== void 0) {
          totalProgress += file.progress * 0.7;
        } else if (file.status === "processing") {
          totalProgress += 70;
        } else if (file.status === "preparing") {
          totalProgress += 0;
        } else if (file.status === "waiting") {
          totalProgress += 0;
        } else if (file.status === "skipped" || file.status === "blocked") {
          totalProgress += 0;
        }
      });
      return Math.round(totalProgress / files.length);
    });
    const statusColor = computed(() => {
      if (stats.value.error > 0 || stats.value.blocked > 0) return "error";
      if (stats.value.active > 0) return "primary";
      if (stats.value.skipped > 0 && stats.value.active === 0) return "warning";
      if (stats.value.completed > 0 && stats.value.active === 0) return "success";
      return "neutral";
    });
    const toggleCollapsed = () => {
      isCollapsed.value = !isCollapsed.value;
      emit("toggle");
    };
    const clearCompletedFiles = () => {
      emit("clearCompleted");
    };
    const clearAllFiles = () => {
      emit("clearAll");
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Icon = __nuxt_component_0;
      const _component_UProgress = _sfc_main$c;
      const _component_UploadQueueItem = __nuxt_component_2;
      const _component_UButton = _sfc_main$b;
      if (__props.uploadingFiles.size > 0) {
        _push(`<div${ssrRenderAttrs(mergeProps({ class: "fixed bottom-2 inset-x-2 sm:inset-x-6 sm:bottom-6 sm:left-auto z-50 min-w-sm sm:w-md" }, _attrs))} data-v-ba2f3ab9>`);
        _push(ssrRenderComponent(unref(motion).div, {
          class: "bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",
          initial: { opacity: 0, y: 100, scale: 0.9 },
          animate: { opacity: 1, y: 0, scale: 1 },
          exit: { opacity: 0, y: 100, scale: 0.9 },
          transition: { duration: 0.4, ease: "backOut" },
          layout: ""
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(ssrRenderComponent(unref(motion).div, {
                class: "p-4 border-b border-neutral-200 dark:border-neutral-700 cursor-pointer",
                "while-hover": { backgroundColor: "rgba(0,0,0,0.02)" },
                "while-tap": { scale: 0.98 },
                onClick: toggleCollapsed
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<div class="flex items-center justify-between" data-v-ba2f3ab9${_scopeId2}><div class="flex items-center gap-3" data-v-ba2f3ab9${_scopeId2}>`);
                    _push3(ssrRenderComponent(_component_Icon, {
                      name: {
                        primary: "tabler:upload",
                        success: "tabler:circle-check",
                        error: "tabler:alert-circle",
                        warning: "tabler:alert-triangle",
                        neutral: "tabler:info-circle"
                      }[unref(statusColor)],
                      class: ["size-5", {
                        "text-blue-600 dark:text-blue-400": unref(statusColor) === "primary",
                        "text-green-600 dark:text-green-400": unref(statusColor) === "success",
                        "text-red-600 dark:text-red-400": unref(statusColor) === "error",
                        "text-yellow-600 dark:text-yellow-400": unref(statusColor) === "warning",
                        "text-neutral-600 dark:text-neutral-400": unref(statusColor) === "neutral"
                      }]
                    }, null, _parent3, _scopeId2));
                    _push3(`<div data-v-ba2f3ab9${_scopeId2}><h3 class="font-semibold text-sm text-neutral-900 dark:text-neutral-100" data-v-ba2f3ab9${_scopeId2}> 文件上传队列 <span class="text-neutral-500 dark:text-neutral-400" data-v-ba2f3ab9${_scopeId2}> (${ssrInterpolate(unref(stats).total)}) </span></h3><div class="flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400 mt-1" data-v-ba2f3ab9${_scopeId2}>`);
                    if (unref(stats).waiting > 0) {
                      _push3(`<span class="text-neutral-600 dark:text-neutral-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).waiting)} 等待 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    if (unref(stats).active > 0) {
                      _push3(`<span class="text-blue-600 dark:text-blue-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).active)} 进行中 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    if (unref(stats).completed > 0) {
                      _push3(`<span class="text-green-600 dark:text-green-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).completed)} 完成 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    if (unref(stats).error > 0) {
                      _push3(`<span class="text-red-600 dark:text-red-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).error)} 失败 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    if (unref(stats).skipped > 0) {
                      _push3(`<span class="text-yellow-600 dark:text-yellow-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).skipped)} 跳过 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    if (unref(stats).blocked > 0) {
                      _push3(`<span class="text-red-600 dark:text-red-400" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(stats).blocked)} 被阻止 </span>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    _push3(`</div></div></div><div class="flex items-center gap-2" data-v-ba2f3ab9${_scopeId2}>`);
                    if (unref(stats).active > 0) {
                      _push3(`<div class="text-xs text-neutral-500 dark:text-neutral-400 font-mono" data-v-ba2f3ab9${_scopeId2}>${ssrInterpolate(unref(overallProgress))}% </div>`);
                    } else {
                      _push3(`<!---->`);
                    }
                    _push3(ssrRenderComponent(unref(motion).div, {
                      animate: { rotate: unref(isCollapsed) ? 0 : 180 },
                      transition: { duration: 0.3 }
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(ssrRenderComponent(_component_Icon, {
                            name: "tabler:chevron-down",
                            class: "size-5 text-neutral-500 dark:text-neutral-400 block"
                          }, null, _parent4, _scopeId3));
                        } else {
                          return [
                            createVNode(_component_Icon, {
                              name: "tabler:chevron-down",
                              class: "size-5 text-neutral-500 dark:text-neutral-400 block"
                            })
                          ];
                        }
                      }),
                      _: 1
                    }, _parent3, _scopeId2));
                    _push3(`</div></div>`);
                    if (unref(stats).active > 0) {
                      _push3(ssrRenderComponent(unref(motion).div, {
                        class: "mt-3",
                        initial: { opacity: 0, scaleX: 0 },
                        animate: { opacity: 1, scaleX: 1 },
                        exit: { opacity: 0, scaleX: 0 },
                        transition: { duration: 0.3 },
                        style: { "transform-origin": "left" }
                      }, {
                        default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                          if (_push4) {
                            _push4(ssrRenderComponent(_component_UProgress, {
                              "model-value": unref(overallProgress),
                              color: unref(statusColor)
                            }, null, _parent4, _scopeId3));
                          } else {
                            return [
                              createVNode(_component_UProgress, {
                                "model-value": unref(overallProgress),
                                color: unref(statusColor)
                              }, null, 8, ["model-value", "color"])
                            ];
                          }
                        }),
                        _: 1
                      }, _parent3, _scopeId2));
                    } else {
                      _push3(`<!---->`);
                    }
                  } else {
                    return [
                      createVNode("div", { class: "flex items-center justify-between" }, [
                        createVNode("div", { class: "flex items-center gap-3" }, [
                          createVNode(_component_Icon, {
                            name: {
                              primary: "tabler:upload",
                              success: "tabler:circle-check",
                              error: "tabler:alert-circle",
                              warning: "tabler:alert-triangle",
                              neutral: "tabler:info-circle"
                            }[unref(statusColor)],
                            class: ["size-5", {
                              "text-blue-600 dark:text-blue-400": unref(statusColor) === "primary",
                              "text-green-600 dark:text-green-400": unref(statusColor) === "success",
                              "text-red-600 dark:text-red-400": unref(statusColor) === "error",
                              "text-yellow-600 dark:text-yellow-400": unref(statusColor) === "warning",
                              "text-neutral-600 dark:text-neutral-400": unref(statusColor) === "neutral"
                            }]
                          }, null, 8, ["name", "class"]),
                          createVNode("div", null, [
                            createVNode("h3", { class: "font-semibold text-sm text-neutral-900 dark:text-neutral-100" }, [
                              createTextVNode(" 文件上传队列 "),
                              createVNode("span", { class: "text-neutral-500 dark:text-neutral-400" }, " (" + toDisplayString(unref(stats).total) + ") ", 1)
                            ]),
                            createVNode("div", { class: "flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400 mt-1" }, [
                              unref(stats).waiting > 0 ? (openBlock(), createBlock("span", {
                                key: 0,
                                class: "text-neutral-600 dark:text-neutral-400"
                              }, toDisplayString(unref(stats).waiting) + " 等待 ", 1)) : createCommentVNode("", true),
                              unref(stats).active > 0 ? (openBlock(), createBlock("span", {
                                key: 1,
                                class: "text-blue-600 dark:text-blue-400"
                              }, toDisplayString(unref(stats).active) + " 进行中 ", 1)) : createCommentVNode("", true),
                              unref(stats).completed > 0 ? (openBlock(), createBlock("span", {
                                key: 2,
                                class: "text-green-600 dark:text-green-400"
                              }, toDisplayString(unref(stats).completed) + " 完成 ", 1)) : createCommentVNode("", true),
                              unref(stats).error > 0 ? (openBlock(), createBlock("span", {
                                key: 3,
                                class: "text-red-600 dark:text-red-400"
                              }, toDisplayString(unref(stats).error) + " 失败 ", 1)) : createCommentVNode("", true),
                              unref(stats).skipped > 0 ? (openBlock(), createBlock("span", {
                                key: 4,
                                class: "text-yellow-600 dark:text-yellow-400"
                              }, toDisplayString(unref(stats).skipped) + " 跳过 ", 1)) : createCommentVNode("", true),
                              unref(stats).blocked > 0 ? (openBlock(), createBlock("span", {
                                key: 5,
                                class: "text-red-600 dark:text-red-400"
                              }, toDisplayString(unref(stats).blocked) + " 被阻止 ", 1)) : createCommentVNode("", true)
                            ])
                          ])
                        ]),
                        createVNode("div", { class: "flex items-center gap-2" }, [
                          unref(stats).active > 0 ? (openBlock(), createBlock("div", {
                            key: 0,
                            class: "text-xs text-neutral-500 dark:text-neutral-400 font-mono"
                          }, toDisplayString(unref(overallProgress)) + "% ", 1)) : createCommentVNode("", true),
                          createVNode(unref(motion).div, {
                            animate: { rotate: unref(isCollapsed) ? 0 : 180 },
                            transition: { duration: 0.3 }
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_Icon, {
                                name: "tabler:chevron-down",
                                class: "size-5 text-neutral-500 dark:text-neutral-400 block"
                              })
                            ]),
                            _: 1
                          }, 8, ["animate"])
                        ])
                      ]),
                      unref(stats).active > 0 ? (openBlock(), createBlock(unref(motion).div, {
                        key: 0,
                        class: "mt-3",
                        initial: { opacity: 0, scaleX: 0 },
                        animate: { opacity: 1, scaleX: 1 },
                        exit: { opacity: 0, scaleX: 0 },
                        transition: { duration: 0.3 },
                        style: { "transform-origin": "left" }
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_UProgress, {
                            "model-value": unref(overallProgress),
                            color: unref(statusColor)
                          }, null, 8, ["model-value", "color"])
                        ]),
                        _: 1
                      })) : createCommentVNode("", true)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
              _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    if (!unref(isCollapsed)) {
                      _push3(ssrRenderComponent(unref(motion).div, {
                        initial: { height: 0, opacity: 0 },
                        animate: { height: "auto", opacity: 1 },
                        exit: { height: 0, opacity: 0 },
                        transition: { duration: 0.3, ease: "easeInOut" },
                        class: "max-h-[calc(100vh-25.3rem)] sm:max-h-[600px] overflow-hidden overflow-y-auto filelist-container"
                      }, {
                        default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                          if (_push4) {
                            _push4(`<div class="p-2 space-y-2" data-v-ba2f3ab9${_scopeId3}>`);
                            _push4(ssrRenderComponent(unref(_sfc_main$9), { mode: "popLayout" }, {
                              default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                if (_push5) {
                                  _push5(`<!--[-->`);
                                  ssrRenderList(__props.uploadingFiles, ([fileId, uploadingFile]) => {
                                    _push5(ssrRenderComponent(_component_UploadQueueItem, {
                                      key: fileId,
                                      "uploading-file": uploadingFile,
                                      "file-id": fileId,
                                      onRemoveFile: ($event) => emit("removeFile", $event)
                                    }, null, _parent5, _scopeId4));
                                  });
                                  _push5(`<!--]-->`);
                                } else {
                                  return [
                                    (openBlock(true), createBlock(Fragment, null, renderList(__props.uploadingFiles, ([fileId, uploadingFile]) => {
                                      return openBlock(), createBlock(_component_UploadQueueItem, {
                                        key: fileId,
                                        "uploading-file": uploadingFile,
                                        "file-id": fileId,
                                        onRemoveFile: ($event) => emit("removeFile", $event)
                                      }, null, 8, ["uploading-file", "file-id", "onRemoveFile"]);
                                    }), 128))
                                  ];
                                }
                              }),
                              _: 1
                            }, _parent4, _scopeId3));
                            _push4(`</div>`);
                          } else {
                            return [
                              createVNode("div", { class: "p-2 space-y-2" }, [
                                createVNode(unref(_sfc_main$9), { mode: "popLayout" }, {
                                  default: withCtx(() => [
                                    (openBlock(true), createBlock(Fragment, null, renderList(__props.uploadingFiles, ([fileId, uploadingFile]) => {
                                      return openBlock(), createBlock(_component_UploadQueueItem, {
                                        key: fileId,
                                        "uploading-file": uploadingFile,
                                        "file-id": fileId,
                                        onRemoveFile: ($event) => emit("removeFile", $event)
                                      }, null, 8, ["uploading-file", "file-id", "onRemoveFile"]);
                                    }), 128))
                                  ]),
                                  _: 1
                                })
                              ])
                            ];
                          }
                        }),
                        _: 1
                      }, _parent3, _scopeId2));
                    } else {
                      _push3(`<!---->`);
                    }
                  } else {
                    return [
                      !unref(isCollapsed) ? (openBlock(), createBlock(unref(motion).div, {
                        key: 0,
                        initial: { height: 0, opacity: 0 },
                        animate: { height: "auto", opacity: 1 },
                        exit: { height: 0, opacity: 0 },
                        transition: { duration: 0.3, ease: "easeInOut" },
                        class: "max-h-[calc(100vh-25.3rem)] sm:max-h-[600px] overflow-hidden overflow-y-auto filelist-container"
                      }, {
                        default: withCtx(() => [
                          createVNode("div", { class: "p-2 space-y-2" }, [
                            createVNode(unref(_sfc_main$9), { mode: "popLayout" }, {
                              default: withCtx(() => [
                                (openBlock(true), createBlock(Fragment, null, renderList(__props.uploadingFiles, ([fileId, uploadingFile]) => {
                                  return openBlock(), createBlock(_component_UploadQueueItem, {
                                    key: fileId,
                                    "uploading-file": uploadingFile,
                                    "file-id": fileId,
                                    onRemoveFile: ($event) => emit("removeFile", $event)
                                  }, null, 8, ["uploading-file", "file-id", "onRemoveFile"]);
                                }), 128))
                              ]),
                              _: 1
                            })
                          ])
                        ]),
                        _: 1
                      })) : createCommentVNode("", true)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
              _push2(ssrRenderComponent(unref(_sfc_main$9), null, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    if (!unref(isCollapsed) && (unref(stats).completed > 0 || unref(stats).error > 0)) {
                      _push3(ssrRenderComponent(unref(motion).div, {
                        initial: { opacity: 0, scaleY: 0 },
                        animate: { opacity: 1, scaleY: 1 },
                        exit: { opacity: 0, scaleY: 0 },
                        transition: { duration: 0.3 },
                        style: { "transform-origin": "bottom" },
                        class: "p-3 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50"
                      }, {
                        default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                          if (_push4) {
                            _push4(`<div class="flex items-center justify-between gap-2" data-v-ba2f3ab9${_scopeId3}><div class="text-xs text-neutral-500 dark:text-neutral-400" data-v-ba2f3ab9${_scopeId3}>${ssrInterpolate(unref(stats).completed)} 完成, ${ssrInterpolate(unref(stats).error)} 失败 </div><div class="flex items-center gap-0.5" data-v-ba2f3ab9${_scopeId3}>`);
                            if (unref(stats).completed > 0) {
                              _push4(ssrRenderComponent(_component_UButton, {
                                size: "xs",
                                variant: "ghost",
                                color: "neutral",
                                onClick: clearCompletedFiles
                              }, {
                                default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                  if (_push5) {
                                    _push5(` 清除已完成 `);
                                  } else {
                                    return [
                                      createTextVNode(" 清除已完成 ")
                                    ];
                                  }
                                }),
                                _: 1
                              }, _parent4, _scopeId3));
                            } else {
                              _push4(`<!---->`);
                            }
                            _push4(ssrRenderComponent(_component_UButton, {
                              size: "xs",
                              variant: "ghost",
                              color: "error",
                              icon: "tabler:trash",
                              onClick: clearAllFiles
                            }, {
                              default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                if (_push5) {
                                  _push5(` 清除全部 `);
                                } else {
                                  return [
                                    createTextVNode(" 清除全部 ")
                                  ];
                                }
                              }),
                              _: 1
                            }, _parent4, _scopeId3));
                            _push4(ssrRenderComponent(_component_UButton, {
                              size: "xs",
                              variant: "ghost",
                              color: "info",
                              icon: "tabler:list-check",
                              onClick: ($event) => emit("goToQueue")
                            }, {
                              default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                if (_push5) {
                                  _push5(` 队列管理 `);
                                } else {
                                  return [
                                    createTextVNode(" 队列管理 ")
                                  ];
                                }
                              }),
                              _: 1
                            }, _parent4, _scopeId3));
                            _push4(`</div></div>`);
                          } else {
                            return [
                              createVNode("div", { class: "flex items-center justify-between gap-2" }, [
                                createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref(stats).completed) + " 完成, " + toDisplayString(unref(stats).error) + " 失败 ", 1),
                                createVNode("div", { class: "flex items-center gap-0.5" }, [
                                  unref(stats).completed > 0 ? (openBlock(), createBlock(_component_UButton, {
                                    key: 0,
                                    size: "xs",
                                    variant: "ghost",
                                    color: "neutral",
                                    onClick: clearCompletedFiles
                                  }, {
                                    default: withCtx(() => [
                                      createTextVNode(" 清除已完成 ")
                                    ]),
                                    _: 1
                                  })) : createCommentVNode("", true),
                                  createVNode(_component_UButton, {
                                    size: "xs",
                                    variant: "ghost",
                                    color: "error",
                                    icon: "tabler:trash",
                                    onClick: clearAllFiles
                                  }, {
                                    default: withCtx(() => [
                                      createTextVNode(" 清除全部 ")
                                    ]),
                                    _: 1
                                  }),
                                  createVNode(_component_UButton, {
                                    size: "xs",
                                    variant: "ghost",
                                    color: "info",
                                    icon: "tabler:list-check",
                                    onClick: ($event) => emit("goToQueue")
                                  }, {
                                    default: withCtx(() => [
                                      createTextVNode(" 队列管理 ")
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"])
                                ])
                              ])
                            ];
                          }
                        }),
                        _: 1
                      }, _parent3, _scopeId2));
                    } else {
                      _push3(`<!---->`);
                    }
                  } else {
                    return [
                      !unref(isCollapsed) && (unref(stats).completed > 0 || unref(stats).error > 0) ? (openBlock(), createBlock(unref(motion).div, {
                        key: 0,
                        initial: { opacity: 0, scaleY: 0 },
                        animate: { opacity: 1, scaleY: 1 },
                        exit: { opacity: 0, scaleY: 0 },
                        transition: { duration: 0.3 },
                        style: { "transform-origin": "bottom" },
                        class: "p-3 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50"
                      }, {
                        default: withCtx(() => [
                          createVNode("div", { class: "flex items-center justify-between gap-2" }, [
                            createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref(stats).completed) + " 完成, " + toDisplayString(unref(stats).error) + " 失败 ", 1),
                            createVNode("div", { class: "flex items-center gap-0.5" }, [
                              unref(stats).completed > 0 ? (openBlock(), createBlock(_component_UButton, {
                                key: 0,
                                size: "xs",
                                variant: "ghost",
                                color: "neutral",
                                onClick: clearCompletedFiles
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(" 清除已完成 ")
                                ]),
                                _: 1
                              })) : createCommentVNode("", true),
                              createVNode(_component_UButton, {
                                size: "xs",
                                variant: "ghost",
                                color: "error",
                                icon: "tabler:trash",
                                onClick: clearAllFiles
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(" 清除全部 ")
                                ]),
                                _: 1
                              }),
                              createVNode(_component_UButton, {
                                size: "xs",
                                variant: "ghost",
                                color: "info",
                                icon: "tabler:list-check",
                                onClick: ($event) => emit("goToQueue")
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(" 队列管理 ")
                                ]),
                                _: 1
                              }, 8, ["onClick"])
                            ])
                          ])
                        ]),
                        _: 1
                      })) : createCommentVNode("", true)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              return [
                createVNode(unref(motion).div, {
                  class: "p-4 border-b border-neutral-200 dark:border-neutral-700 cursor-pointer",
                  "while-hover": { backgroundColor: "rgba(0,0,0,0.02)" },
                  "while-tap": { scale: 0.98 },
                  onClick: toggleCollapsed
                }, {
                  default: withCtx(() => [
                    createVNode("div", { class: "flex items-center justify-between" }, [
                      createVNode("div", { class: "flex items-center gap-3" }, [
                        createVNode(_component_Icon, {
                          name: {
                            primary: "tabler:upload",
                            success: "tabler:circle-check",
                            error: "tabler:alert-circle",
                            warning: "tabler:alert-triangle",
                            neutral: "tabler:info-circle"
                          }[unref(statusColor)],
                          class: ["size-5", {
                            "text-blue-600 dark:text-blue-400": unref(statusColor) === "primary",
                            "text-green-600 dark:text-green-400": unref(statusColor) === "success",
                            "text-red-600 dark:text-red-400": unref(statusColor) === "error",
                            "text-yellow-600 dark:text-yellow-400": unref(statusColor) === "warning",
                            "text-neutral-600 dark:text-neutral-400": unref(statusColor) === "neutral"
                          }]
                        }, null, 8, ["name", "class"]),
                        createVNode("div", null, [
                          createVNode("h3", { class: "font-semibold text-sm text-neutral-900 dark:text-neutral-100" }, [
                            createTextVNode(" 文件上传队列 "),
                            createVNode("span", { class: "text-neutral-500 dark:text-neutral-400" }, " (" + toDisplayString(unref(stats).total) + ") ", 1)
                          ]),
                          createVNode("div", { class: "flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400 mt-1" }, [
                            unref(stats).waiting > 0 ? (openBlock(), createBlock("span", {
                              key: 0,
                              class: "text-neutral-600 dark:text-neutral-400"
                            }, toDisplayString(unref(stats).waiting) + " 等待 ", 1)) : createCommentVNode("", true),
                            unref(stats).active > 0 ? (openBlock(), createBlock("span", {
                              key: 1,
                              class: "text-blue-600 dark:text-blue-400"
                            }, toDisplayString(unref(stats).active) + " 进行中 ", 1)) : createCommentVNode("", true),
                            unref(stats).completed > 0 ? (openBlock(), createBlock("span", {
                              key: 2,
                              class: "text-green-600 dark:text-green-400"
                            }, toDisplayString(unref(stats).completed) + " 完成 ", 1)) : createCommentVNode("", true),
                            unref(stats).error > 0 ? (openBlock(), createBlock("span", {
                              key: 3,
                              class: "text-red-600 dark:text-red-400"
                            }, toDisplayString(unref(stats).error) + " 失败 ", 1)) : createCommentVNode("", true),
                            unref(stats).skipped > 0 ? (openBlock(), createBlock("span", {
                              key: 4,
                              class: "text-yellow-600 dark:text-yellow-400"
                            }, toDisplayString(unref(stats).skipped) + " 跳过 ", 1)) : createCommentVNode("", true),
                            unref(stats).blocked > 0 ? (openBlock(), createBlock("span", {
                              key: 5,
                              class: "text-red-600 dark:text-red-400"
                            }, toDisplayString(unref(stats).blocked) + " 被阻止 ", 1)) : createCommentVNode("", true)
                          ])
                        ])
                      ]),
                      createVNode("div", { class: "flex items-center gap-2" }, [
                        unref(stats).active > 0 ? (openBlock(), createBlock("div", {
                          key: 0,
                          class: "text-xs text-neutral-500 dark:text-neutral-400 font-mono"
                        }, toDisplayString(unref(overallProgress)) + "% ", 1)) : createCommentVNode("", true),
                        createVNode(unref(motion).div, {
                          animate: { rotate: unref(isCollapsed) ? 0 : 180 },
                          transition: { duration: 0.3 }
                        }, {
                          default: withCtx(() => [
                            createVNode(_component_Icon, {
                              name: "tabler:chevron-down",
                              class: "size-5 text-neutral-500 dark:text-neutral-400 block"
                            })
                          ]),
                          _: 1
                        }, 8, ["animate"])
                      ])
                    ]),
                    unref(stats).active > 0 ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      class: "mt-3",
                      initial: { opacity: 0, scaleX: 0 },
                      animate: { opacity: 1, scaleX: 1 },
                      exit: { opacity: 0, scaleX: 0 },
                      transition: { duration: 0.3 },
                      style: { "transform-origin": "left" }
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UProgress, {
                          "model-value": unref(overallProgress),
                          color: unref(statusColor)
                        }, null, 8, ["model-value", "color"])
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ]),
                  _: 1
                }),
                createVNode(unref(_sfc_main$9), null, {
                  default: withCtx(() => [
                    !unref(isCollapsed) ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { height: 0, opacity: 0 },
                      animate: { height: "auto", opacity: 1 },
                      exit: { height: 0, opacity: 0 },
                      transition: { duration: 0.3, ease: "easeInOut" },
                      class: "max-h-[calc(100vh-25.3rem)] sm:max-h-[600px] overflow-hidden overflow-y-auto filelist-container"
                    }, {
                      default: withCtx(() => [
                        createVNode("div", { class: "p-2 space-y-2" }, [
                          createVNode(unref(_sfc_main$9), { mode: "popLayout" }, {
                            default: withCtx(() => [
                              (openBlock(true), createBlock(Fragment, null, renderList(__props.uploadingFiles, ([fileId, uploadingFile]) => {
                                return openBlock(), createBlock(_component_UploadQueueItem, {
                                  key: fileId,
                                  "uploading-file": uploadingFile,
                                  "file-id": fileId,
                                  onRemoveFile: ($event) => emit("removeFile", $event)
                                }, null, 8, ["uploading-file", "file-id", "onRemoveFile"]);
                              }), 128))
                            ]),
                            _: 1
                          })
                        ])
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ]),
                  _: 1
                }),
                createVNode(unref(_sfc_main$9), null, {
                  default: withCtx(() => [
                    !unref(isCollapsed) && (unref(stats).completed > 0 || unref(stats).error > 0) ? (openBlock(), createBlock(unref(motion).div, {
                      key: 0,
                      initial: { opacity: 0, scaleY: 0 },
                      animate: { opacity: 1, scaleY: 1 },
                      exit: { opacity: 0, scaleY: 0 },
                      transition: { duration: 0.3 },
                      style: { "transform-origin": "bottom" },
                      class: "p-3 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50"
                    }, {
                      default: withCtx(() => [
                        createVNode("div", { class: "flex items-center justify-between gap-2" }, [
                          createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref(stats).completed) + " 完成, " + toDisplayString(unref(stats).error) + " 失败 ", 1),
                          createVNode("div", { class: "flex items-center gap-0.5" }, [
                            unref(stats).completed > 0 ? (openBlock(), createBlock(_component_UButton, {
                              key: 0,
                              size: "xs",
                              variant: "ghost",
                              color: "neutral",
                              onClick: clearCompletedFiles
                            }, {
                              default: withCtx(() => [
                                createTextVNode(" 清除已完成 ")
                              ]),
                              _: 1
                            })) : createCommentVNode("", true),
                            createVNode(_component_UButton, {
                              size: "xs",
                              variant: "ghost",
                              color: "error",
                              icon: "tabler:trash",
                              onClick: clearAllFiles
                            }, {
                              default: withCtx(() => [
                                createTextVNode(" 清除全部 ")
                              ]),
                              _: 1
                            }),
                            createVNode(_component_UButton, {
                              size: "xs",
                              variant: "ghost",
                              color: "info",
                              icon: "tabler:list-check",
                              onClick: ($event) => emit("goToQueue")
                            }, {
                              default: withCtx(() => [
                                createTextVNode(" 队列管理 ")
                              ]),
                              _: 1
                            }, 8, ["onClick"])
                          ])
                        ])
                      ]),
                      _: 1
                    })) : createCommentVNode("", true)
                  ]),
                  _: 1
                })
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div>`);
      } else {
        _push(`<!---->`);
      }
    };
  }
});
const _sfc_setup$7 = _sfc_main$7.setup;
_sfc_main$7.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/ui/UploadQueuePanel.vue");
  return _sfc_setup$7 ? _sfc_setup$7(props, ctx) : void 0;
};
const __nuxt_component_7 = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$7, [["__scopeId", "data-v-ba2f3ab9"]]), { __name: "UploadQueuePanel" });
function parseAcceptToDataTypes(accept) {
  if (!accept || accept === "*") {
    return void 0;
  }
  const types = accept.split(",").map((type) => {
    const trimmedType = type.trim();
    if (trimmedType.includes("/") && trimmedType.endsWith("/*")) {
      return trimmedType.split("/")[0] || trimmedType;
    }
    return trimmedType;
  }).filter((type) => {
    return !type.startsWith(".");
  });
  return types.length > 0 ? types : void 0;
}
function useFileUpload(options) {
  const {
    accept = "*"
  } = options;
  const inputRef = ref();
  const dropzoneRef = ref();
  computed(() => parseAcceptToDataTypes(unref(accept)));
  const isDragging = ref(false);
  const fileDialog = reactive({
    open: () => {
    }
  });
  function open() {
    fileDialog.open();
  }
  return {
    isDragging,
    open,
    inputRef,
    dropzoneRef
  };
}
const theme$2 = {
  "slots": {
    "root": "relative flex flex-col",
    "base": [
      "w-full flex-1 bg-default border border-default flex flex-col gap-2 items-stretch justify-center rounded-lg focus-visible:outline-2",
      "transition-[background]"
    ],
    "wrapper": "flex flex-col items-center justify-center text-center",
    "icon": "shrink-0",
    "avatar": "shrink-0",
    "label": "font-medium text-default mt-2",
    "description": "text-muted mt-1",
    "actions": "flex flex-wrap gap-1.5 shrink-0 mt-4",
    "files": "",
    "file": "relative",
    "fileLeadingAvatar": "shrink-0",
    "fileWrapper": "flex flex-col min-w-0",
    "fileName": "text-default truncate",
    "fileSize": "text-muted truncate",
    "fileTrailingButton": ""
  },
  "variants": {
    "color": {
      "primary": "",
      "secondary": "",
      "success": "",
      "info": "",
      "warning": "",
      "error": "",
      "neutral": ""
    },
    "variant": {
      "area": {
        "wrapper": "px-4 py-3",
        "base": "p-4"
      },
      "button": {}
    },
    "size": {
      "xs": {
        "base": "text-xs",
        "icon": "size-4",
        "file": "text-xs px-2 py-1 gap-1",
        "fileWrapper": "flex-row gap-1"
      },
      "sm": {
        "base": "text-xs",
        "icon": "size-4",
        "file": "text-xs px-2.5 py-1.5 gap-1.5",
        "fileWrapper": "flex-row gap-1"
      },
      "md": {
        "base": "text-sm",
        "icon": "size-5",
        "file": "text-xs px-2.5 py-1.5 gap-1.5"
      },
      "lg": {
        "base": "text-sm",
        "icon": "size-5",
        "file": "text-sm px-3 py-2 gap-2",
        "fileSize": "text-xs"
      },
      "xl": {
        "base": "text-base",
        "icon": "size-6",
        "file": "text-sm px-3 py-2 gap-2"
      }
    },
    "layout": {
      "list": {
        "root": "gap-2 items-start",
        "files": "flex flex-col w-full gap-2",
        "file": "min-w-0 flex items-center border border-default rounded-md w-full",
        "fileTrailingButton": "ms-auto"
      },
      "grid": {
        "fileWrapper": "hidden",
        "fileLeadingAvatar": "size-full rounded-lg",
        "fileTrailingButton": "absolute -top-1.5 -end-1.5 p-0 rounded-full border-2 border-bg"
      }
    },
    "position": {
      "inside": "",
      "outside": ""
    },
    "dropzone": {
      "true": "border-dashed data-[dragging=true]:bg-elevated/25"
    },
    "interactive": {
      "true": ""
    },
    "highlight": {
      "true": ""
    },
    "multiple": {
      "true": ""
    },
    "disabled": {
      "true": "cursor-not-allowed opacity-75"
    }
  },
  "compoundVariants": [
    {
      "color": "primary",
      "class": "focus-visible:outline-primary"
    },
    {
      "color": "secondary",
      "class": "focus-visible:outline-secondary"
    },
    {
      "color": "success",
      "class": "focus-visible:outline-success"
    },
    {
      "color": "info",
      "class": "focus-visible:outline-info"
    },
    {
      "color": "warning",
      "class": "focus-visible:outline-warning"
    },
    {
      "color": "error",
      "class": "focus-visible:outline-error"
    },
    {
      "color": "primary",
      "highlight": true,
      "class": "border-primary"
    },
    {
      "color": "secondary",
      "highlight": true,
      "class": "border-secondary"
    },
    {
      "color": "success",
      "highlight": true,
      "class": "border-success"
    },
    {
      "color": "info",
      "highlight": true,
      "class": "border-info"
    },
    {
      "color": "warning",
      "highlight": true,
      "class": "border-warning"
    },
    {
      "color": "error",
      "highlight": true,
      "class": "border-error"
    },
    {
      "color": "neutral",
      "class": "focus-visible:outline-inverted"
    },
    {
      "color": "neutral",
      "highlight": true,
      "class": "border-inverted"
    },
    {
      "size": "xs",
      "layout": "list",
      "class": {
        "fileTrailingButton": "-me-1"
      }
    },
    {
      "size": "sm",
      "layout": "list",
      "class": {
        "fileTrailingButton": "-me-1.5"
      }
    },
    {
      "size": "md",
      "layout": "list",
      "class": {
        "fileTrailingButton": "-me-1.5"
      }
    },
    {
      "size": "lg",
      "layout": "list",
      "class": {
        "fileTrailingButton": "-me-2"
      }
    },
    {
      "size": "xl",
      "layout": "list",
      "class": {
        "fileTrailingButton": "-me-2"
      }
    },
    {
      "variant": "button",
      "size": "xs",
      "class": {
        "base": "p-1"
      }
    },
    {
      "variant": "button",
      "size": "sm",
      "class": {
        "base": "p-1.5"
      }
    },
    {
      "variant": "button",
      "size": "md",
      "class": {
        "base": "p-1.5"
      }
    },
    {
      "variant": "button",
      "size": "lg",
      "class": {
        "base": "p-2"
      }
    },
    {
      "variant": "button",
      "size": "xl",
      "class": {
        "base": "p-2"
      }
    },
    {
      "layout": "grid",
      "multiple": true,
      "class": {
        "files": "grid grid-cols-2 md:grid-cols-3 gap-4 w-full",
        "file": "p-0 aspect-square"
      }
    },
    {
      "layout": "grid",
      "multiple": false,
      "class": {
        "file": "absolute inset-0 p-0"
      }
    },
    {
      "interactive": true,
      "disabled": false,
      "class": "hover:bg-elevated/25"
    }
  ],
  "defaultVariants": {
    "color": "primary",
    "variant": "area",
    "size": "md"
  }
};
const _sfc_main$6 = /* @__PURE__ */ Object.assign({ inheritAttrs: false }, {
  __name: "UFileUpload",
  __ssrInlineRender: true,
  props: /* @__PURE__ */ mergeModels({
    as: { type: null, required: false },
    id: { type: String, required: false },
    name: { type: String, required: false },
    icon: { type: null, required: false },
    label: { type: String, required: false },
    description: { type: String, required: false },
    color: { type: null, required: false },
    variant: { type: null, required: false },
    size: { type: null, required: false },
    layout: { type: null, required: false, default: "grid" },
    position: { type: null, required: false, default: "outside" },
    highlight: { type: Boolean, required: false },
    accept: { type: String, required: false, default: "*" },
    multiple: { type: Boolean, required: false, default: false },
    reset: { type: Boolean, required: false, default: false },
    dropzone: { type: Boolean, required: false, default: true },
    interactive: { type: Boolean, required: false, default: true },
    required: { type: Boolean, required: false },
    disabled: { type: Boolean, required: false },
    fileIcon: { type: null, required: false },
    fileDelete: { type: [Boolean, Object], required: false, default: true },
    fileDeleteIcon: { type: null, required: false },
    preview: { type: Boolean, required: false, default: true },
    class: { type: null, required: false },
    ui: { type: null, required: false }
  }, {
    "modelValue": { type: null },
    "modelModifiers": {}
  }),
  emits: /* @__PURE__ */ mergeModels(["change"], ["update:modelValue"]),
  setup(__props, { expose: __expose, emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const slots = useSlots();
    const modelValue = useModel(__props, "modelValue");
    const appConfig = useAppConfig();
    const { t } = useLocale();
    const [DefineFilesTemplate, ReuseFilesTemplate] = createReusableTemplate();
    const { isDragging, open, inputRef, dropzoneRef } = useFileUpload({
      accept: props.accept,
      reset: props.reset,
      multiple: props.multiple,
      dropzone: props.dropzone
    });
    const { emitFormInput, emitFormChange, id, name, disabled, ariaAttrs } = useFormField(props);
    const variant = computed(() => props.multiple ? "area" : props.variant);
    const layout = computed(() => props.variant === "button" && !props.multiple ? "grid" : props.layout);
    const position = computed(() => {
      if (layout.value === "grid" && props.multiple) {
        return "inside";
      }
      if (variant.value === "button") {
        return "outside";
      }
      return props.position;
    });
    const ui = computed(() => tv({ extend: tv(theme$2), ...appConfig.ui?.fileUpload || {} })({
      dropzone: props.dropzone,
      interactive: props.interactive,
      color: props.color,
      size: props.size,
      variant: variant.value,
      layout: layout.value,
      position: position.value,
      multiple: props.multiple,
      highlight: props.highlight,
      disabled: props.disabled
    }));
    function createObjectUrl(file) {
      return URL.createObjectURL(file);
    }
    function formatFileSize(bytes) {
      if (bytes === 0) {
        return "0B";
      }
      const k = 1024;
      const sizes = ["B", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      const size = bytes / Math.pow(k, i);
      const formattedSize = i === 0 ? size.toString() : size.toFixed(0);
      return `${formattedSize}${sizes[i]}`;
    }
    function onUpdate(files, reset = false) {
      if (props.multiple) {
        if (reset) {
          modelValue.value = files;
        } else {
          const existingFiles = modelValue.value || [];
          modelValue.value = [...existingFiles, ...files || []];
        }
      } else {
        modelValue.value = files?.[0];
      }
      const event = new Event("change", { target: { value: modelValue.value } });
      emits("change", event);
      emitFormChange();
      emitFormInput();
    }
    function removeFile(index) {
      if (!modelValue.value) {
        return;
      }
      if (!props.multiple || index === void 0) {
        onUpdate([], true);
        dropzoneRef.value?.focus();
        return;
      }
      const files = [...modelValue.value];
      files.splice(index, 1);
      onUpdate(files, true);
      dropzoneRef.value?.focus();
    }
    watch(modelValue, (newValue) => {
      const hasModelReset = props.multiple ? !newValue?.length : !newValue;
      if (hasModelReset && inputRef.value?.$el) {
        inputRef.value.$el.value = "";
      }
    });
    __expose({
      inputRef: toRef(() => inputRef.value?.$el),
      dropzoneRef
    });
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<!--[-->`);
      _push(ssrRenderComponent(unref(DefineFilesTemplate), null, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            if (props.preview && modelValue.value && (Array.isArray(modelValue.value) ? modelValue.value.length : true)) {
              _push2(`<!--[-->`);
              ssrRenderSlot(_ctx.$slots, "files-top", {
                files: modelValue.value,
                open: unref(open),
                removeFile
              }, null, _push2, _parent2, _scopeId);
              _push2(`<div data-slot="files" class="${ssrRenderClass(ui.value.files({ class: props.ui?.files }))}"${_scopeId}>`);
              ssrRenderSlot(_ctx.$slots, "files", { files: modelValue.value }, () => {
                _push2(`<!--[-->`);
                ssrRenderList(Array.isArray(modelValue.value) ? modelValue.value : [modelValue.value], (file, index) => {
                  _push2(`<div data-slot="file" class="${ssrRenderClass(ui.value.file({ class: props.ui?.file }))}"${_scopeId}>`);
                  ssrRenderSlot(_ctx.$slots, "file", {
                    file,
                    index
                  }, () => {
                    ssrRenderSlot(_ctx.$slots, "file-leading", {
                      file,
                      index,
                      ui: ui.value
                    }, () => {
                      _push2(ssrRenderComponent(_sfc_main$e, {
                        as: { img: "img" },
                        src: createObjectUrl(file),
                        icon: __props.fileIcon || unref(appConfig).ui.icons.file,
                        size: props.size,
                        "data-slot": "fileLeadingAvatar",
                        class: ui.value.fileLeadingAvatar({ class: props.ui?.fileLeadingAvatar })
                      }, null, _parent2, _scopeId));
                    }, _push2, _parent2, _scopeId);
                    _push2(`<div data-slot="fileWrapper" class="${ssrRenderClass(ui.value.fileWrapper({ class: props.ui?.fileWrapper }))}"${_scopeId}><span data-slot="fileName" class="${ssrRenderClass(ui.value.fileName({ class: props.ui?.fileName }))}"${_scopeId}>`);
                    ssrRenderSlot(_ctx.$slots, "file-name", {
                      file,
                      index
                    }, () => {
                      _push2(`${ssrInterpolate(file.name)}`);
                    }, _push2, _parent2, _scopeId);
                    _push2(`</span><span data-slot="fileSize" class="${ssrRenderClass(ui.value.fileSize({ class: props.ui?.fileSize }))}"${_scopeId}>`);
                    ssrRenderSlot(_ctx.$slots, "file-size", {
                      file,
                      index
                    }, () => {
                      _push2(`${ssrInterpolate(formatFileSize(file.size))}`);
                    }, _push2, _parent2, _scopeId);
                    _push2(`</span></div>`);
                    ssrRenderSlot(_ctx.$slots, "file-trailing", {
                      file,
                      index,
                      ui: ui.value
                    }, () => {
                      if (__props.fileDelete) {
                        _push2(ssrRenderComponent(_sfc_main$b, mergeProps({ color: "neutral" }, { ref_for: true }, {
                          ...layout.value === "grid" ? {
                            variant: "solid",
                            size: "xs"
                          } : {
                            variant: "link",
                            size: __props.size
                          },
                          ...typeof __props.fileDelete === "object" ? __props.fileDelete : void 0
                        }, {
                          "aria-label": unref(t)("fileUpload.removeFile", { filename: file.name }),
                          "trailing-icon": __props.fileDeleteIcon || unref(appConfig).ui.icons.close,
                          "data-slot": "fileTrailingButton",
                          class: ui.value.fileTrailingButton({ class: props.ui?.fileTrailingButton }),
                          onClick: ($event) => removeFile(index)
                        }), null, _parent2, _scopeId));
                      } else {
                        _push2(`<!---->`);
                      }
                    }, _push2, _parent2, _scopeId);
                  }, _push2, _parent2, _scopeId);
                  _push2(`</div>`);
                });
                _push2(`<!--]-->`);
              }, _push2, _parent2, _scopeId);
              _push2(`</div>`);
              ssrRenderSlot(_ctx.$slots, "files-bottom", {
                files: modelValue.value,
                open: unref(open),
                removeFile
              }, null, _push2, _parent2, _scopeId);
              _push2(`<!--]-->`);
            } else {
              _push2(`<!---->`);
            }
          } else {
            return [
              props.preview && modelValue.value && (Array.isArray(modelValue.value) ? modelValue.value.length : true) ? (openBlock(), createBlock(Fragment, { key: 0 }, [
                renderSlot(_ctx.$slots, "files-top", {
                  files: modelValue.value,
                  open: unref(open),
                  removeFile
                }),
                createVNode("div", {
                  "data-slot": "files",
                  class: ui.value.files({ class: props.ui?.files })
                }, [
                  renderSlot(_ctx.$slots, "files", { files: modelValue.value }, () => [
                    (openBlock(true), createBlock(Fragment, null, renderList(Array.isArray(modelValue.value) ? modelValue.value : [modelValue.value], (file, index) => {
                      return openBlock(), createBlock("div", {
                        key: file.name,
                        "data-slot": "file",
                        class: ui.value.file({ class: props.ui?.file })
                      }, [
                        renderSlot(_ctx.$slots, "file", {
                          file,
                          index
                        }, () => [
                          renderSlot(_ctx.$slots, "file-leading", {
                            file,
                            index,
                            ui: ui.value
                          }, () => [
                            createVNode(_sfc_main$e, {
                              as: { img: "img" },
                              src: createObjectUrl(file),
                              icon: __props.fileIcon || unref(appConfig).ui.icons.file,
                              size: props.size,
                              "data-slot": "fileLeadingAvatar",
                              class: ui.value.fileLeadingAvatar({ class: props.ui?.fileLeadingAvatar })
                            }, null, 8, ["src", "icon", "size", "class"])
                          ]),
                          createVNode("div", {
                            "data-slot": "fileWrapper",
                            class: ui.value.fileWrapper({ class: props.ui?.fileWrapper })
                          }, [
                            createVNode("span", {
                              "data-slot": "fileName",
                              class: ui.value.fileName({ class: props.ui?.fileName })
                            }, [
                              renderSlot(_ctx.$slots, "file-name", {
                                file,
                                index
                              }, () => [
                                createTextVNode(toDisplayString(file.name), 1)
                              ])
                            ], 2),
                            createVNode("span", {
                              "data-slot": "fileSize",
                              class: ui.value.fileSize({ class: props.ui?.fileSize })
                            }, [
                              renderSlot(_ctx.$slots, "file-size", {
                                file,
                                index
                              }, () => [
                                createTextVNode(toDisplayString(formatFileSize(file.size)), 1)
                              ])
                            ], 2)
                          ], 2),
                          renderSlot(_ctx.$slots, "file-trailing", {
                            file,
                            index,
                            ui: ui.value
                          }, () => [
                            __props.fileDelete ? (openBlock(), createBlock(_sfc_main$b, mergeProps({
                              key: 0,
                              color: "neutral"
                            }, { ref_for: true }, {
                              ...layout.value === "grid" ? {
                                variant: "solid",
                                size: "xs"
                              } : {
                                variant: "link",
                                size: __props.size
                              },
                              ...typeof __props.fileDelete === "object" ? __props.fileDelete : void 0
                            }, {
                              "aria-label": unref(t)("fileUpload.removeFile", { filename: file.name }),
                              "trailing-icon": __props.fileDeleteIcon || unref(appConfig).ui.icons.close,
                              "data-slot": "fileTrailingButton",
                              class: ui.value.fileTrailingButton({ class: props.ui?.fileTrailingButton }),
                              onClick: withModifiers(($event) => removeFile(index), ["stop", "prevent"])
                            }), null, 16, ["aria-label", "trailing-icon", "class", "onClick"])) : createCommentVNode("", true)
                          ])
                        ])
                      ], 2);
                    }), 128))
                  ])
                ], 2),
                renderSlot(_ctx.$slots, "files-bottom", {
                  files: modelValue.value,
                  open: unref(open),
                  removeFile
                })
              ], 64)) : createCommentVNode("", true)
            ];
          }
        }),
        _: 3
      }, _parent));
      _push(ssrRenderComponent(unref(Primitive), {
        as: __props.as,
        "data-slot": "root",
        class: ui.value.root({ class: [props.ui?.root, props.class] })
      }, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            ssrRenderSlot(_ctx.$slots, "default", {
              open: unref(open),
              removeFile,
              ui: ui.value
            }, () => {
              ssrRenderVNode(_push2, createVNode(resolveDynamicComponent(variant.value === "button" ? "button" : "div"), {
                ref_key: "dropzoneRef",
                ref: dropzoneRef,
                type: variant.value === "button" ? "button" : void 0,
                role: variant.value === "button" ? void 0 : "button",
                "data-dragging": unref(isDragging),
                "data-slot": "base",
                class: ui.value.base({ class: props.ui?.base }),
                tabindex: __props.interactive && !unref(disabled) ? 0 : -1,
                onClick: ($event) => __props.interactive && !unref(disabled) && unref(open)(),
                onKeydown: () => {
                },
                onKeyup: ($event) => __props.interactive && !unref(disabled) && unref(open)()
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    if (position.value === "inside") {
                      _push3(ssrRenderComponent(unref(ReuseFilesTemplate), null, null, _parent3, _scopeId2));
                    } else {
                      _push3(`<!---->`);
                    }
                    if (position.value === "inside" ? __props.multiple ? !modelValue.value?.length : !modelValue.value : true) {
                      _push3(`<div data-slot="wrapper" class="${ssrRenderClass(ui.value.wrapper({ class: props.ui?.wrapper }))}"${_scopeId2}>`);
                      ssrRenderSlot(_ctx.$slots, "leading", { ui: ui.value }, () => {
                        if (variant.value === "button") {
                          _push3(ssrRenderComponent(_sfc_main$f, {
                            name: __props.icon || unref(appConfig).ui.icons.upload,
                            "data-slot": "icon",
                            class: ui.value.icon({ class: props.ui?.icon })
                          }, null, _parent3, _scopeId2));
                        } else {
                          _push3(ssrRenderComponent(_sfc_main$e, {
                            icon: __props.icon || unref(appConfig).ui.icons.upload,
                            size: props.size,
                            "data-slot": "avatar",
                            class: ui.value.avatar({ class: props.ui?.avatar })
                          }, null, _parent3, _scopeId2));
                        }
                      }, _push3, _parent3, _scopeId2);
                      if (variant.value !== "button") {
                        _push3(`<!--[-->`);
                        if (__props.label || !!slots.label) {
                          _push3(`<div data-slot="label" class="${ssrRenderClass(ui.value.label({ class: props.ui?.label }))}"${_scopeId2}>`);
                          ssrRenderSlot(_ctx.$slots, "label", {}, () => {
                            _push3(`${ssrInterpolate(__props.label)}`);
                          }, _push3, _parent3, _scopeId2);
                          _push3(`</div>`);
                        } else {
                          _push3(`<!---->`);
                        }
                        if (__props.description || !!slots.description) {
                          _push3(`<div data-slot="description" class="${ssrRenderClass(ui.value.description({ class: props.ui?.description }))}"${_scopeId2}>`);
                          ssrRenderSlot(_ctx.$slots, "description", {}, () => {
                            _push3(`${ssrInterpolate(__props.description)}`);
                          }, _push3, _parent3, _scopeId2);
                          _push3(`</div>`);
                        } else {
                          _push3(`<!---->`);
                        }
                        if (!!slots.actions) {
                          _push3(`<div data-slot="actions" class="${ssrRenderClass(ui.value.actions({ class: props.ui?.actions }))}"${_scopeId2}>`);
                          ssrRenderSlot(_ctx.$slots, "actions", {
                            files: modelValue.value,
                            open: unref(open),
                            removeFile
                          }, null, _push3, _parent3, _scopeId2);
                          _push3(`</div>`);
                        } else {
                          _push3(`<!---->`);
                        }
                        _push3(`<!--]-->`);
                      } else {
                        _push3(`<!---->`);
                      }
                      _push3(`</div>`);
                    } else {
                      _push3(`<!---->`);
                    }
                  } else {
                    return [
                      position.value === "inside" ? (openBlock(), createBlock(unref(ReuseFilesTemplate), { key: 0 })) : createCommentVNode("", true),
                      (position.value === "inside" ? __props.multiple ? !modelValue.value?.length : !modelValue.value : true) ? (openBlock(), createBlock("div", {
                        key: 1,
                        "data-slot": "wrapper",
                        class: ui.value.wrapper({ class: props.ui?.wrapper })
                      }, [
                        renderSlot(_ctx.$slots, "leading", { ui: ui.value }, () => [
                          variant.value === "button" ? (openBlock(), createBlock(_sfc_main$f, {
                            key: 0,
                            name: __props.icon || unref(appConfig).ui.icons.upload,
                            "data-slot": "icon",
                            class: ui.value.icon({ class: props.ui?.icon })
                          }, null, 8, ["name", "class"])) : (openBlock(), createBlock(_sfc_main$e, {
                            key: 1,
                            icon: __props.icon || unref(appConfig).ui.icons.upload,
                            size: props.size,
                            "data-slot": "avatar",
                            class: ui.value.avatar({ class: props.ui?.avatar })
                          }, null, 8, ["icon", "size", "class"]))
                        ]),
                        variant.value !== "button" ? (openBlock(), createBlock(Fragment, { key: 0 }, [
                          __props.label || !!slots.label ? (openBlock(), createBlock("div", {
                            key: 0,
                            "data-slot": "label",
                            class: ui.value.label({ class: props.ui?.label })
                          }, [
                            renderSlot(_ctx.$slots, "label", {}, () => [
                              createTextVNode(toDisplayString(__props.label), 1)
                            ])
                          ], 2)) : createCommentVNode("", true),
                          __props.description || !!slots.description ? (openBlock(), createBlock("div", {
                            key: 1,
                            "data-slot": "description",
                            class: ui.value.description({ class: props.ui?.description })
                          }, [
                            renderSlot(_ctx.$slots, "description", {}, () => [
                              createTextVNode(toDisplayString(__props.description), 1)
                            ])
                          ], 2)) : createCommentVNode("", true),
                          !!slots.actions ? (openBlock(), createBlock("div", {
                            key: 2,
                            "data-slot": "actions",
                            class: ui.value.actions({ class: props.ui?.actions })
                          }, [
                            renderSlot(_ctx.$slots, "actions", {
                              files: modelValue.value,
                              open: unref(open),
                              removeFile
                            })
                          ], 2)) : createCommentVNode("", true)
                        ], 64)) : createCommentVNode("", true)
                      ], 2)) : createCommentVNode("", true)
                    ];
                  }
                }),
                _: 3
              }), _parent2, _scopeId);
              if (position.value === "outside") {
                _push2(ssrRenderComponent(unref(ReuseFilesTemplate), null, null, _parent2, _scopeId));
              } else {
                _push2(`<!---->`);
              }
            }, _push2, _parent2, _scopeId);
            _push2(ssrRenderComponent(unref(VisuallyHidden_default), mergeProps({
              id: unref(id),
              ref_key: "inputRef",
              ref: inputRef,
              as: "input",
              type: "file",
              feature: "fully-hidden",
              name: unref(name),
              accept: __props.accept,
              multiple: __props.multiple,
              required: __props.required,
              disabled: unref(disabled)
            }, { ..._ctx.$attrs, ...unref(ariaAttrs) }), null, _parent2, _scopeId));
          } else {
            return [
              renderSlot(_ctx.$slots, "default", {
                open: unref(open),
                removeFile,
                ui: ui.value
              }, () => [
                (openBlock(), createBlock(resolveDynamicComponent(variant.value === "button" ? "button" : "div"), {
                  ref_key: "dropzoneRef",
                  ref: dropzoneRef,
                  type: variant.value === "button" ? "button" : void 0,
                  role: variant.value === "button" ? void 0 : "button",
                  "data-dragging": unref(isDragging),
                  "data-slot": "base",
                  class: ui.value.base({ class: props.ui?.base }),
                  tabindex: __props.interactive && !unref(disabled) ? 0 : -1,
                  onClick: ($event) => __props.interactive && !unref(disabled) && unref(open)(),
                  onKeydown: withKeys(withModifiers(() => {
                  }, ["prevent"]), ["space"]),
                  onKeyup: withKeys(($event) => __props.interactive && !unref(disabled) && unref(open)(), ["enter", "space"])
                }, {
                  default: withCtx(() => [
                    position.value === "inside" ? (openBlock(), createBlock(unref(ReuseFilesTemplate), { key: 0 })) : createCommentVNode("", true),
                    (position.value === "inside" ? __props.multiple ? !modelValue.value?.length : !modelValue.value : true) ? (openBlock(), createBlock("div", {
                      key: 1,
                      "data-slot": "wrapper",
                      class: ui.value.wrapper({ class: props.ui?.wrapper })
                    }, [
                      renderSlot(_ctx.$slots, "leading", { ui: ui.value }, () => [
                        variant.value === "button" ? (openBlock(), createBlock(_sfc_main$f, {
                          key: 0,
                          name: __props.icon || unref(appConfig).ui.icons.upload,
                          "data-slot": "icon",
                          class: ui.value.icon({ class: props.ui?.icon })
                        }, null, 8, ["name", "class"])) : (openBlock(), createBlock(_sfc_main$e, {
                          key: 1,
                          icon: __props.icon || unref(appConfig).ui.icons.upload,
                          size: props.size,
                          "data-slot": "avatar",
                          class: ui.value.avatar({ class: props.ui?.avatar })
                        }, null, 8, ["icon", "size", "class"]))
                      ]),
                      variant.value !== "button" ? (openBlock(), createBlock(Fragment, { key: 0 }, [
                        __props.label || !!slots.label ? (openBlock(), createBlock("div", {
                          key: 0,
                          "data-slot": "label",
                          class: ui.value.label({ class: props.ui?.label })
                        }, [
                          renderSlot(_ctx.$slots, "label", {}, () => [
                            createTextVNode(toDisplayString(__props.label), 1)
                          ])
                        ], 2)) : createCommentVNode("", true),
                        __props.description || !!slots.description ? (openBlock(), createBlock("div", {
                          key: 1,
                          "data-slot": "description",
                          class: ui.value.description({ class: props.ui?.description })
                        }, [
                          renderSlot(_ctx.$slots, "description", {}, () => [
                            createTextVNode(toDisplayString(__props.description), 1)
                          ])
                        ], 2)) : createCommentVNode("", true),
                        !!slots.actions ? (openBlock(), createBlock("div", {
                          key: 2,
                          "data-slot": "actions",
                          class: ui.value.actions({ class: props.ui?.actions })
                        }, [
                          renderSlot(_ctx.$slots, "actions", {
                            files: modelValue.value,
                            open: unref(open),
                            removeFile
                          })
                        ], 2)) : createCommentVNode("", true)
                      ], 64)) : createCommentVNode("", true)
                    ], 2)) : createCommentVNode("", true)
                  ]),
                  _: 3
                }, 40, ["type", "role", "data-dragging", "class", "tabindex", "onClick", "onKeydown", "onKeyup"])),
                position.value === "outside" ? (openBlock(), createBlock(unref(ReuseFilesTemplate), { key: 0 })) : createCommentVNode("", true)
              ]),
              createVNode(unref(VisuallyHidden_default), mergeProps({
                id: unref(id),
                ref_key: "inputRef",
                ref: inputRef,
                as: "input",
                type: "file",
                feature: "fully-hidden",
                name: unref(name),
                accept: __props.accept,
                multiple: __props.multiple,
                required: __props.required,
                disabled: unref(disabled)
              }, { ..._ctx.$attrs, ...unref(ariaAttrs) }), null, 16, ["id", "name", "accept", "multiple", "required", "disabled"])
            ];
          }
        }),
        _: 3
      }, _parent));
      _push(`<!--]-->`);
    };
  }
});
const _sfc_setup$6 = _sfc_main$6.setup;
_sfc_main$6.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../node_modules/.pnpm/@nuxt+ui@4.3.0_ce70e36b2b2e96ffad445540e21eec42/node_modules/@nuxt/ui/dist/runtime/components/FileUpload.vue");
  return _sfc_setup$6 ? _sfc_setup$6(props, ctx) : void 0;
};
const _sfc_main$5 = /* @__PURE__ */ defineComponent({
  __name: "FilterPanel",
  __ssrInlineRender: true,
  setup(__props) {
    const { t: $t } = useI18n();
    const {
      availableFilters,
      selectedCounts,
      toggleFilter,
      isFilterSelected,
      clearAllFilters,
      hasActiveFilters,
      activeFilters
    } = usePhotoFilters();
    const { shufflePhotos } = usePhotoSort();
    const currentTab = ref("labels");
    const isSearchMode = ref(false);
    const searchQuery = computed({
      get: () => activeFilters.value.search,
      set: (value) => {
        activeFilters.value.search = value;
      }
    });
    const selectedRating = computed({
      get: () => activeFilters.value.ratings,
      set: (value) => {
        activeFilters.value.ratings = value;
      }
    });
    const tabItems = computed(() => [
      {
        label: $t("ui.action.filter.tabs.tags"),
        value: "labels",
        badge: selectedCounts.value.tags || void 0,
        icon: "tabler:tags",
        slot: "tags"
      },
      {
        label: $t("ui.action.filter.tabs.cameras"),
        value: "cameras",
        badge: selectedCounts.value.cameras || void 0,
        icon: "tabler:camera",
        slot: "cameras"
      },
      {
        label: $t("ui.action.filter.tabs.lenses"),
        value: "lenses",
        badge: selectedCounts.value.lenses || void 0,
        icon: "tabler:aperture",
        slot: "lenses"
      },
      {
        label: $t("ui.action.filter.tabs.cities"),
        value: "cities",
        badge: selectedCounts.value.cities || void 0,
        icon: "tabler:map-pin",
        slot: "cities"
      },
      {
        label: $t("ui.action.filter.tabs.ratings"),
        value: "ratings",
        badge: selectedCounts.value.ratings || void 0,
        icon: "tabler:star",
        slot: "ratings"
      }
    ]);
    const handleToggleFilter = (type, value) => {
      toggleFilter(type, value);
    };
    const onShuffle = () => {
      shufflePhotos();
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_UButton = _sfc_main$b;
      const _component_UInput = _sfc_main$g;
      const _component_UTooltip = _sfc_main$h;
      const _component_UTabs = _sfc_main$i;
      const _component_UBadge = _sfc_main$a;
      const _component_Icon = __nuxt_component_0;
      const _component_Rating = __nuxt_component_1;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "space-y-1.5 w-[calc(100vw-34px)] sm:w-md" }, _attrs))}><div class="flex items-center justify-between"><h3 class="text-sm font-bold text-neutral-900 dark:text-white p-2">${ssrInterpolate(unref($t)("ui.action.filter.title"))}</h3><div class="flex items-center gap-1">`);
      if (unref(hasActiveFilters)) {
        _push(ssrRenderComponent(_component_UButton, {
          size: "sm",
          variant: "ghost",
          color: "neutral",
          icon: "tabler:filter-x",
          onClick: () => {
            unref(clearAllFilters)();
            isSearchMode.value = false;
            searchQuery.value = "";
          }
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(unref($t)("ui.action.filter.clearAll"))}`);
            } else {
              return [
                createTextVNode(toDisplayString(unref($t)("ui.action.filter.clearAll")), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
      } else {
        _push(`<!---->`);
      }
      if (unref(isSearchMode)) {
        _push(`<div class="flex items-center gap-1">`);
        _push(ssrRenderComponent(_component_UInput, {
          modelValue: unref(searchQuery),
          "onUpdate:modelValue": ($event) => isRef(searchQuery) ? searchQuery.value = $event : null,
          size: "sm",
          icon: "tabler:search",
          placeholder: "搜索文件名等...",
          class: "w-32",
          onKeydown: ($event) => isSearchMode.value = false
        }, null, _parent));
        _push(ssrRenderComponent(_component_UButton, {
          size: "sm",
          variant: "ghost",
          color: "neutral",
          icon: "tabler:x",
          onClick: () => {
            isSearchMode.value = false;
            searchQuery.value = "";
          }
        }, null, _parent));
        _push(`</div>`);
      } else {
        _push(ssrRenderComponent(_component_UButton, {
          size: "sm",
          variant: "ghost",
          color: "neutral",
          icon: "tabler:search",
          onClick: ($event) => isSearchMode.value = true
        }, null, _parent));
      }
      _push(ssrRenderComponent(_component_UTooltip, { text: "打乱列表" }, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(ssrRenderComponent(_component_UButton, {
              size: "sm",
              variant: "ghost",
              color: "neutral",
              icon: "tabler:dice-3",
              onClick: onShuffle
            }, null, _parent2, _scopeId));
          } else {
            return [
              createVNode(_component_UButton, {
                size: "sm",
                variant: "ghost",
                color: "neutral",
                icon: "tabler:dice-3",
                onClick: onShuffle
              })
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</div></div>`);
      _push(ssrRenderComponent(_component_UTabs, {
        modelValue: unref(currentTab),
        "onUpdate:modelValue": ($event) => isRef(currentTab) ? currentTab.value = $event : null,
        color: "neutral",
        size: "xs",
        items: unref(tabItems),
        ui: {
          list: "bg-white/30 dark:bg-neutral-800/50",
          indicator: "bg-white/80",
          trigger: "data-[state=inactive]:text-muted data-[state=active]:text-default dark:data-[state=active]:text-inverted",
          trailingBadge: "ring-0 rounded-full py-0 bg-info-100/80 dark:bg-info-900/80 text-info-500 dark:text-info-400 border border-info-300/50 dark:border-info-700/50",
          trailingBadgeSize: "sm"
        }
      }, {
        tags: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="space-y-0.5 max-h-64 overflow-y-auto"${_scopeId}><div class="flex flex-wrap gap-1"${_scopeId}><!--[-->`);
            ssrRenderList(unref(availableFilters).tags, (tag) => {
              _push2(ssrRenderComponent(_component_UBadge, {
                key: tag.label,
                label: tag.label,
                color: unref(isFilterSelected)("tags", tag.label) ? "info" : "neutral",
                "trailing-icon": unref(isFilterSelected)("tags", tag.label) ? "tabler:check" : "",
                variant: "soft",
                class: ["cursor-pointer select-none transition-colors", `${unref(isFilterSelected)("tags", tag.label) ? "" : "bg-neutral-800/10 text-neutral-800 hover:bg-neutral-800/20 dark:bg-white/10 dark:text-white dark:hover:bg-white/20"}`],
                onClick: ($event) => handleToggleFilter("tags", tag.label)
              }, null, _parent2, _scopeId));
            });
            _push2(`<!--]--></div>`);
            if (unref(availableFilters).tags.length === 0) {
              _push2(`<div class="text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"${_scopeId}>${ssrInterpolate(unref($t)("ui.action.filter.empty.tags"))}</div>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div>`);
          } else {
            return [
              createVNode("div", { class: "space-y-0.5 max-h-64 overflow-y-auto" }, [
                createVNode("div", { class: "flex flex-wrap gap-1" }, [
                  (openBlock(true), createBlock(Fragment, null, renderList(unref(availableFilters).tags, (tag) => {
                    return openBlock(), createBlock(_component_UBadge, {
                      key: tag.label,
                      label: tag.label,
                      color: unref(isFilterSelected)("tags", tag.label) ? "info" : "neutral",
                      "trailing-icon": unref(isFilterSelected)("tags", tag.label) ? "tabler:check" : "",
                      variant: "soft",
                      class: ["cursor-pointer select-none transition-colors", `${unref(isFilterSelected)("tags", tag.label) ? "" : "bg-neutral-800/10 text-neutral-800 hover:bg-neutral-800/20 dark:bg-white/10 dark:text-white dark:hover:bg-white/20"}`],
                      onClick: ($event) => handleToggleFilter("tags", tag.label)
                    }, null, 8, ["label", "color", "trailing-icon", "class", "onClick"]);
                  }), 128))
                ]),
                unref(availableFilters).tags.length === 0 ? (openBlock(), createBlock("div", {
                  key: 0,
                  class: "text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"
                }, toDisplayString(unref($t)("ui.action.filter.empty.tags")), 1)) : createCommentVNode("", true)
              ])
            ];
          }
        }),
        cameras: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="space-y-0.5 max-h-64 overflow-y-auto"${_scopeId}><!--[-->`);
            ssrRenderList(unref(availableFilters).cameras, (camera) => {
              _push2(`<div class="${ssrRenderClass([
                unref(isFilterSelected)("cameras", camera.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : "",
                "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2"
              ])}"${_scopeId}><span class="text-sm text-default font-medium truncate"${_scopeId}>${ssrInterpolate(camera.label)}</span>`);
              if (unref(isFilterSelected)("cameras", camera.label)) {
                _push2(ssrRenderComponent(_component_Icon, {
                  name: "tabler:check",
                  class: "size-4 text-green-500"
                }, null, _parent2, _scopeId));
              } else {
                _push2(`<!---->`);
              }
              _push2(`</div>`);
            });
            _push2(`<!--]-->`);
            if (unref(availableFilters).cameras.length === 0) {
              _push2(`<div class="text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"${_scopeId}>${ssrInterpolate(unref($t)("ui.action.filter.empty.cameras"))}</div>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div>`);
          } else {
            return [
              createVNode("div", { class: "space-y-0.5 max-h-64 overflow-y-auto" }, [
                (openBlock(true), createBlock(Fragment, null, renderList(unref(availableFilters).cameras, (camera) => {
                  return openBlock(), createBlock("div", {
                    key: camera.label,
                    class: [
                      "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2",
                      unref(isFilterSelected)("cameras", camera.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : ""
                    ],
                    onClick: ($event) => handleToggleFilter("cameras", camera.label)
                  }, [
                    createVNode("span", { class: "text-sm text-default font-medium truncate" }, toDisplayString(camera.label), 1),
                    unref(isFilterSelected)("cameras", camera.label) ? (openBlock(), createBlock(_component_Icon, {
                      key: 0,
                      name: "tabler:check",
                      class: "size-4 text-green-500"
                    })) : createCommentVNode("", true)
                  ], 10, ["onClick"]);
                }), 128)),
                unref(availableFilters).cameras.length === 0 ? (openBlock(), createBlock("div", {
                  key: 0,
                  class: "text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"
                }, toDisplayString(unref($t)("ui.action.filter.empty.cameras")), 1)) : createCommentVNode("", true)
              ])
            ];
          }
        }),
        lenses: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="space-y-0.5 max-h-64 overflow-y-auto"${_scopeId}><!--[-->`);
            ssrRenderList(unref(availableFilters).lenses, (lens) => {
              _push2(`<div class="${ssrRenderClass([
                unref(isFilterSelected)("lenses", lens.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : "",
                "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2"
              ])}"${_scopeId}><span class="text-sm text-default font-medium truncate"${_scopeId}>${ssrInterpolate(lens.label)}</span>`);
              if (unref(isFilterSelected)("lenses", lens.label)) {
                _push2(ssrRenderComponent(_component_Icon, {
                  name: "tabler:check",
                  class: "size-4 text-green-500"
                }, null, _parent2, _scopeId));
              } else {
                _push2(`<!---->`);
              }
              _push2(`</div>`);
            });
            _push2(`<!--]-->`);
            if (unref(availableFilters).lenses.length === 0) {
              _push2(`<div class="text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"${_scopeId}>${ssrInterpolate(unref($t)("ui.action.filter.empty.lenses"))}</div>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div>`);
          } else {
            return [
              createVNode("div", { class: "space-y-0.5 max-h-64 overflow-y-auto" }, [
                (openBlock(true), createBlock(Fragment, null, renderList(unref(availableFilters).lenses, (lens) => {
                  return openBlock(), createBlock("div", {
                    key: lens.label,
                    class: [
                      "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2",
                      unref(isFilterSelected)("lenses", lens.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : ""
                    ],
                    onClick: ($event) => handleToggleFilter("lenses", lens.label)
                  }, [
                    createVNode("span", { class: "text-sm text-default font-medium truncate" }, toDisplayString(lens.label), 1),
                    unref(isFilterSelected)("lenses", lens.label) ? (openBlock(), createBlock(_component_Icon, {
                      key: 0,
                      name: "tabler:check",
                      class: "size-4 text-green-500"
                    })) : createCommentVNode("", true)
                  ], 10, ["onClick"]);
                }), 128)),
                unref(availableFilters).lenses.length === 0 ? (openBlock(), createBlock("div", {
                  key: 0,
                  class: "text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"
                }, toDisplayString(unref($t)("ui.action.filter.empty.lenses")), 1)) : createCommentVNode("", true)
              ])
            ];
          }
        }),
        cities: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="space-y-0.5 max-h-64 overflow-y-auto"${_scopeId}><!--[-->`);
            ssrRenderList(unref(availableFilters).cities, (city) => {
              _push2(`<div class="${ssrRenderClass([
                unref(isFilterSelected)("cities", city.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : "",
                "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2"
              ])}"${_scopeId}><span class="text-sm text-default font-medium truncate"${_scopeId}>${ssrInterpolate(city.label)}</span>`);
              if (unref(isFilterSelected)("cities", city.label)) {
                _push2(ssrRenderComponent(_component_Icon, {
                  name: "tabler:check",
                  class: "size-4 text-green-500"
                }, null, _parent2, _scopeId));
              } else {
                _push2(`<!---->`);
              }
              _push2(`</div>`);
            });
            _push2(`<!--]-->`);
            if (unref(availableFilters).cities.length === 0) {
              _push2(`<div class="text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"${_scopeId}>${ssrInterpolate(unref($t)("ui.action.filter.empty.cities"))}</div>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div>`);
          } else {
            return [
              createVNode("div", { class: "space-y-0.5 max-h-64 overflow-y-auto" }, [
                (openBlock(true), createBlock(Fragment, null, renderList(unref(availableFilters).cities, (city) => {
                  return openBlock(), createBlock("div", {
                    key: city.label,
                    class: [
                      "flex items-center justify-between cursor-pointer select-none hover:bg-neutral-400/30 dark:hover:bg-info-800/30 rounded-lg px-2 py-2",
                      unref(isFilterSelected)("cities", city.label) ? "bg-neutral-400/30 dark:bg-info-800/30" : ""
                    ],
                    onClick: ($event) => handleToggleFilter("cities", city.label)
                  }, [
                    createVNode("span", { class: "text-sm text-default font-medium truncate" }, toDisplayString(city.label), 1),
                    unref(isFilterSelected)("cities", city.label) ? (openBlock(), createBlock(_component_Icon, {
                      key: 0,
                      name: "tabler:check",
                      class: "size-4 text-green-500"
                    })) : createCommentVNode("", true)
                  ], 10, ["onClick"]);
                }), 128)),
                unref(availableFilters).cities.length === 0 ? (openBlock(), createBlock("div", {
                  key: 0,
                  class: "text-center text-sm text-neutral-500 dark:text-neutral-400 py-4"
                }, toDisplayString(unref($t)("ui.action.filter.empty.cities")), 1)) : createCommentVNode("", true)
              ])
            ];
          }
        }),
        ratings: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="max-h-64 overflow-y-auto flex flex-col items-center gap-3 py-4"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_Rating, {
              modelValue: unref(selectedRating),
              "onUpdate:modelValue": ($event) => isRef(selectedRating) ? selectedRating.value = $event : null,
              size: "xl",
              "allow-half": false
            }, null, _parent2, _scopeId));
            _push2(`<div class="text-xs font-semibold text-neutral-900/90 dark:text-white/90"${_scopeId}>${ssrInterpolate(unref(selectedRating) ? unref($t)(
              "ui.action.filter.rating.showStarsAndAbove",
              unref(selectedRating)
            ) : unref($t)("ui.action.filter.rating.showAll"))}</div></div>`);
          } else {
            return [
              createVNode("div", { class: "max-h-64 overflow-y-auto flex flex-col items-center gap-3 py-4" }, [
                createVNode(_component_Rating, {
                  modelValue: unref(selectedRating),
                  "onUpdate:modelValue": ($event) => isRef(selectedRating) ? selectedRating.value = $event : null,
                  size: "xl",
                  "allow-half": false
                }, null, 8, ["modelValue", "onUpdate:modelValue"]),
                createVNode("div", { class: "text-xs font-semibold text-neutral-900/90 dark:text-white/90" }, toDisplayString(unref(selectedRating) ? unref($t)(
                  "ui.action.filter.rating.showStarsAndAbove",
                  unref(selectedRating)
                ) : unref($t)("ui.action.filter.rating.showAll")), 1)
              ])
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</div>`);
    };
  }
});
const _sfc_setup$5 = _sfc_main$5.setup;
_sfc_main$5.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/overlay/FilterPanel.vue");
  return _sfc_setup$5 ? _sfc_setup$5(props, ctx) : void 0;
};
const __nuxt_component_17 = Object.assign(_sfc_main$5, { __name: "OverlayFilterPanel" });
const _sfc_main$4 = {
  __name: "UDropdownMenuContent",
  __ssrInlineRender: true,
  props: {
    items: { type: null, required: false },
    portal: { type: [Boolean, String], required: false, skipCheck: true },
    sub: { type: Boolean, required: false },
    labelKey: { type: null, required: true },
    descriptionKey: { type: null, required: true },
    checkedIcon: { type: null, required: false },
    loadingIcon: { type: null, required: false },
    externalIcon: { type: [Boolean, String], required: false, skipCheck: true },
    class: { type: null, required: false },
    ui: { type: null, required: true },
    uiOverride: { type: null, required: false },
    loop: { type: Boolean, required: false },
    side: { type: null, required: false },
    sideOffset: { type: Number, required: false },
    sideFlip: { type: Boolean, required: false },
    align: { type: null, required: false },
    alignOffset: { type: Number, required: false },
    alignFlip: { type: Boolean, required: false },
    avoidCollisions: { type: Boolean, required: false },
    collisionBoundary: { type: null, required: false },
    collisionPadding: { type: [Number, Object], required: false },
    arrowPadding: { type: Number, required: false },
    sticky: { type: String, required: false },
    hideWhenDetached: { type: Boolean, required: false },
    positionStrategy: { type: String, required: false },
    updatePositionStrategy: { type: String, required: false },
    disableUpdateOnLayoutShift: { type: Boolean, required: false },
    prioritizePosition: { type: Boolean, required: false },
    reference: { type: null, required: false }
  },
  emits: ["escapeKeyDown", "pointerDownOutside", "focusOutside", "interactOutside", "closeAutoFocus"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const slots = useSlots();
    const { dir } = useLocale();
    const appConfig = useAppConfig();
    const portalProps = usePortal(toRef(() => props.portal));
    const contentProps = useForwardPropsEmits(reactiveOmit(props, "sub", "items", "portal", "labelKey", "descriptionKey", "checkedIcon", "loadingIcon", "externalIcon", "class", "ui", "uiOverride"), emits);
    const getProxySlots = () => omit(slots, ["default"]);
    const [DefineItemTemplate, ReuseItemTemplate] = createReusableTemplate();
    const childrenIcon = computed(() => dir.value === "rtl" ? appConfig.ui.icons.chevronLeft : appConfig.ui.icons.chevronRight);
    const groups = computed(
      () => props.items?.length ? isArrayOfArray(props.items) ? props.items : [props.items] : []
    );
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<!--[-->`);
      _push(ssrRenderComponent(unref(DefineItemTemplate), null, {
        default: withCtx(({ item, active, index }, _push2, _parent2, _scopeId) => {
          if (_push2) {
            ssrRenderSlot(_ctx.$slots, item.slot || "item", {
              item,
              index,
              ui: __props.ui
            }, () => {
              ssrRenderSlot(_ctx.$slots, item.slot ? `${item.slot}-leading` : "item-leading", {
                item,
                active,
                index,
                ui: __props.ui
              }, () => {
                if (item.loading) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: __props.loadingIcon || unref(appConfig).ui.icons.loading,
                    "data-slot": "itemLeadingIcon",
                    class: __props.ui.itemLeadingIcon({ class: [__props.uiOverride?.itemLeadingIcon, item.ui?.itemLeadingIcon], color: item?.color, loading: true })
                  }, null, _parent2, _scopeId));
                } else if (item.icon) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: item.icon,
                    "data-slot": "itemLeadingIcon",
                    class: __props.ui.itemLeadingIcon({ class: [__props.uiOverride?.itemLeadingIcon, item.ui?.itemLeadingIcon], color: item?.color, active })
                  }, null, _parent2, _scopeId));
                } else if (item.avatar) {
                  _push2(ssrRenderComponent(_sfc_main$e, mergeProps({
                    size: item.ui?.itemLeadingAvatarSize || __props.uiOverride?.itemLeadingAvatarSize || __props.ui.itemLeadingAvatarSize()
                  }, item.avatar, {
                    "data-slot": "itemLeadingAvatar",
                    class: __props.ui.itemLeadingAvatar({ class: [__props.uiOverride?.itemLeadingAvatar, item.ui?.itemLeadingAvatar], active })
                  }), null, _parent2, _scopeId));
                } else {
                  _push2(`<!---->`);
                }
              }, _push2, _parent2, _scopeId);
              if (unref(get)(item, props.labelKey) || !!slots[item.slot ? `${item.slot}-label` : "item-label"] || (unref(get)(item, props.descriptionKey) || !!slots[item.slot ? `${item.slot}-description` : "item-description"])) {
                _push2(`<span data-slot="itemWrapper" class="${ssrRenderClass(__props.ui.itemWrapper({ class: [__props.uiOverride?.itemWrapper, item.ui?.itemWrapper] }))}"${_scopeId}><span data-slot="itemLabel" class="${ssrRenderClass(__props.ui.itemLabel({ class: [__props.uiOverride?.itemLabel, item.ui?.itemLabel], active }))}"${_scopeId}>`);
                ssrRenderSlot(_ctx.$slots, item.slot ? `${item.slot}-label` : "item-label", {
                  item,
                  active,
                  index
                }, () => {
                  _push2(`${ssrInterpolate(unref(get)(item, props.labelKey))}`);
                }, _push2, _parent2, _scopeId);
                if (item.target === "_blank" && __props.externalIcon !== false) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: typeof __props.externalIcon === "string" ? __props.externalIcon : unref(appConfig).ui.icons.external,
                    "data-slot": "itemLabelExternalIcon",
                    class: __props.ui.itemLabelExternalIcon({ class: [__props.uiOverride?.itemLabelExternalIcon, item.ui?.itemLabelExternalIcon], color: item?.color, active })
                  }, null, _parent2, _scopeId));
                } else {
                  _push2(`<!---->`);
                }
                _push2(`</span>`);
                if (unref(get)(item, props.descriptionKey)) {
                  _push2(`<span data-slot="itemDescription" class="${ssrRenderClass(__props.ui.itemDescription({ class: [__props.uiOverride?.itemDescription, item.ui?.itemDescription] }))}"${_scopeId}>`);
                  ssrRenderSlot(_ctx.$slots, item.slot ? `${item.slot}-description` : "item-description", {
                    item,
                    active,
                    index
                  }, () => {
                    _push2(`${ssrInterpolate(unref(get)(item, props.descriptionKey))}`);
                  }, _push2, _parent2, _scopeId);
                  _push2(`</span>`);
                } else {
                  _push2(`<!---->`);
                }
                _push2(`</span>`);
              } else {
                _push2(`<!---->`);
              }
              _push2(`<span data-slot="itemTrailing" class="${ssrRenderClass(__props.ui.itemTrailing({ class: [__props.uiOverride?.itemTrailing, item.ui?.itemTrailing] }))}"${_scopeId}>`);
              ssrRenderSlot(_ctx.$slots, item.slot ? `${item.slot}-trailing` : "item-trailing", {
                item,
                active,
                index,
                ui: __props.ui
              }, () => {
                if (item.children?.length) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: childrenIcon.value,
                    "data-slot": "itemTrailingIcon",
                    class: __props.ui.itemTrailingIcon({ class: [__props.uiOverride?.itemTrailingIcon, item.ui?.itemTrailingIcon], color: item?.color, active })
                  }, null, _parent2, _scopeId));
                } else if (item.kbds?.length) {
                  _push2(`<span data-slot="itemTrailingKbds" class="${ssrRenderClass(__props.ui.itemTrailingKbds({ class: [__props.uiOverride?.itemTrailingKbds, item.ui?.itemTrailingKbds] }))}"${_scopeId}><!--[-->`);
                  ssrRenderList(item.kbds, (kbd, kbdIndex) => {
                    _push2(ssrRenderComponent(_sfc_main$j, mergeProps({
                      key: kbdIndex,
                      size: item.ui?.itemTrailingKbdsSize || __props.uiOverride?.itemTrailingKbdsSize || __props.ui.itemTrailingKbdsSize()
                    }, { ref_for: true }, typeof kbd === "string" ? { value: kbd } : kbd), null, _parent2, _scopeId));
                  });
                  _push2(`<!--]--></span>`);
                } else {
                  _push2(`<!---->`);
                }
              }, _push2, _parent2, _scopeId);
              _push2(ssrRenderComponent(unref(DropdownMenu).ItemIndicator, { "as-child": "" }, {
                default: withCtx((_, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(ssrRenderComponent(_sfc_main$f, {
                      name: __props.checkedIcon || unref(appConfig).ui.icons.check,
                      "data-slot": "itemTrailingIcon",
                      class: __props.ui.itemTrailingIcon({ class: [__props.uiOverride?.itemTrailingIcon, item.ui?.itemTrailingIcon], color: item?.color })
                    }, null, _parent3, _scopeId2));
                  } else {
                    return [
                      createVNode(_sfc_main$f, {
                        name: __props.checkedIcon || unref(appConfig).ui.icons.check,
                        "data-slot": "itemTrailingIcon",
                        class: __props.ui.itemTrailingIcon({ class: [__props.uiOverride?.itemTrailingIcon, item.ui?.itemTrailingIcon], color: item?.color })
                      }, null, 8, ["name", "class"])
                    ];
                  }
                }),
                _: 2
              }, _parent2, _scopeId));
              _push2(`</span>`);
            }, _push2, _parent2, _scopeId);
          } else {
            return [
              renderSlot(_ctx.$slots, item.slot || "item", {
                item,
                index,
                ui: __props.ui
              }, () => [
                renderSlot(_ctx.$slots, item.slot ? `${item.slot}-leading` : "item-leading", {
                  item,
                  active,
                  index,
                  ui: __props.ui
                }, () => [
                  item.loading ? (openBlock(), createBlock(_sfc_main$f, {
                    key: 0,
                    name: __props.loadingIcon || unref(appConfig).ui.icons.loading,
                    "data-slot": "itemLeadingIcon",
                    class: __props.ui.itemLeadingIcon({ class: [__props.uiOverride?.itemLeadingIcon, item.ui?.itemLeadingIcon], color: item?.color, loading: true })
                  }, null, 8, ["name", "class"])) : item.icon ? (openBlock(), createBlock(_sfc_main$f, {
                    key: 1,
                    name: item.icon,
                    "data-slot": "itemLeadingIcon",
                    class: __props.ui.itemLeadingIcon({ class: [__props.uiOverride?.itemLeadingIcon, item.ui?.itemLeadingIcon], color: item?.color, active })
                  }, null, 8, ["name", "class"])) : item.avatar ? (openBlock(), createBlock(_sfc_main$e, mergeProps({
                    key: 2,
                    size: item.ui?.itemLeadingAvatarSize || __props.uiOverride?.itemLeadingAvatarSize || __props.ui.itemLeadingAvatarSize()
                  }, item.avatar, {
                    "data-slot": "itemLeadingAvatar",
                    class: __props.ui.itemLeadingAvatar({ class: [__props.uiOverride?.itemLeadingAvatar, item.ui?.itemLeadingAvatar], active })
                  }), null, 16, ["size", "class"])) : createCommentVNode("", true)
                ]),
                unref(get)(item, props.labelKey) || !!slots[item.slot ? `${item.slot}-label` : "item-label"] || (unref(get)(item, props.descriptionKey) || !!slots[item.slot ? `${item.slot}-description` : "item-description"]) ? (openBlock(), createBlock("span", {
                  key: 0,
                  "data-slot": "itemWrapper",
                  class: __props.ui.itemWrapper({ class: [__props.uiOverride?.itemWrapper, item.ui?.itemWrapper] })
                }, [
                  createVNode("span", {
                    "data-slot": "itemLabel",
                    class: __props.ui.itemLabel({ class: [__props.uiOverride?.itemLabel, item.ui?.itemLabel], active })
                  }, [
                    renderSlot(_ctx.$slots, item.slot ? `${item.slot}-label` : "item-label", {
                      item,
                      active,
                      index
                    }, () => [
                      createTextVNode(toDisplayString(unref(get)(item, props.labelKey)), 1)
                    ]),
                    item.target === "_blank" && __props.externalIcon !== false ? (openBlock(), createBlock(_sfc_main$f, {
                      key: 0,
                      name: typeof __props.externalIcon === "string" ? __props.externalIcon : unref(appConfig).ui.icons.external,
                      "data-slot": "itemLabelExternalIcon",
                      class: __props.ui.itemLabelExternalIcon({ class: [__props.uiOverride?.itemLabelExternalIcon, item.ui?.itemLabelExternalIcon], color: item?.color, active })
                    }, null, 8, ["name", "class"])) : createCommentVNode("", true)
                  ], 2),
                  unref(get)(item, props.descriptionKey) ? (openBlock(), createBlock("span", {
                    key: 0,
                    "data-slot": "itemDescription",
                    class: __props.ui.itemDescription({ class: [__props.uiOverride?.itemDescription, item.ui?.itemDescription] })
                  }, [
                    renderSlot(_ctx.$slots, item.slot ? `${item.slot}-description` : "item-description", {
                      item,
                      active,
                      index
                    }, () => [
                      createTextVNode(toDisplayString(unref(get)(item, props.descriptionKey)), 1)
                    ])
                  ], 2)) : createCommentVNode("", true)
                ], 2)) : createCommentVNode("", true),
                createVNode("span", {
                  "data-slot": "itemTrailing",
                  class: __props.ui.itemTrailing({ class: [__props.uiOverride?.itemTrailing, item.ui?.itemTrailing] })
                }, [
                  renderSlot(_ctx.$slots, item.slot ? `${item.slot}-trailing` : "item-trailing", {
                    item,
                    active,
                    index,
                    ui: __props.ui
                  }, () => [
                    item.children?.length ? (openBlock(), createBlock(_sfc_main$f, {
                      key: 0,
                      name: childrenIcon.value,
                      "data-slot": "itemTrailingIcon",
                      class: __props.ui.itemTrailingIcon({ class: [__props.uiOverride?.itemTrailingIcon, item.ui?.itemTrailingIcon], color: item?.color, active })
                    }, null, 8, ["name", "class"])) : item.kbds?.length ? (openBlock(), createBlock("span", {
                      key: 1,
                      "data-slot": "itemTrailingKbds",
                      class: __props.ui.itemTrailingKbds({ class: [__props.uiOverride?.itemTrailingKbds, item.ui?.itemTrailingKbds] })
                    }, [
                      (openBlock(true), createBlock(Fragment, null, renderList(item.kbds, (kbd, kbdIndex) => {
                        return openBlock(), createBlock(_sfc_main$j, mergeProps({
                          key: kbdIndex,
                          size: item.ui?.itemTrailingKbdsSize || __props.uiOverride?.itemTrailingKbdsSize || __props.ui.itemTrailingKbdsSize()
                        }, { ref_for: true }, typeof kbd === "string" ? { value: kbd } : kbd), null, 16, ["size"]);
                      }), 128))
                    ], 2)) : createCommentVNode("", true)
                  ]),
                  createVNode(unref(DropdownMenu).ItemIndicator, { "as-child": "" }, {
                    default: withCtx(() => [
                      createVNode(_sfc_main$f, {
                        name: __props.checkedIcon || unref(appConfig).ui.icons.check,
                        "data-slot": "itemTrailingIcon",
                        class: __props.ui.itemTrailingIcon({ class: [__props.uiOverride?.itemTrailingIcon, item.ui?.itemTrailingIcon], color: item?.color })
                      }, null, 8, ["name", "class"])
                    ]),
                    _: 2
                  }, 1024)
                ], 2)
              ])
            ];
          }
        }),
        _: 3
      }, _parent));
      _push(ssrRenderComponent(unref(DropdownMenu).Portal, unref(portalProps), {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            ssrRenderVNode(_push2, createVNode(resolveDynamicComponent(__props.sub ? unref(DropdownMenu).SubContent : unref(DropdownMenu).Content), mergeProps({
              "data-slot": "content",
              class: __props.ui.content({ class: [__props.uiOverride?.content, props.class] })
            }, unref(contentProps)), {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  ssrRenderSlot(_ctx.$slots, "content-top", {
                    sub: __props.sub ?? false
                  }, null, _push3, _parent3, _scopeId2);
                  _push3(`<div role="presentation" data-slot="viewport" class="${ssrRenderClass(__props.ui.viewport({ class: __props.uiOverride?.viewport }))}"${_scopeId2}><!--[-->`);
                  ssrRenderList(groups.value, (group, groupIndex) => {
                    _push3(ssrRenderComponent(unref(DropdownMenu).Group, {
                      key: `group-${groupIndex}`,
                      "data-slot": "group",
                      class: __props.ui.group({ class: __props.uiOverride?.group })
                    }, {
                      default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          _push4(`<!--[-->`);
                          ssrRenderList(group, (item, index) => {
                            _push4(`<!--[-->`);
                            if (item.type === "label") {
                              _push4(ssrRenderComponent(unref(DropdownMenu).Label, {
                                "data-slot": "label",
                                class: __props.ui.label({ class: [__props.uiOverride?.label, item.ui?.label, item.class] })
                              }, {
                                default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                  if (_push5) {
                                    _push5(ssrRenderComponent(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, _parent5, _scopeId4));
                                  } else {
                                    return [
                                      createVNode(unref(ReuseItemTemplate), {
                                        item,
                                        index
                                      }, null, 8, ["item", "index"])
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent4, _scopeId3));
                            } else if (item.type === "separator") {
                              _push4(ssrRenderComponent(unref(DropdownMenu).Separator, {
                                "data-slot": "separator",
                                class: __props.ui.separator({ class: [__props.uiOverride?.separator, item.ui?.separator, item.class] })
                              }, null, _parent4, _scopeId3));
                            } else if (item?.children?.length) {
                              _push4(ssrRenderComponent(unref(DropdownMenu).Sub, {
                                open: item.open,
                                "default-open": item.defaultOpen
                              }, {
                                default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                  if (_push5) {
                                    _push5(ssrRenderComponent(unref(DropdownMenu).SubTrigger, {
                                      as: "button",
                                      type: "button",
                                      disabled: item.disabled,
                                      "text-value": unref(get)(item, props.labelKey),
                                      "data-slot": "item",
                                      class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color })
                                    }, {
                                      default: withCtx((_5, _push6, _parent6, _scopeId5) => {
                                        if (_push6) {
                                          _push6(ssrRenderComponent(unref(ReuseItemTemplate), {
                                            item,
                                            index
                                          }, null, _parent6, _scopeId5));
                                        } else {
                                          return [
                                            createVNode(unref(ReuseItemTemplate), {
                                              item,
                                              index
                                            }, null, 8, ["item", "index"])
                                          ];
                                        }
                                      }),
                                      _: 2
                                    }, _parent5, _scopeId4));
                                    _push5(ssrRenderComponent(_sfc_main$4, mergeProps({
                                      sub: "",
                                      class: item.ui?.content,
                                      ui: __props.ui,
                                      "ui-override": __props.uiOverride,
                                      portal: __props.portal,
                                      items: item.children,
                                      align: "start",
                                      "align-offset": -4,
                                      "side-offset": 3,
                                      "label-key": __props.labelKey,
                                      "description-key": __props.descriptionKey,
                                      "checked-icon": __props.checkedIcon,
                                      "loading-icon": __props.loadingIcon,
                                      "external-icon": __props.externalIcon
                                    }, { ref_for: true }, item.content), createSlots({ _: 2 }, [
                                      renderList(getProxySlots(), (_5, name) => {
                                        return {
                                          name,
                                          fn: withCtx((slotData, _push6, _parent6, _scopeId5) => {
                                            if (_push6) {
                                              ssrRenderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData), null, _push6, _parent6, _scopeId5);
                                            } else {
                                              return [
                                                renderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData))
                                              ];
                                            }
                                          })
                                        };
                                      })
                                    ]), _parent5, _scopeId4));
                                  } else {
                                    return [
                                      createVNode(unref(DropdownMenu).SubTrigger, {
                                        as: "button",
                                        type: "button",
                                        disabled: item.disabled,
                                        "text-value": unref(get)(item, props.labelKey),
                                        "data-slot": "item",
                                        class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color })
                                      }, {
                                        default: withCtx(() => [
                                          createVNode(unref(ReuseItemTemplate), {
                                            item,
                                            index
                                          }, null, 8, ["item", "index"])
                                        ]),
                                        _: 2
                                      }, 1032, ["disabled", "text-value", "class"]),
                                      createVNode(_sfc_main$4, mergeProps({
                                        sub: "",
                                        class: item.ui?.content,
                                        ui: __props.ui,
                                        "ui-override": __props.uiOverride,
                                        portal: __props.portal,
                                        items: item.children,
                                        align: "start",
                                        "align-offset": -4,
                                        "side-offset": 3,
                                        "label-key": __props.labelKey,
                                        "description-key": __props.descriptionKey,
                                        "checked-icon": __props.checkedIcon,
                                        "loading-icon": __props.loadingIcon,
                                        "external-icon": __props.externalIcon
                                      }, { ref_for: true }, item.content), createSlots({ _: 2 }, [
                                        renderList(getProxySlots(), (_5, name) => {
                                          return {
                                            name,
                                            fn: withCtx((slotData) => [
                                              renderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData))
                                            ])
                                          };
                                        })
                                      ]), 1040, ["class", "ui", "ui-override", "portal", "items", "label-key", "description-key", "checked-icon", "loading-icon", "external-icon"])
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent4, _scopeId3));
                            } else if (item.type === "checkbox") {
                              _push4(ssrRenderComponent(unref(DropdownMenu).CheckboxItem, {
                                "model-value": item.checked,
                                disabled: item.disabled,
                                "text-value": unref(get)(item, props.labelKey),
                                "data-slot": "item",
                                class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color }),
                                "onUpdate:modelValue": item.onUpdateChecked,
                                onSelect: item.onSelect
                              }, {
                                default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                  if (_push5) {
                                    _push5(ssrRenderComponent(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, _parent5, _scopeId4));
                                  } else {
                                    return [
                                      createVNode(unref(ReuseItemTemplate), {
                                        item,
                                        index
                                      }, null, 8, ["item", "index"])
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent4, _scopeId3));
                            } else {
                              _push4(ssrRenderComponent(unref(DropdownMenu).Item, {
                                "as-child": "",
                                disabled: item.disabled,
                                "text-value": unref(get)(item, props.labelKey),
                                onSelect: item.onSelect
                              }, {
                                default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                                  if (_push5) {
                                    _push5(ssrRenderComponent(_sfc_main$k, mergeProps({ ref_for: true }, unref(pickLinkProps)(item), { custom: "" }), {
                                      default: withCtx(({ active, ...slotProps }, _push6, _parent6, _scopeId5) => {
                                        if (_push6) {
                                          _push6(ssrRenderComponent(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                            "data-slot": "item",
                                            class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                          }), {
                                            default: withCtx((_5, _push7, _parent7, _scopeId6) => {
                                              if (_push7) {
                                                _push7(ssrRenderComponent(unref(ReuseItemTemplate), {
                                                  item,
                                                  active,
                                                  index
                                                }, null, _parent7, _scopeId6));
                                              } else {
                                                return [
                                                  createVNode(unref(ReuseItemTemplate), {
                                                    item,
                                                    active,
                                                    index
                                                  }, null, 8, ["item", "active", "index"])
                                                ];
                                              }
                                            }),
                                            _: 2
                                          }, _parent6, _scopeId5));
                                        } else {
                                          return [
                                            createVNode(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                              "data-slot": "item",
                                              class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                            }), {
                                              default: withCtx(() => [
                                                createVNode(unref(ReuseItemTemplate), {
                                                  item,
                                                  active,
                                                  index
                                                }, null, 8, ["item", "active", "index"])
                                              ]),
                                              _: 2
                                            }, 1040, ["class"])
                                          ];
                                        }
                                      }),
                                      _: 2
                                    }, _parent5, _scopeId4));
                                  } else {
                                    return [
                                      createVNode(_sfc_main$k, mergeProps({ ref_for: true }, unref(pickLinkProps)(item), { custom: "" }), {
                                        default: withCtx(({ active, ...slotProps }) => [
                                          createVNode(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                            "data-slot": "item",
                                            class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                          }), {
                                            default: withCtx(() => [
                                              createVNode(unref(ReuseItemTemplate), {
                                                item,
                                                active,
                                                index
                                              }, null, 8, ["item", "active", "index"])
                                            ]),
                                            _: 2
                                          }, 1040, ["class"])
                                        ]),
                                        _: 2
                                      }, 1040)
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent4, _scopeId3));
                            }
                            _push4(`<!--]-->`);
                          });
                          _push4(`<!--]-->`);
                        } else {
                          return [
                            (openBlock(true), createBlock(Fragment, null, renderList(group, (item, index) => {
                              return openBlock(), createBlock(Fragment, {
                                key: `group-${groupIndex}-${index}`
                              }, [
                                item.type === "label" ? (openBlock(), createBlock(unref(DropdownMenu).Label, {
                                  key: 0,
                                  "data-slot": "label",
                                  class: __props.ui.label({ class: [__props.uiOverride?.label, item.ui?.label, item.class] })
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, 8, ["item", "index"])
                                  ]),
                                  _: 2
                                }, 1032, ["class"])) : item.type === "separator" ? (openBlock(), createBlock(unref(DropdownMenu).Separator, {
                                  key: 1,
                                  "data-slot": "separator",
                                  class: __props.ui.separator({ class: [__props.uiOverride?.separator, item.ui?.separator, item.class] })
                                }, null, 8, ["class"])) : item?.children?.length ? (openBlock(), createBlock(unref(DropdownMenu).Sub, {
                                  key: 2,
                                  open: item.open,
                                  "default-open": item.defaultOpen
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(DropdownMenu).SubTrigger, {
                                      as: "button",
                                      type: "button",
                                      disabled: item.disabled,
                                      "text-value": unref(get)(item, props.labelKey),
                                      "data-slot": "item",
                                      class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color })
                                    }, {
                                      default: withCtx(() => [
                                        createVNode(unref(ReuseItemTemplate), {
                                          item,
                                          index
                                        }, null, 8, ["item", "index"])
                                      ]),
                                      _: 2
                                    }, 1032, ["disabled", "text-value", "class"]),
                                    createVNode(_sfc_main$4, mergeProps({
                                      sub: "",
                                      class: item.ui?.content,
                                      ui: __props.ui,
                                      "ui-override": __props.uiOverride,
                                      portal: __props.portal,
                                      items: item.children,
                                      align: "start",
                                      "align-offset": -4,
                                      "side-offset": 3,
                                      "label-key": __props.labelKey,
                                      "description-key": __props.descriptionKey,
                                      "checked-icon": __props.checkedIcon,
                                      "loading-icon": __props.loadingIcon,
                                      "external-icon": __props.externalIcon
                                    }, { ref_for: true }, item.content), createSlots({ _: 2 }, [
                                      renderList(getProxySlots(), (_4, name) => {
                                        return {
                                          name,
                                          fn: withCtx((slotData) => [
                                            renderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData))
                                          ])
                                        };
                                      })
                                    ]), 1040, ["class", "ui", "ui-override", "portal", "items", "label-key", "description-key", "checked-icon", "loading-icon", "external-icon"])
                                  ]),
                                  _: 2
                                }, 1032, ["open", "default-open"])) : item.type === "checkbox" ? (openBlock(), createBlock(unref(DropdownMenu).CheckboxItem, {
                                  key: 3,
                                  "model-value": item.checked,
                                  disabled: item.disabled,
                                  "text-value": unref(get)(item, props.labelKey),
                                  "data-slot": "item",
                                  class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color }),
                                  "onUpdate:modelValue": item.onUpdateChecked,
                                  onSelect: item.onSelect
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, 8, ["item", "index"])
                                  ]),
                                  _: 2
                                }, 1032, ["model-value", "disabled", "text-value", "class", "onUpdate:modelValue", "onSelect"])) : (openBlock(), createBlock(unref(DropdownMenu).Item, {
                                  key: 4,
                                  "as-child": "",
                                  disabled: item.disabled,
                                  "text-value": unref(get)(item, props.labelKey),
                                  onSelect: item.onSelect
                                }, {
                                  default: withCtx(() => [
                                    createVNode(_sfc_main$k, mergeProps({ ref_for: true }, unref(pickLinkProps)(item), { custom: "" }), {
                                      default: withCtx(({ active, ...slotProps }) => [
                                        createVNode(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                          "data-slot": "item",
                                          class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                        }), {
                                          default: withCtx(() => [
                                            createVNode(unref(ReuseItemTemplate), {
                                              item,
                                              active,
                                              index
                                            }, null, 8, ["item", "active", "index"])
                                          ]),
                                          _: 2
                                        }, 1040, ["class"])
                                      ]),
                                      _: 2
                                    }, 1040)
                                  ]),
                                  _: 2
                                }, 1032, ["disabled", "text-value", "onSelect"]))
                              ], 64);
                            }), 128))
                          ];
                        }
                      }),
                      _: 2
                    }, _parent3, _scopeId2));
                  });
                  _push3(`<!--]--></div>`);
                  ssrRenderSlot(_ctx.$slots, "default", {}, null, _push3, _parent3, _scopeId2);
                  ssrRenderSlot(_ctx.$slots, "content-bottom", {
                    sub: __props.sub ?? false
                  }, null, _push3, _parent3, _scopeId2);
                } else {
                  return [
                    renderSlot(_ctx.$slots, "content-top", {
                      sub: __props.sub ?? false
                    }),
                    createVNode("div", {
                      role: "presentation",
                      "data-slot": "viewport",
                      class: __props.ui.viewport({ class: __props.uiOverride?.viewport })
                    }, [
                      (openBlock(true), createBlock(Fragment, null, renderList(groups.value, (group, groupIndex) => {
                        return openBlock(), createBlock(unref(DropdownMenu).Group, {
                          key: `group-${groupIndex}`,
                          "data-slot": "group",
                          class: __props.ui.group({ class: __props.uiOverride?.group })
                        }, {
                          default: withCtx(() => [
                            (openBlock(true), createBlock(Fragment, null, renderList(group, (item, index) => {
                              return openBlock(), createBlock(Fragment, {
                                key: `group-${groupIndex}-${index}`
                              }, [
                                item.type === "label" ? (openBlock(), createBlock(unref(DropdownMenu).Label, {
                                  key: 0,
                                  "data-slot": "label",
                                  class: __props.ui.label({ class: [__props.uiOverride?.label, item.ui?.label, item.class] })
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, 8, ["item", "index"])
                                  ]),
                                  _: 2
                                }, 1032, ["class"])) : item.type === "separator" ? (openBlock(), createBlock(unref(DropdownMenu).Separator, {
                                  key: 1,
                                  "data-slot": "separator",
                                  class: __props.ui.separator({ class: [__props.uiOverride?.separator, item.ui?.separator, item.class] })
                                }, null, 8, ["class"])) : item?.children?.length ? (openBlock(), createBlock(unref(DropdownMenu).Sub, {
                                  key: 2,
                                  open: item.open,
                                  "default-open": item.defaultOpen
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(DropdownMenu).SubTrigger, {
                                      as: "button",
                                      type: "button",
                                      disabled: item.disabled,
                                      "text-value": unref(get)(item, props.labelKey),
                                      "data-slot": "item",
                                      class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color })
                                    }, {
                                      default: withCtx(() => [
                                        createVNode(unref(ReuseItemTemplate), {
                                          item,
                                          index
                                        }, null, 8, ["item", "index"])
                                      ]),
                                      _: 2
                                    }, 1032, ["disabled", "text-value", "class"]),
                                    createVNode(_sfc_main$4, mergeProps({
                                      sub: "",
                                      class: item.ui?.content,
                                      ui: __props.ui,
                                      "ui-override": __props.uiOverride,
                                      portal: __props.portal,
                                      items: item.children,
                                      align: "start",
                                      "align-offset": -4,
                                      "side-offset": 3,
                                      "label-key": __props.labelKey,
                                      "description-key": __props.descriptionKey,
                                      "checked-icon": __props.checkedIcon,
                                      "loading-icon": __props.loadingIcon,
                                      "external-icon": __props.externalIcon
                                    }, { ref_for: true }, item.content), createSlots({ _: 2 }, [
                                      renderList(getProxySlots(), (_3, name) => {
                                        return {
                                          name,
                                          fn: withCtx((slotData) => [
                                            renderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData))
                                          ])
                                        };
                                      })
                                    ]), 1040, ["class", "ui", "ui-override", "portal", "items", "label-key", "description-key", "checked-icon", "loading-icon", "external-icon"])
                                  ]),
                                  _: 2
                                }, 1032, ["open", "default-open"])) : item.type === "checkbox" ? (openBlock(), createBlock(unref(DropdownMenu).CheckboxItem, {
                                  key: 3,
                                  "model-value": item.checked,
                                  disabled: item.disabled,
                                  "text-value": unref(get)(item, props.labelKey),
                                  "data-slot": "item",
                                  class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color }),
                                  "onUpdate:modelValue": item.onUpdateChecked,
                                  onSelect: item.onSelect
                                }, {
                                  default: withCtx(() => [
                                    createVNode(unref(ReuseItemTemplate), {
                                      item,
                                      index
                                    }, null, 8, ["item", "index"])
                                  ]),
                                  _: 2
                                }, 1032, ["model-value", "disabled", "text-value", "class", "onUpdate:modelValue", "onSelect"])) : (openBlock(), createBlock(unref(DropdownMenu).Item, {
                                  key: 4,
                                  "as-child": "",
                                  disabled: item.disabled,
                                  "text-value": unref(get)(item, props.labelKey),
                                  onSelect: item.onSelect
                                }, {
                                  default: withCtx(() => [
                                    createVNode(_sfc_main$k, mergeProps({ ref_for: true }, unref(pickLinkProps)(item), { custom: "" }), {
                                      default: withCtx(({ active, ...slotProps }) => [
                                        createVNode(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                          "data-slot": "item",
                                          class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                        }), {
                                          default: withCtx(() => [
                                            createVNode(unref(ReuseItemTemplate), {
                                              item,
                                              active,
                                              index
                                            }, null, 8, ["item", "active", "index"])
                                          ]),
                                          _: 2
                                        }, 1040, ["class"])
                                      ]),
                                      _: 2
                                    }, 1040)
                                  ]),
                                  _: 2
                                }, 1032, ["disabled", "text-value", "onSelect"]))
                              ], 64);
                            }), 128))
                          ]),
                          _: 2
                        }, 1032, ["class"]);
                      }), 128))
                    ], 2),
                    renderSlot(_ctx.$slots, "default"),
                    renderSlot(_ctx.$slots, "content-bottom", {
                      sub: __props.sub ?? false
                    })
                  ];
                }
              }),
              _: 3
            }), _parent2, _scopeId);
          } else {
            return [
              (openBlock(), createBlock(resolveDynamicComponent(__props.sub ? unref(DropdownMenu).SubContent : unref(DropdownMenu).Content), mergeProps({
                "data-slot": "content",
                class: __props.ui.content({ class: [__props.uiOverride?.content, props.class] })
              }, unref(contentProps)), {
                default: withCtx(() => [
                  renderSlot(_ctx.$slots, "content-top", {
                    sub: __props.sub ?? false
                  }),
                  createVNode("div", {
                    role: "presentation",
                    "data-slot": "viewport",
                    class: __props.ui.viewport({ class: __props.uiOverride?.viewport })
                  }, [
                    (openBlock(true), createBlock(Fragment, null, renderList(groups.value, (group, groupIndex) => {
                      return openBlock(), createBlock(unref(DropdownMenu).Group, {
                        key: `group-${groupIndex}`,
                        "data-slot": "group",
                        class: __props.ui.group({ class: __props.uiOverride?.group })
                      }, {
                        default: withCtx(() => [
                          (openBlock(true), createBlock(Fragment, null, renderList(group, (item, index) => {
                            return openBlock(), createBlock(Fragment, {
                              key: `group-${groupIndex}-${index}`
                            }, [
                              item.type === "label" ? (openBlock(), createBlock(unref(DropdownMenu).Label, {
                                key: 0,
                                "data-slot": "label",
                                class: __props.ui.label({ class: [__props.uiOverride?.label, item.ui?.label, item.class] })
                              }, {
                                default: withCtx(() => [
                                  createVNode(unref(ReuseItemTemplate), {
                                    item,
                                    index
                                  }, null, 8, ["item", "index"])
                                ]),
                                _: 2
                              }, 1032, ["class"])) : item.type === "separator" ? (openBlock(), createBlock(unref(DropdownMenu).Separator, {
                                key: 1,
                                "data-slot": "separator",
                                class: __props.ui.separator({ class: [__props.uiOverride?.separator, item.ui?.separator, item.class] })
                              }, null, 8, ["class"])) : item?.children?.length ? (openBlock(), createBlock(unref(DropdownMenu).Sub, {
                                key: 2,
                                open: item.open,
                                "default-open": item.defaultOpen
                              }, {
                                default: withCtx(() => [
                                  createVNode(unref(DropdownMenu).SubTrigger, {
                                    as: "button",
                                    type: "button",
                                    disabled: item.disabled,
                                    "text-value": unref(get)(item, props.labelKey),
                                    "data-slot": "item",
                                    class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color })
                                  }, {
                                    default: withCtx(() => [
                                      createVNode(unref(ReuseItemTemplate), {
                                        item,
                                        index
                                      }, null, 8, ["item", "index"])
                                    ]),
                                    _: 2
                                  }, 1032, ["disabled", "text-value", "class"]),
                                  createVNode(_sfc_main$4, mergeProps({
                                    sub: "",
                                    class: item.ui?.content,
                                    ui: __props.ui,
                                    "ui-override": __props.uiOverride,
                                    portal: __props.portal,
                                    items: item.children,
                                    align: "start",
                                    "align-offset": -4,
                                    "side-offset": 3,
                                    "label-key": __props.labelKey,
                                    "description-key": __props.descriptionKey,
                                    "checked-icon": __props.checkedIcon,
                                    "loading-icon": __props.loadingIcon,
                                    "external-icon": __props.externalIcon
                                  }, { ref_for: true }, item.content), createSlots({ _: 2 }, [
                                    renderList(getProxySlots(), (_2, name) => {
                                      return {
                                        name,
                                        fn: withCtx((slotData) => [
                                          renderSlot(_ctx.$slots, name, mergeProps({ ref_for: true }, slotData))
                                        ])
                                      };
                                    })
                                  ]), 1040, ["class", "ui", "ui-override", "portal", "items", "label-key", "description-key", "checked-icon", "loading-icon", "external-icon"])
                                ]),
                                _: 2
                              }, 1032, ["open", "default-open"])) : item.type === "checkbox" ? (openBlock(), createBlock(unref(DropdownMenu).CheckboxItem, {
                                key: 3,
                                "model-value": item.checked,
                                disabled: item.disabled,
                                "text-value": unref(get)(item, props.labelKey),
                                "data-slot": "item",
                                class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color }),
                                "onUpdate:modelValue": item.onUpdateChecked,
                                onSelect: item.onSelect
                              }, {
                                default: withCtx(() => [
                                  createVNode(unref(ReuseItemTemplate), {
                                    item,
                                    index
                                  }, null, 8, ["item", "index"])
                                ]),
                                _: 2
                              }, 1032, ["model-value", "disabled", "text-value", "class", "onUpdate:modelValue", "onSelect"])) : (openBlock(), createBlock(unref(DropdownMenu).Item, {
                                key: 4,
                                "as-child": "",
                                disabled: item.disabled,
                                "text-value": unref(get)(item, props.labelKey),
                                onSelect: item.onSelect
                              }, {
                                default: withCtx(() => [
                                  createVNode(_sfc_main$k, mergeProps({ ref_for: true }, unref(pickLinkProps)(item), { custom: "" }), {
                                    default: withCtx(({ active, ...slotProps }) => [
                                      createVNode(_sfc_main$l, mergeProps({ ref_for: true }, slotProps, {
                                        "data-slot": "item",
                                        class: __props.ui.item({ class: [__props.uiOverride?.item, item.ui?.item, item.class], color: item?.color, active })
                                      }), {
                                        default: withCtx(() => [
                                          createVNode(unref(ReuseItemTemplate), {
                                            item,
                                            active,
                                            index
                                          }, null, 8, ["item", "active", "index"])
                                        ]),
                                        _: 2
                                      }, 1040, ["class"])
                                    ]),
                                    _: 2
                                  }, 1040)
                                ]),
                                _: 2
                              }, 1032, ["disabled", "text-value", "onSelect"]))
                            ], 64);
                          }), 128))
                        ]),
                        _: 2
                      }, 1032, ["class"]);
                    }), 128))
                  ], 2),
                  renderSlot(_ctx.$slots, "default"),
                  renderSlot(_ctx.$slots, "content-bottom", {
                    sub: __props.sub ?? false
                  })
                ]),
                _: 3
              }, 16, ["class"]))
            ];
          }
        }),
        _: 3
      }, _parent));
      _push(`<!--]-->`);
    };
  }
};
const _sfc_setup$4 = _sfc_main$4.setup;
_sfc_main$4.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../node_modules/.pnpm/@nuxt+ui@4.3.0_ce70e36b2b2e96ffad445540e21eec42/node_modules/@nuxt/ui/dist/runtime/components/DropdownMenuContent.vue");
  return _sfc_setup$4 ? _sfc_setup$4(props, ctx) : void 0;
};
const theme$1 = {
  "slots": {
    "content": "min-w-32 bg-default shadow-lg rounded-md ring ring-default overflow-hidden data-[state=open]:animate-[scale-in_100ms_ease-out] data-[state=closed]:animate-[scale-out_100ms_ease-in] origin-(--reka-dropdown-menu-content-transform-origin) flex flex-col",
    "viewport": "relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1",
    "arrow": "fill-default",
    "group": "p-1 isolate",
    "label": "w-full flex items-center font-semibold text-highlighted",
    "separator": "-mx-1 my-1 h-px bg-border",
    "item": "group relative w-full flex items-start select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",
    "itemLeadingIcon": "shrink-0",
    "itemLeadingAvatar": "shrink-0",
    "itemLeadingAvatarSize": "",
    "itemTrailing": "ms-auto inline-flex gap-1.5 items-center",
    "itemTrailingIcon": "shrink-0",
    "itemTrailingKbds": "hidden lg:inline-flex items-center shrink-0",
    "itemTrailingKbdsSize": "",
    "itemWrapper": "flex-1 flex flex-col text-start min-w-0",
    "itemLabel": "truncate",
    "itemDescription": "truncate text-muted",
    "itemLabelExternalIcon": "inline-block size-3 align-top text-dimmed"
  },
  "variants": {
    "color": {
      "primary": "",
      "secondary": "",
      "success": "",
      "info": "",
      "warning": "",
      "error": "",
      "neutral": ""
    },
    "active": {
      "true": {
        "item": "text-highlighted before:bg-elevated",
        "itemLeadingIcon": "text-default"
      },
      "false": {
        "item": [
          "text-default data-highlighted:text-highlighted data-[state=open]:text-highlighted data-highlighted:before:bg-elevated/50 data-[state=open]:before:bg-elevated/50",
          "transition-colors before:transition-colors"
        ],
        "itemLeadingIcon": [
          "text-dimmed group-data-highlighted:text-default group-data-[state=open]:text-default",
          "transition-colors"
        ]
      }
    },
    "loading": {
      "true": {
        "itemLeadingIcon": "animate-spin"
      }
    },
    "size": {
      "xs": {
        "label": "p-1 text-xs gap-1",
        "item": "p-1 text-xs gap-1",
        "itemLeadingIcon": "size-4",
        "itemLeadingAvatarSize": "3xs",
        "itemTrailingIcon": "size-4",
        "itemTrailingKbds": "gap-0.5",
        "itemTrailingKbdsSize": "sm"
      },
      "sm": {
        "label": "p-1.5 text-xs gap-1.5",
        "item": "p-1.5 text-xs gap-1.5",
        "itemLeadingIcon": "size-4",
        "itemLeadingAvatarSize": "3xs",
        "itemTrailingIcon": "size-4",
        "itemTrailingKbds": "gap-0.5",
        "itemTrailingKbdsSize": "sm"
      },
      "md": {
        "label": "p-1.5 text-sm gap-1.5",
        "item": "p-1.5 text-sm gap-1.5",
        "itemLeadingIcon": "size-5",
        "itemLeadingAvatarSize": "2xs",
        "itemTrailingIcon": "size-5",
        "itemTrailingKbds": "gap-0.5",
        "itemTrailingKbdsSize": "md"
      },
      "lg": {
        "label": "p-2 text-sm gap-2",
        "item": "p-2 text-sm gap-2",
        "itemLeadingIcon": "size-5",
        "itemLeadingAvatarSize": "2xs",
        "itemTrailingIcon": "size-5",
        "itemTrailingKbds": "gap-1",
        "itemTrailingKbdsSize": "md"
      },
      "xl": {
        "label": "p-2 text-base gap-2",
        "item": "p-2 text-base gap-2",
        "itemLeadingIcon": "size-6",
        "itemLeadingAvatarSize": "xs",
        "itemTrailingIcon": "size-6",
        "itemTrailingKbds": "gap-1",
        "itemTrailingKbdsSize": "lg"
      }
    }
  },
  "compoundVariants": [
    {
      "color": "primary",
      "active": false,
      "class": {
        "item": "text-primary data-highlighted:text-primary data-highlighted:before:bg-primary/10 data-[state=open]:before:bg-primary/10",
        "itemLeadingIcon": "text-primary/75 group-data-highlighted:text-primary group-data-[state=open]:text-primary"
      }
    },
    {
      "color": "secondary",
      "active": false,
      "class": {
        "item": "text-secondary data-highlighted:text-secondary data-highlighted:before:bg-secondary/10 data-[state=open]:before:bg-secondary/10",
        "itemLeadingIcon": "text-secondary/75 group-data-highlighted:text-secondary group-data-[state=open]:text-secondary"
      }
    },
    {
      "color": "success",
      "active": false,
      "class": {
        "item": "text-success data-highlighted:text-success data-highlighted:before:bg-success/10 data-[state=open]:before:bg-success/10",
        "itemLeadingIcon": "text-success/75 group-data-highlighted:text-success group-data-[state=open]:text-success"
      }
    },
    {
      "color": "info",
      "active": false,
      "class": {
        "item": "text-info data-highlighted:text-info data-highlighted:before:bg-info/10 data-[state=open]:before:bg-info/10",
        "itemLeadingIcon": "text-info/75 group-data-highlighted:text-info group-data-[state=open]:text-info"
      }
    },
    {
      "color": "warning",
      "active": false,
      "class": {
        "item": "text-warning data-highlighted:text-warning data-highlighted:before:bg-warning/10 data-[state=open]:before:bg-warning/10",
        "itemLeadingIcon": "text-warning/75 group-data-highlighted:text-warning group-data-[state=open]:text-warning"
      }
    },
    {
      "color": "error",
      "active": false,
      "class": {
        "item": "text-error data-highlighted:text-error data-highlighted:before:bg-error/10 data-[state=open]:before:bg-error/10",
        "itemLeadingIcon": "text-error/75 group-data-highlighted:text-error group-data-[state=open]:text-error"
      }
    },
    {
      "color": "primary",
      "active": true,
      "class": {
        "item": "text-primary before:bg-primary/10",
        "itemLeadingIcon": "text-primary"
      }
    },
    {
      "color": "secondary",
      "active": true,
      "class": {
        "item": "text-secondary before:bg-secondary/10",
        "itemLeadingIcon": "text-secondary"
      }
    },
    {
      "color": "success",
      "active": true,
      "class": {
        "item": "text-success before:bg-success/10",
        "itemLeadingIcon": "text-success"
      }
    },
    {
      "color": "info",
      "active": true,
      "class": {
        "item": "text-info before:bg-info/10",
        "itemLeadingIcon": "text-info"
      }
    },
    {
      "color": "warning",
      "active": true,
      "class": {
        "item": "text-warning before:bg-warning/10",
        "itemLeadingIcon": "text-warning"
      }
    },
    {
      "color": "error",
      "active": true,
      "class": {
        "item": "text-error before:bg-error/10",
        "itemLeadingIcon": "text-error"
      }
    }
  ],
  "defaultVariants": {
    "size": "md"
  }
};
const _sfc_main$3 = {
  __name: "UDropdownMenu",
  __ssrInlineRender: true,
  props: {
    size: { type: null, required: false },
    items: { type: null, required: false },
    checkedIcon: { type: null, required: false },
    loadingIcon: { type: null, required: false },
    externalIcon: { type: [Boolean, String], required: false, skipCheck: true, default: true },
    content: { type: Object, required: false },
    arrow: { type: [Boolean, Object], required: false },
    portal: { type: [Boolean, String], required: false, skipCheck: true, default: true },
    labelKey: { type: null, required: false, default: "label" },
    descriptionKey: { type: null, required: false, default: "description" },
    disabled: { type: Boolean, required: false },
    class: { type: null, required: false },
    ui: { type: null, required: false },
    defaultOpen: { type: Boolean, required: false },
    open: { type: Boolean, required: false },
    modal: { type: Boolean, required: false, default: true }
  },
  emits: ["update:open"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const slots = useSlots();
    const appConfig = useAppConfig();
    const rootProps = useForwardPropsEmits(reactivePick(props, "defaultOpen", "open", "modal"), emits);
    const contentProps = toRef(() => defu(props.content, { side: "bottom", sideOffset: 8, collisionPadding: 8 }));
    const arrowProps = toRef(() => props.arrow);
    const getProxySlots = () => omit(slots, ["default"]);
    const ui = computed(() => tv({ extend: tv(theme$1), ...appConfig.ui?.dropdownMenu || {} })({
      size: props.size
    }));
    return (_ctx, _push, _parent, _attrs) => {
      _push(ssrRenderComponent(unref(DropdownMenuRoot_default), mergeProps(unref(rootProps), _attrs), {
        default: withCtx(({ open }, _push2, _parent2, _scopeId) => {
          if (_push2) {
            if (!!slots.default) {
              _push2(ssrRenderComponent(unref(DropdownMenuTrigger_default), {
                "as-child": "",
                class: props.class,
                disabled: __props.disabled
              }, {
                default: withCtx((_, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    ssrRenderSlot(_ctx.$slots, "default", { open }, null, _push3, _parent3, _scopeId2);
                  } else {
                    return [
                      renderSlot(_ctx.$slots, "default", { open })
                    ];
                  }
                }),
                _: 2
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
            _push2(ssrRenderComponent(_sfc_main$4, mergeProps({
              class: ui.value.content({ class: [!slots.default && props.class, props.ui?.content] }),
              ui: ui.value,
              "ui-override": props.ui
            }, contentProps.value, {
              items: __props.items,
              portal: __props.portal,
              "label-key": __props.labelKey,
              "description-key": __props.descriptionKey,
              "checked-icon": __props.checkedIcon,
              "loading-icon": __props.loadingIcon,
              "external-icon": __props.externalIcon
            }), createSlots({
              default: withCtx((_, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  if (!!__props.arrow) {
                    _push3(ssrRenderComponent(unref(DropdownMenuArrow_default), mergeProps(arrowProps.value, {
                      "data-slot": "arrow",
                      class: ui.value.arrow({ class: props.ui?.arrow })
                    }), null, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                } else {
                  return [
                    !!__props.arrow ? (openBlock(), createBlock(unref(DropdownMenuArrow_default), mergeProps({ key: 0 }, arrowProps.value, {
                      "data-slot": "arrow",
                      class: ui.value.arrow({ class: props.ui?.arrow })
                    }), null, 16, ["class"])) : createCommentVNode("", true)
                  ];
                }
              }),
              _: 2
            }, [
              renderList(getProxySlots(), (_, name) => {
                return {
                  name,
                  fn: withCtx((slotData, _push3, _parent3, _scopeId2) => {
                    if (_push3) {
                      ssrRenderSlot(_ctx.$slots, name, slotData, null, _push3, _parent3, _scopeId2);
                    } else {
                      return [
                        renderSlot(_ctx.$slots, name, slotData)
                      ];
                    }
                  })
                };
              })
            ]), _parent2, _scopeId));
          } else {
            return [
              !!slots.default ? (openBlock(), createBlock(unref(DropdownMenuTrigger_default), {
                key: 0,
                "as-child": "",
                class: props.class,
                disabled: __props.disabled
              }, {
                default: withCtx(() => [
                  renderSlot(_ctx.$slots, "default", { open })
                ]),
                _: 2
              }, 1032, ["class", "disabled"])) : createCommentVNode("", true),
              createVNode(_sfc_main$4, mergeProps({
                class: ui.value.content({ class: [!slots.default && props.class, props.ui?.content] }),
                ui: ui.value,
                "ui-override": props.ui
              }, contentProps.value, {
                items: __props.items,
                portal: __props.portal,
                "label-key": __props.labelKey,
                "description-key": __props.descriptionKey,
                "checked-icon": __props.checkedIcon,
                "loading-icon": __props.loadingIcon,
                "external-icon": __props.externalIcon
              }), createSlots({
                default: withCtx(() => [
                  !!__props.arrow ? (openBlock(), createBlock(unref(DropdownMenuArrow_default), mergeProps({ key: 0 }, arrowProps.value, {
                    "data-slot": "arrow",
                    class: ui.value.arrow({ class: props.ui?.arrow })
                  }), null, 16, ["class"])) : createCommentVNode("", true)
                ]),
                _: 2
              }, [
                renderList(getProxySlots(), (_, name) => {
                  return {
                    name,
                    fn: withCtx((slotData) => [
                      renderSlot(_ctx.$slots, name, slotData)
                    ])
                  };
                })
              ]), 1040, ["class", "ui", "ui-override", "items", "portal", "label-key", "description-key", "checked-icon", "loading-icon", "external-icon"])
            ];
          }
        }),
        _: 3
      }, _parent));
    };
  }
};
const _sfc_setup$3 = _sfc_main$3.setup;
_sfc_main$3.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../node_modules/.pnpm/@nuxt+ui@4.3.0_ce70e36b2b2e96ffad445540e21eec42/node_modules/@nuxt/ui/dist/runtime/components/DropdownMenu.vue");
  return _sfc_setup$3 ? _sfc_setup$3(props, ctx) : void 0;
};
const theme = {
  "slots": {
    "root": [
      "relative inline-flex items-center",
      "flex-wrap"
    ],
    "base": [
      "rounded-md",
      "transition-colors"
    ],
    "leading": "absolute inset-y-0 start-0 flex items-center",
    "leadingIcon": "shrink-0 text-dimmed",
    "leadingAvatar": "shrink-0",
    "leadingAvatarSize": "",
    "trailing": "absolute inset-y-0 end-0 flex items-center",
    "trailingIcon": "shrink-0 text-dimmed",
    "item": 'px-1.5 py-0.5 rounded-sm font-medium inline-flex items-center gap-0.5 ring ring-inset ring-accented bg-elevated text-default data-disabled:cursor-not-allowed data-disabled:opacity-75 wrap-anywhere data-[state="active"]:bg-accented',
    "itemText": "",
    "itemDelete": [
      "inline-flex items-center rounded-xs text-dimmed hover:text-default hover:bg-accented/75 disabled:pointer-events-none",
      "transition-colors"
    ],
    "itemDeleteIcon": "shrink-0",
    "input": "flex-1 border-0 bg-transparent placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75"
  },
  "variants": {
    "fieldGroup": {
      "horizontal": {
        "root": "group has-focus-visible:z-[1]",
        "base": "group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"
      },
      "vertical": {
        "root": "group has-focus-visible:z-[1]",
        "base": "group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"
      }
    },
    "size": {
      "xs": {
        "base": "px-2 py-1 text-xs gap-1",
        "leading": "ps-2",
        "trailing": "pe-2",
        "leadingIcon": "size-4",
        "leadingAvatarSize": "3xs",
        "trailingIcon": "size-4",
        "item": "text-[10px]/3",
        "itemDeleteIcon": "size-3"
      },
      "sm": {
        "base": "px-2.5 py-1.5 text-xs gap-1.5",
        "leading": "ps-2.5",
        "trailing": "pe-2.5",
        "leadingIcon": "size-4",
        "leadingAvatarSize": "3xs",
        "trailingIcon": "size-4",
        "item": "text-[10px]/3",
        "itemDeleteIcon": "size-3"
      },
      "md": {
        "base": "px-2.5 py-1.5 text-sm gap-1.5",
        "leading": "ps-2.5",
        "trailing": "pe-2.5",
        "leadingIcon": "size-5",
        "leadingAvatarSize": "2xs",
        "trailingIcon": "size-5",
        "item": "text-xs",
        "itemDeleteIcon": "size-3.5"
      },
      "lg": {
        "base": "px-3 py-2 text-sm gap-2",
        "leading": "ps-3",
        "trailing": "pe-3",
        "leadingIcon": "size-5",
        "leadingAvatarSize": "2xs",
        "trailingIcon": "size-5",
        "item": "text-xs",
        "itemDeleteIcon": "size-3.5"
      },
      "xl": {
        "base": "px-3 py-2 text-base gap-2",
        "leading": "ps-3",
        "trailing": "pe-3",
        "leadingIcon": "size-6",
        "leadingAvatarSize": "xs",
        "trailingIcon": "size-6",
        "item": "text-sm",
        "itemDeleteIcon": "size-4"
      }
    },
    "variant": {
      "outline": "text-highlighted bg-default ring ring-inset ring-accented",
      "soft": "text-highlighted bg-elevated/50 hover:bg-elevated has-focus:bg-elevated disabled:bg-elevated/50",
      "subtle": "text-highlighted bg-elevated ring ring-inset ring-accented",
      "ghost": "text-highlighted bg-transparent hover:bg-elevated has-focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",
      "none": "text-highlighted bg-transparent"
    },
    "color": {
      "primary": "",
      "secondary": "",
      "success": "",
      "info": "",
      "warning": "",
      "error": "",
      "neutral": ""
    },
    "leading": {
      "true": ""
    },
    "trailing": {
      "true": ""
    },
    "loading": {
      "true": ""
    },
    "highlight": {
      "true": ""
    },
    "type": {
      "file": "file:me-1.5 file:font-medium file:text-muted file:outline-none"
    }
  },
  "compoundVariants": [
    {
      "color": "primary",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-primary"
    },
    {
      "color": "secondary",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-secondary"
    },
    {
      "color": "success",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-success"
    },
    {
      "color": "info",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-info"
    },
    {
      "color": "warning",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-warning"
    },
    {
      "color": "error",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-error"
    },
    {
      "color": "primary",
      "highlight": true,
      "class": "ring ring-inset ring-primary"
    },
    {
      "color": "secondary",
      "highlight": true,
      "class": "ring ring-inset ring-secondary"
    },
    {
      "color": "success",
      "highlight": true,
      "class": "ring ring-inset ring-success"
    },
    {
      "color": "info",
      "highlight": true,
      "class": "ring ring-inset ring-info"
    },
    {
      "color": "warning",
      "highlight": true,
      "class": "ring ring-inset ring-warning"
    },
    {
      "color": "error",
      "highlight": true,
      "class": "ring ring-inset ring-error"
    },
    {
      "color": "neutral",
      "variant": [
        "outline",
        "subtle"
      ],
      "class": "has-focus-visible:ring-2 has-focus-visible:ring-inset has-focus-visible:ring-inverted"
    },
    {
      "color": "neutral",
      "highlight": true,
      "class": "ring ring-inset ring-inverted"
    },
    {
      "leading": true,
      "size": "xs",
      "class": "ps-7"
    },
    {
      "leading": true,
      "size": "sm",
      "class": "ps-8"
    },
    {
      "leading": true,
      "size": "md",
      "class": "ps-9"
    },
    {
      "leading": true,
      "size": "lg",
      "class": "ps-10"
    },
    {
      "leading": true,
      "size": "xl",
      "class": "ps-11"
    },
    {
      "trailing": true,
      "size": "xs",
      "class": "pe-7"
    },
    {
      "trailing": true,
      "size": "sm",
      "class": "pe-8"
    },
    {
      "trailing": true,
      "size": "md",
      "class": "pe-9"
    },
    {
      "trailing": true,
      "size": "lg",
      "class": "pe-10"
    },
    {
      "trailing": true,
      "size": "xl",
      "class": "pe-11"
    },
    {
      "loading": true,
      "leading": true,
      "class": {
        "leadingIcon": "animate-spin"
      }
    },
    {
      "loading": true,
      "leading": false,
      "trailing": true,
      "class": {
        "trailingIcon": "animate-spin"
      }
    }
  ],
  "defaultVariants": {
    "size": "md",
    "color": "primary",
    "variant": "outline"
  }
};
const _sfc_main$2 = /* @__PURE__ */ Object.assign({ inheritAttrs: false }, {
  __name: "UInputTags",
  __ssrInlineRender: true,
  props: {
    as: { type: null, required: false },
    placeholder: { type: String, required: false },
    maxLength: { type: Number, required: false },
    color: { type: null, required: false },
    variant: { type: null, required: false },
    size: { type: null, required: false },
    autofocus: { type: Boolean, required: false },
    autofocusDelay: { type: Number, required: false, default: 0 },
    deleteIcon: { type: null, required: false },
    highlight: { type: Boolean, required: false },
    class: { type: null, required: false },
    ui: { type: null, required: false },
    modelValue: { type: [Array, null], required: false },
    defaultValue: { type: Array, required: false },
    addOnPaste: { type: Boolean, required: false },
    addOnTab: { type: Boolean, required: false },
    addOnBlur: { type: Boolean, required: false },
    duplicate: { type: Boolean, required: false },
    disabled: { type: Boolean, required: false },
    delimiter: { type: null, required: false },
    max: { type: Number, required: false },
    id: { type: String, required: false },
    convertValue: { type: Function, required: false },
    displayValue: { type: Function, required: false },
    name: { type: String, required: false },
    required: { type: Boolean, required: false },
    icon: { type: null, required: false },
    avatar: { type: Object, required: false },
    leading: { type: Boolean, required: false },
    leadingIcon: { type: null, required: false },
    trailing: { type: Boolean, required: false },
    trailingIcon: { type: null, required: false },
    loading: { type: Boolean, required: false },
    loadingIcon: { type: null, required: false }
  },
  emits: ["change", "blur", "focus", "update:modelValue", "invalid", "addTag", "removeTag"],
  setup(__props, { expose: __expose, emit: __emit }) {
    const props = __props;
    const emits = __emit;
    const slots = useSlots();
    const appConfig = useAppConfig();
    const rootProps = useForwardPropsEmits(reactivePick(props, "as", "addOnPaste", "addOnTab", "addOnBlur", "duplicate", "delimiter", "max", "convertValue", "displayValue", "required"), emits);
    const { emitFormBlur, emitFormFocus, emitFormChange, emitFormInput, size: formGroupSize, color, id, name, highlight, disabled, ariaAttrs } = useFormField(props);
    const { orientation, size: fieldGroupSize } = useFieldGroup(props);
    const { isLeading, isTrailing, leadingIconName, trailingIconName } = useComponentIcons(props);
    const inputSize = computed(() => fieldGroupSize.value || formGroupSize.value);
    const ui = computed(() => tv({ extend: tv(theme), ...appConfig.ui?.inputTags || {} })({
      color: color.value,
      variant: props.variant,
      size: inputSize?.value,
      loading: props.loading,
      highlight: highlight.value,
      leading: isLeading.value || !!props.avatar || !!slots.leading,
      trailing: isTrailing.value || !!slots.trailing,
      fieldGroup: orientation.value
    }));
    const inputRef = useTemplateRef("inputRef");
    function onUpdate(value) {
      if (toRaw(props.modelValue) === value) {
        return;
      }
      const event = new Event("change", { target: { value } });
      emits("change", event);
      emitFormChange();
      emitFormInput();
    }
    function onBlur(event) {
      emits("blur", event);
      emitFormBlur();
    }
    function onFocus(event) {
      emits("focus", event);
      emitFormFocus();
    }
    __expose({
      inputRef: toRef(() => inputRef.value?.$el)
    });
    return (_ctx, _push, _parent, _attrs) => {
      _push(ssrRenderComponent(unref(TagsInputRoot_default), mergeProps({
        id: unref(id),
        "model-value": __props.modelValue,
        "default-value": __props.defaultValue,
        "data-slot": "root",
        class: ui.value.root({ class: [ui.value.base({ class: props.ui?.base }), props.ui?.root, props.class] })
      }, unref(rootProps), {
        name: unref(name),
        disabled: unref(disabled),
        "onUpdate:modelValue": onUpdate
      }, _attrs), {
        default: withCtx(({ modelValue: tags }, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<!--[-->`);
            ssrRenderList(tags, (item, index) => {
              _push2(ssrRenderComponent(unref(TagsInputItem_default), {
                key: index,
                value: item,
                "data-slot": "item",
                class: ui.value.item({ class: [props.ui?.item] })
              }, {
                default: withCtx((_, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(ssrRenderComponent(unref(TagsInputItemText_default), {
                      "data-slot": "itemText",
                      class: ui.value.itemText({ class: [props.ui?.itemText] })
                    }, {
                      default: withCtx((_2, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          if (!!slots["item-text"]) {
                            ssrRenderSlot(_ctx.$slots, "item-text", {
                              item,
                              index,
                              ui: ui.value
                            }, null, _push4, _parent4, _scopeId3);
                          } else {
                            _push4(`<!---->`);
                          }
                        } else {
                          return [
                            !!slots["item-text"] ? renderSlot(_ctx.$slots, "item-text", {
                              key: 0,
                              item,
                              index,
                              ui: ui.value
                            }) : createCommentVNode("", true)
                          ];
                        }
                      }),
                      _: 2
                    }, _parent3, _scopeId2));
                    _push3(ssrRenderComponent(unref(TagsInputItemDelete_default), {
                      "data-slot": "itemDelete",
                      class: ui.value.itemDelete({ class: [props.ui?.itemDelete] }),
                      disabled: unref(disabled)
                    }, {
                      default: withCtx((_2, _push4, _parent4, _scopeId3) => {
                        if (_push4) {
                          ssrRenderSlot(_ctx.$slots, "item-delete", {
                            item,
                            index,
                            ui: ui.value
                          }, () => {
                            _push4(ssrRenderComponent(_sfc_main$f, {
                              name: __props.deleteIcon || unref(appConfig).ui.icons.close,
                              "data-slot": "itemDeleteIcon",
                              class: ui.value.itemDeleteIcon({ class: [props.ui?.itemDeleteIcon] })
                            }, null, _parent4, _scopeId3));
                          }, _push4, _parent4, _scopeId3);
                        } else {
                          return [
                            renderSlot(_ctx.$slots, "item-delete", {
                              item,
                              index,
                              ui: ui.value
                            }, () => [
                              createVNode(_sfc_main$f, {
                                name: __props.deleteIcon || unref(appConfig).ui.icons.close,
                                "data-slot": "itemDeleteIcon",
                                class: ui.value.itemDeleteIcon({ class: [props.ui?.itemDeleteIcon] })
                              }, null, 8, ["name", "class"])
                            ])
                          ];
                        }
                      }),
                      _: 2
                    }, _parent3, _scopeId2));
                  } else {
                    return [
                      createVNode(unref(TagsInputItemText_default), {
                        "data-slot": "itemText",
                        class: ui.value.itemText({ class: [props.ui?.itemText] })
                      }, {
                        default: withCtx(() => [
                          !!slots["item-text"] ? renderSlot(_ctx.$slots, "item-text", {
                            key: 0,
                            item,
                            index,
                            ui: ui.value
                          }) : createCommentVNode("", true)
                        ]),
                        _: 2
                      }, 1032, ["class"]),
                      createVNode(unref(TagsInputItemDelete_default), {
                        "data-slot": "itemDelete",
                        class: ui.value.itemDelete({ class: [props.ui?.itemDelete] }),
                        disabled: unref(disabled)
                      }, {
                        default: withCtx(() => [
                          renderSlot(_ctx.$slots, "item-delete", {
                            item,
                            index,
                            ui: ui.value
                          }, () => [
                            createVNode(_sfc_main$f, {
                              name: __props.deleteIcon || unref(appConfig).ui.icons.close,
                              "data-slot": "itemDeleteIcon",
                              class: ui.value.itemDeleteIcon({ class: [props.ui?.itemDeleteIcon] })
                            }, null, 8, ["name", "class"])
                          ])
                        ]),
                        _: 2
                      }, 1032, ["class", "disabled"])
                    ];
                  }
                }),
                _: 2
              }, _parent2, _scopeId));
            });
            _push2(`<!--]-->`);
            _push2(ssrRenderComponent(unref(TagsInputInput_default), mergeProps({
              ref_key: "inputRef",
              ref: inputRef
            }, { ..._ctx.$attrs, ...unref(ariaAttrs) }, {
              placeholder: __props.placeholder,
              "max-length": __props.maxLength,
              "data-slot": "input",
              class: ui.value.input({ class: props.ui?.input }),
              onBlur,
              onFocus
            }), null, _parent2, _scopeId));
            ssrRenderSlot(_ctx.$slots, "default", { ui: ui.value }, null, _push2, _parent2, _scopeId);
            if (unref(isLeading) || !!__props.avatar || !!slots.leading) {
              _push2(`<span data-slot="leading" class="${ssrRenderClass(ui.value.leading({ class: props.ui?.leading }))}"${_scopeId}>`);
              ssrRenderSlot(_ctx.$slots, "leading", { ui: ui.value }, () => {
                if (unref(isLeading) && unref(leadingIconName)) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: unref(leadingIconName),
                    "data-slot": "leadingIcon",
                    class: ui.value.leadingIcon({ class: props.ui?.leadingIcon })
                  }, null, _parent2, _scopeId));
                } else if (!!__props.avatar) {
                  _push2(ssrRenderComponent(_sfc_main$e, mergeProps({
                    size: props.ui?.leadingAvatarSize || ui.value.leadingAvatarSize()
                  }, __props.avatar, {
                    "data-slot": "leadingAvatar",
                    class: ui.value.leadingAvatar({ class: props.ui?.leadingAvatar })
                  }), null, _parent2, _scopeId));
                } else {
                  _push2(`<!---->`);
                }
              }, _push2, _parent2, _scopeId);
              _push2(`</span>`);
            } else {
              _push2(`<!---->`);
            }
            if (unref(isTrailing) || !!slots.trailing) {
              _push2(`<span data-slot="trailing" class="${ssrRenderClass(ui.value.trailing({ class: props.ui?.trailing }))}"${_scopeId}>`);
              ssrRenderSlot(_ctx.$slots, "trailing", { ui: ui.value }, () => {
                if (unref(trailingIconName)) {
                  _push2(ssrRenderComponent(_sfc_main$f, {
                    name: unref(trailingIconName),
                    "data-slot": "trailingIcon",
                    class: ui.value.trailingIcon({ class: props.ui?.trailingIcon })
                  }, null, _parent2, _scopeId));
                } else {
                  _push2(`<!---->`);
                }
              }, _push2, _parent2, _scopeId);
              _push2(`</span>`);
            } else {
              _push2(`<!---->`);
            }
          } else {
            return [
              (openBlock(true), createBlock(Fragment, null, renderList(tags, (item, index) => {
                return openBlock(), createBlock(unref(TagsInputItem_default), {
                  key: index,
                  value: item,
                  "data-slot": "item",
                  class: ui.value.item({ class: [props.ui?.item] })
                }, {
                  default: withCtx(() => [
                    createVNode(unref(TagsInputItemText_default), {
                      "data-slot": "itemText",
                      class: ui.value.itemText({ class: [props.ui?.itemText] })
                    }, {
                      default: withCtx(() => [
                        !!slots["item-text"] ? renderSlot(_ctx.$slots, "item-text", {
                          key: 0,
                          item,
                          index,
                          ui: ui.value
                        }) : createCommentVNode("", true)
                      ]),
                      _: 2
                    }, 1032, ["class"]),
                    createVNode(unref(TagsInputItemDelete_default), {
                      "data-slot": "itemDelete",
                      class: ui.value.itemDelete({ class: [props.ui?.itemDelete] }),
                      disabled: unref(disabled)
                    }, {
                      default: withCtx(() => [
                        renderSlot(_ctx.$slots, "item-delete", {
                          item,
                          index,
                          ui: ui.value
                        }, () => [
                          createVNode(_sfc_main$f, {
                            name: __props.deleteIcon || unref(appConfig).ui.icons.close,
                            "data-slot": "itemDeleteIcon",
                            class: ui.value.itemDeleteIcon({ class: [props.ui?.itemDeleteIcon] })
                          }, null, 8, ["name", "class"])
                        ])
                      ]),
                      _: 2
                    }, 1032, ["class", "disabled"])
                  ]),
                  _: 2
                }, 1032, ["value", "class"]);
              }), 128)),
              createVNode(unref(TagsInputInput_default), mergeProps({
                ref_key: "inputRef",
                ref: inputRef
              }, { ..._ctx.$attrs, ...unref(ariaAttrs) }, {
                placeholder: __props.placeholder,
                "max-length": __props.maxLength,
                "data-slot": "input",
                class: ui.value.input({ class: props.ui?.input }),
                onBlur,
                onFocus
              }), null, 16, ["placeholder", "max-length", "class"]),
              renderSlot(_ctx.$slots, "default", { ui: ui.value }),
              unref(isLeading) || !!__props.avatar || !!slots.leading ? (openBlock(), createBlock("span", {
                key: 0,
                "data-slot": "leading",
                class: ui.value.leading({ class: props.ui?.leading })
              }, [
                renderSlot(_ctx.$slots, "leading", { ui: ui.value }, () => [
                  unref(isLeading) && unref(leadingIconName) ? (openBlock(), createBlock(_sfc_main$f, {
                    key: 0,
                    name: unref(leadingIconName),
                    "data-slot": "leadingIcon",
                    class: ui.value.leadingIcon({ class: props.ui?.leadingIcon })
                  }, null, 8, ["name", "class"])) : !!__props.avatar ? (openBlock(), createBlock(_sfc_main$e, mergeProps({
                    key: 1,
                    size: props.ui?.leadingAvatarSize || ui.value.leadingAvatarSize()
                  }, __props.avatar, {
                    "data-slot": "leadingAvatar",
                    class: ui.value.leadingAvatar({ class: props.ui?.leadingAvatar })
                  }), null, 16, ["size", "class"])) : createCommentVNode("", true)
                ])
              ], 2)) : createCommentVNode("", true),
              unref(isTrailing) || !!slots.trailing ? (openBlock(), createBlock("span", {
                key: 1,
                "data-slot": "trailing",
                class: ui.value.trailing({ class: props.ui?.trailing })
              }, [
                renderSlot(_ctx.$slots, "trailing", { ui: ui.value }, () => [
                  unref(trailingIconName) ? (openBlock(), createBlock(_sfc_main$f, {
                    key: 0,
                    name: unref(trailingIconName),
                    "data-slot": "trailingIcon",
                    class: ui.value.trailingIcon({ class: props.ui?.trailingIcon })
                  }, null, 8, ["name", "class"])) : createCommentVNode("", true)
                ])
              ], 2)) : createCommentVNode("", true)
            ];
          }
        }),
        _: 3
      }, _parent));
    };
  }
});
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("../node_modules/.pnpm/@nuxt+ui@4.3.0_ce70e36b2b2e96ffad445540e21eec42/node_modules/@nuxt/ui/dist/runtime/components/InputTags.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
const _sfc_main$1 = /* @__PURE__ */ defineComponent({
  __name: "LocationPicker",
  __ssrInlineRender: true,
  props: {
    modelValue: { default: null },
    zoom: { default: 4 },
    class: { default: void 0 }
  },
  emits: ["update:modelValue", "pick"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit = __emit;
    const mapInstance = ref(null);
    const markerCoordinates = ref(null);
    const { locale } = useI18n();
    let clickHandler = null;
    const syncFromProps = (value) => {
      if (value) {
        markerCoordinates.value = [value.longitude, value.latitude];
        if (mapInstance.value) {
          const map = mapInstance.value;
          map.flyTo?.({
            center: markerCoordinates.value,
            zoom: Math.max(props.zoom ?? 4, 4),
            essential: true
          });
        }
      } else {
        markerCoordinates.value = null;
      }
    };
    watch(
      () => props.modelValue,
      (value) => {
        syncFromProps(value ?? null);
      },
      { immediate: true }
    );
    const updateValue = (latitude, longitude, shouldEmitPick = true) => {
      markerCoordinates.value = [longitude, latitude];
      emit("update:modelValue", { latitude, longitude });
      if (shouldEmitPick) {
        emit("pick", { latitude, longitude });
      }
    };
    const handleMapClick = (event) => {
      const point = event?.lngLat || event?.latlng || (Array.isArray(event) ? { lng: event[0], lat: event[1] } : null);
      if (!point) {
        return;
      }
      const latitude = typeof point.lat === "number" ? point.lat : point.latitude ?? point[1];
      const longitude = typeof point.lng === "number" ? point.lng : point.longitude ?? point[0];
      if (typeof latitude !== "number" || typeof longitude !== "number") {
        return;
      }
      updateValue(latitude, longitude);
    };
    const onMapLoad = (map) => {
      mapInstance.value = map;
      if (markerCoordinates.value) {
        const anyMap2 = map;
        anyMap2.setCenter?.(markerCoordinates.value);
        anyMap2.setZoom?.(Math.max(props.zoom ?? 4, 4));
      }
      const anyMap = map;
      if (typeof anyMap.on === "function") {
        clickHandler = (event) => handleMapClick(event);
        anyMap.on("click", clickHandler);
      }
    };
    return (_ctx, _push, _parent, _attrs) => {
      const _component_MapProvider = __nuxt_component_0$1;
      const _component_MapProviderMarker = __nuxt_component_1$1;
      _push(`<div${ssrRenderAttrs(mergeProps({
        class: ["relative w-full h-64 rounded-xl overflow-hidden", _ctx.$props.class]
      }, _attrs))}>`);
      _push(ssrRenderComponent(_component_MapProvider, {
        class: "w-full h-full",
        "map-id": "photo-location-picker",
        center: markerCoordinates.value ?? void 0,
        zoom: markerCoordinates.value ? Math.max(_ctx.$props.zoom ?? 4, 4) : _ctx.$props.zoom ?? 2,
        interactive: true,
        language: unref(locale),
        onLoad: onMapLoad
      }, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            if (markerCoordinates.value) {
              _push2(ssrRenderComponent(_component_MapProviderMarker, { lnglat: markerCoordinates.value }, {
                marker: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<div class="relative"${_scopeId2}><div class="absolute inset-0 animate-ping rounded-full bg-primary/40"${_scopeId2}></div><div class="relative size-4 rounded-full bg-primary border-2 border-white shadow"${_scopeId2}></div></div>`);
                  } else {
                    return [
                      createVNode("div", { class: "relative" }, [
                        createVNode("div", { class: "absolute inset-0 animate-ping rounded-full bg-primary/40" }),
                        createVNode("div", { class: "relative size-4 rounded-full bg-primary border-2 border-white shadow" })
                      ])
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
          } else {
            return [
              markerCoordinates.value ? (openBlock(), createBlock(_component_MapProviderMarker, {
                key: 0,
                lnglat: markerCoordinates.value
              }, {
                marker: withCtx(() => [
                  createVNode("div", { class: "relative" }, [
                    createVNode("div", { class: "absolute inset-0 animate-ping rounded-full bg-primary/40" }),
                    createVNode("div", { class: "relative size-4 rounded-full bg-primary border-2 border-white shadow" })
                  ])
                ]),
                _: 1
              }, 8, ["lnglat"])) : createCommentVNode("", true)
            ];
          }
        }),
        _: 1
      }, _parent));
      if (!markerCoordinates.value) {
        _push(`<div class="absolute inset-0 pointer-events-none flex items-center justify-center text-sm text-neutral-600 dark:text-neutral-400">`);
        ssrRenderSlot(_ctx.$slots, "empty", {}, null, _push, _parent);
        _push(`</div>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
    };
  }
});
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/map/LocationPicker.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
const __nuxt_component_27 = Object.assign(_sfc_main$1, { __name: "MapLocationPicker" });
function useUpload(options = {}) {
  const {
    timeout = 0,
    withCredentials = false,
    headers = {},
    speedSampleSize = 5,
    maxRetries = 3,
    retryDelay = 1e3
  } = options;
  const uploadStatus = ref({
    status: "idle",
    progress: {
      loaded: 0,
      total: 0,
      percentage: 0
    }
  });
  let currentXHR = null;
  const speedSamples = [];
  const calculateSpeed = (loaded) => {
    const now = Date.now();
    speedSamples.push({ timestamp: now, loaded });
    if (speedSamples.length > speedSampleSize) {
      speedSamples.shift();
    }
    if (speedSamples.length < 2) {
      return { speed: 0 };
    }
    const firstSample = speedSamples[0];
    const lastSample = speedSamples[speedSamples.length - 1];
    if (!firstSample || !lastSample) {
      return { speed: 0 };
    }
    const timeDiff = (lastSample.timestamp - firstSample.timestamp) / 1e3;
    const bytesDiff = lastSample.loaded - firstSample.loaded;
    const speed = timeDiff > 0 ? bytesDiff / timeDiff : 0;
    const total = uploadStatus.value.progress.total;
    const remaining = total - loaded;
    const timeRemaining = speed > 0 ? remaining / speed : void 0;
    return { speed, timeRemaining };
  };
  const updateStatus = (updates) => {
    uploadStatus.value = { ...uploadStatus.value, ...updates };
  };
  const updateProgress = (loaded, total) => {
    const percentage = total > 0 ? Math.round(loaded / total * 100) : 0;
    const { speed, timeRemaining } = calculateSpeed(loaded);
    const progress = {
      loaded,
      total,
      percentage,
      speed,
      timeRemaining
    };
    updateStatus({ progress });
  };
  const resetStatus = () => {
    speedSamples.length = 0;
    updateStatus({
      status: "idle",
      progress: {
        loaded: 0,
        total: 0,
        percentage: 0
      },
      error: void 0,
      startTime: void 0,
      endTime: void 0
    });
  };
  const uploadFile = async (file, signedUrl, callbacks = {}, attempt = 1) => {
    if (attempt === 1) {
      resetStatus();
    }
    return new Promise((resolve, reject) => {
      currentXHR = new (void 0)();
      const xhr = currentXHR;
      if (timeout > 0) {
        xhr.timeout = timeout;
      }
      xhr.withCredentials = withCredentials;
      const startTime = Date.now();
      updateStatus({ status: "uploading", startTime });
      callbacks.onStatusChange?.("uploading");
      xhr.upload.addEventListener("progress", (event) => {
        if (event.lengthComputable) {
          updateProgress(event.loaded, event.total);
          callbacks.onProgress?.(uploadStatus.value.progress);
        }
      });
      xhr.addEventListener("load", () => {
        const endTime = Date.now();
        updateStatus({ status: "success", endTime });
        callbacks.onStatusChange?.("success");
        callbacks.onSuccess?.(xhr);
        resolve(xhr);
      });
      xhr.addEventListener("error", () => {
        const endTime = Date.now();
        let errorMessage = "";
        if (xhr.status === 0) {
          errorMessage = "网络连接失败";
        } else if (xhr.status >= 400 && xhr.status < 500) {
          errorMessage = `客户端错误 (${xhr.status})`;
        } else if (xhr.status >= 500) {
          errorMessage = `服务器错误 (${xhr.status})`;
        } else {
          errorMessage = `网络错误 (状态码: ${xhr.status})`;
        }
        const canRetry = attempt < maxRetries && (xhr.status === 0 || // 网络错误
        xhr.status >= 500 || // 服务器错误
        xhr.status === 429);
        if (canRetry) {
          updateStatus({
            status: "error",
            error: `${errorMessage} (尝试 ${attempt}/${maxRetries})`,
            endTime
          });
          callbacks.onRetry?.(attempt, maxRetries);
          setTimeout(() => {
            uploadFile(file, signedUrl, callbacks, attempt + 1).then(resolve).catch(reject);
          }, retryDelay * attempt);
        } else {
          updateStatus({ status: "error", error: errorMessage, endTime });
          callbacks.onStatusChange?.("error");
          callbacks.onError?.(errorMessage, xhr);
          reject(new Error(errorMessage));
        }
      });
      xhr.addEventListener("timeout", () => {
        const endTime = Date.now();
        const errorMessage = `上传超时 (${timeout}ms)`;
        const canRetry = attempt < maxRetries;
        if (canRetry) {
          updateStatus({
            status: "error",
            error: `${errorMessage} (尝试 ${attempt}/${maxRetries})`,
            endTime
          });
          callbacks.onRetry?.(attempt, maxRetries);
          setTimeout(() => {
            uploadFile(file, signedUrl, callbacks, attempt + 1).then(resolve).catch(reject);
          }, retryDelay * attempt);
        } else {
          updateStatus({ status: "error", error: errorMessage, endTime });
          callbacks.onStatusChange?.("error");
          callbacks.onError?.(errorMessage, xhr);
          reject(new Error(errorMessage));
        }
      });
      xhr.addEventListener("abort", () => {
        const endTime = Date.now();
        updateStatus({ status: "aborted", endTime });
        callbacks.onStatusChange?.("aborted");
        callbacks.onAbort?.();
        reject(new Error("上传已中止"));
      });
      xhr.addEventListener("readystatechange", () => {
        if (xhr.readyState === (void 0).DONE) {
          if (xhr.status >= 200 && xhr.status < 300) {
            return;
          } else if (xhr.status >= 400) {
            const endTime = Date.now();
            let errorMessage = "";
            switch (xhr.status) {
              case 400:
                errorMessage = "请求格式错误";
                break;
              case 401:
                errorMessage = "未授权访问";
                break;
              case 403:
                errorMessage = "访问被拒绝";
                break;
              case 404:
                errorMessage = "上传接口不存在";
                break;
              case 409:
                errorMessage = "文件冲突";
                break;
              case 413:
                errorMessage = "文件过大";
                break;
              case 415:
                errorMessage = "不支持的文件类型";
                break;
              case 429:
                errorMessage = "上传频率过高";
                break;
              case 500:
                errorMessage = "服务器内部错误";
                break;
              case 502:
              case 503:
              case 504:
                errorMessage = "服务器暂时不可用";
                break;
              default:
                errorMessage = `HTTP 错误: ${xhr.status}`;
            }
            try {
              const responseText = xhr.responseText;
              if (responseText) {
                try {
                  const responseData = JSON.parse(responseText);
                  if (responseData.data?.message) {
                    errorMessage = responseData.data.title || errorMessage;
                  }
                } catch {
                  errorMessage += ` - ${responseText}`;
                }
              }
            } catch {
            }
            updateStatus({ status: "error", error: errorMessage, endTime });
            callbacks.onStatusChange?.("error");
            callbacks.onError?.(errorMessage, xhr);
          }
        }
      });
      xhr.open("PUT", signedUrl);
      xhr.setRequestHeader(
        "Content-Type",
        file.type || "application/octet-stream"
      );
      Object.entries(headers).forEach(([key, value]) => {
        xhr.setRequestHeader(key, value);
      });
      xhr.send(file);
    });
  };
  const abortUpload = () => {
    if (currentXHR && uploadStatus.value.status === "uploading") {
      currentXHR.abort();
    }
  };
  const formatBytes2 = (bytes) => {
    if (bytes === 0) return "0 B";
    const k = 1024;
    const sizes = ["B", "KB", "MB", "GB"];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
  };
  const formatTime = (seconds) => {
    if (!isFinite(seconds) || seconds < 0) return "计算中...";
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    const secs = Math.floor(seconds % 60);
    if (hours > 0) {
      return `${hours}:${minutes.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
    } else if (minutes > 0) {
      return `${minutes}:${secs.toString().padStart(2, "0")}`;
    } else {
      return `${secs}秒`;
    }
  };
  const isUploading = computed(() => uploadStatus.value.status === "uploading");
  const isIdle = computed(() => uploadStatus.value.status === "idle");
  const isSuccess = computed(() => uploadStatus.value.status === "success");
  const isError = computed(() => uploadStatus.value.status === "error");
  const isAborted = computed(() => uploadStatus.value.status === "aborted");
  const canAbort = computed(() => isUploading.value && currentXHR !== null);
  const formattedProgress = computed(() => {
    const { loaded, total, percentage, speed, timeRemaining } = uploadStatus.value.progress;
    return {
      percentage,
      loadedText: formatBytes2(loaded),
      totalText: formatBytes2(total),
      speedText: speed ? `${formatBytes2(speed)}/s` : "",
      timeRemainingText: timeRemaining ? formatTime(timeRemaining) : "",
      progressText: `${formatBytes2(loaded)} / ${formatBytes2(total)} (${percentage}%)`
    };
  });
  try {
  } catch {
  }
  return {
    uploadStatus: readonly(uploadStatus),
    isUploading,
    isIdle,
    isSuccess,
    isError,
    isAborted,
    canAbort,
    formattedProgress,
    uploadFile,
    abortUpload,
    resetStatus,
    formatBytes: formatBytes2,
    formatTime
  };
}
const MAX_FILE_SIZE = 256;
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "photos",
  __ssrInlineRender: true,
  setup(__props) {
    const { t: $t } = useI18n();
    const Rating = __nuxt_component_1;
    const columnNameMap = {
      thumbnailUrl: $t("dashboard.photos.table.columns.thumbnail.title"),
      id: $t("dashboard.photos.table.columns.id"),
      title: $t("dashboard.photos.table.columns.title"),
      tags: $t("dashboard.photos.table.columns.tags"),
      rating: $t("dashboard.photos.table.columns.rating"),
      isLivePhoto: $t("dashboard.photos.table.columns.isLivePhoto"),
      location: $t("dashboard.photos.table.columns.location"),
      dateTaken: $t("dashboard.photos.table.columns.dateTaken"),
      lastModified: $t("dashboard.photos.table.columns.lastModified"),
      fileSize: $t("dashboard.photos.table.columns.fileSize"),
      colorSpace: $t("dashboard.photos.table.columns.colorSpace"),
      reactions: $t("dashboard.photos.table.columns.reactions"),
      actions: $t("dashboard.photos.table.columns.actions")
    };
    useHead({
      title: $t("title.photos")
    });
    const dayjs = useDayjs();
    const { status, refresh } = usePhotos();
    const { filteredPhotos, selectedCounts, hasActiveFilters } = usePhotoFilters();
    const totalSelectedFilters = computed(() => {
      return Object.values(selectedCounts.value).reduce(
        (total, count) => total + count,
        0
      );
    });
    const reverseGeocodeLoading = ref({});
    const setReverseGeocodeLoading = (photoId, loading) => {
      if (loading) {
        reverseGeocodeLoading.value = {
          ...reverseGeocodeLoading.value,
          [photoId]: true
        };
      } else {
        const { [photoId]: _removed, ...rest } = reverseGeocodeLoading.value;
        reverseGeocodeLoading.value = rest;
      }
    };
    const reactionsData = ref({});
    const reactionsLoading = ref(false);
    const fetchReactions = async (photoIds) => {
      if (photoIds.length === 0) return;
      reactionsLoading.value = true;
      try {
        const data = await $fetch("/api/photos/reactions", {
          query: { ids: photoIds }
        });
        reactionsData.value = data;
      } catch (error) {
        console.error("获取表态数据失败:", error);
      } finally {
        reactionsLoading.value = false;
      }
    };
    const uploadingFiles = ref(/* @__PURE__ */ new Map());
    const editingPhoto = ref(null);
    const isEditModalOpen = ref(false);
    const isSavingMetadata = ref(false);
    const editFormState = reactive({
      title: "",
      description: "",
      tags: [],
      rating: null
    });
    const originalMetadata = ref({
      title: "",
      description: "",
      tags: [],
      location: null,
      rating: null
    });
    const locationSelection = ref(
      null
    );
    const locationTouched = ref(false);
    const normalizeTagList = (tags) => {
      const seen = /* @__PURE__ */ new Set();
      const normalized = [];
      for (const tag of tags) {
        const trimmed = tag.trim();
        if (!trimmed) continue;
        const key = trimmed.toLowerCase();
        if (seen.has(key)) continue;
        seen.add(key);
        normalized.push(trimmed);
      }
      return normalized;
    };
    const areTagListsEqual = (a, b) => {
      if (a.length !== b.length) {
        return false;
      }
      return a.every((tag, index) => tag === b[index]);
    };
    const tagsModel = computed({
      get: () => editFormState.tags,
      set: (value) => {
        const next = Array.isArray(value) ? normalizeTagList(value) : [];
        if (!areTagListsEqual(editFormState.tags, next)) {
          editFormState.tags = next;
        }
      }
    });
    const normalizedTitle = computed(() => editFormState.title.trim());
    const normalizedDescription = computed(() => editFormState.description.trim());
    const tagsChanged = computed(() => {
      const current = editFormState.tags;
      const original = originalMetadata.value.tags;
      return !areTagListsEqual(current, original);
    });
    const titleChanged = computed(
      () => normalizedTitle.value !== originalMetadata.value.title
    );
    const descriptionChanged = computed(
      () => normalizedDescription.value !== originalMetadata.value.description
    );
    const locationChanged = computed(() => {
      if (!locationTouched.value) {
        return false;
      }
      const current = locationSelection.value;
      const original = originalMetadata.value.location;
      if (!current && !original) {
        return false;
      }
      if (!current || !original) {
        return true;
      }
      return Math.abs(current.latitude - original.latitude) > 1e-6 || Math.abs(current.longitude - original.longitude) > 1e-6;
    });
    const ratingChanged = computed(
      () => editFormState.rating !== originalMetadata.value.rating
    );
    const isMetadataDirty = computed(
      () => titleChanged.value || descriptionChanged.value || tagsChanged.value || locationChanged.value || ratingChanged.value
    );
    const formattedCoordinates = computed(() => {
      if (!locationSelection.value) {
        return null;
      }
      return {
        latitude: locationSelection.value.latitude.toFixed(6),
        longitude: locationSelection.value.longitude.toFixed(6)
      };
    });
    const uploadImage = async (file, existingFileId) => {
      const fileName = file.name;
      const fileId = existingFileId || `${Date.now()}-${fileName}`;
      const uploadManager = useUpload({
        timeout: 10 * 60 * 1e3
        // 10分钟超时
      });
      let uploadingFile = uploadingFiles.value.get(fileId);
      if (!uploadingFile) {
        uploadingFile = {
          file,
          fileName,
          fileId,
          status: "preparing",
          canAbort: false,
          abortUpload: () => uploadManager.abortUpload()
        };
        uploadingFiles.value.set(fileId, uploadingFile);
      } else {
        uploadingFile.status = "preparing";
        uploadingFile.canAbort = false;
        uploadingFile.abortUpload = () => uploadManager.abortUpload();
        uploadingFiles.value = new Map(uploadingFiles.value);
      }
      try {
        uploadingFile.status = "preparing";
        const signedUrlResponse = await $fetch("/api/photos", {
          method: "POST",
          body: {
            fileName: file.name,
            contentType: file.type
          }
        });
        uploadingFile.signedUrlResponse = signedUrlResponse;
        if (signedUrlResponse.skipped) {
          uploadingFile.status = "skipped";
          uploadingFile.progress = 100;
          uploadingFile.canAbort = false;
          uploadingFiles.value = new Map(uploadingFiles.value);
          return;
        }
        uploadingFile.status = "uploading";
        uploadingFile.canAbort = true;
        uploadingFile.progress = 0;
        uploadingFiles.value = new Map(uploadingFiles.value);
        await uploadManager.uploadFile(file, signedUrlResponse.signedUrl, {
          onProgress: (progress) => {
            uploadingFile.progress = progress.percentage;
            uploadingFile.uploadProgress = {
              loaded: progress.loaded,
              total: progress.total,
              percentage: progress.percentage,
              speed: progress.speed,
              timeRemaining: progress.timeRemaining,
              speedText: progress.speed ? `${formatBytes(progress.speed)}/s` : "",
              timeRemainingText: progress.timeRemaining ? dayjs.duration(progress.timeRemaining, "seconds").humanize() : ""
            };
            uploadingFiles.value = new Map(uploadingFiles.value);
          },
          onStatusChange: (status2) => {
            uploadingFile.canAbort = status2 === "uploading";
            uploadingFiles.value = new Map(uploadingFiles.value);
          },
          onSuccess: async (_xhr) => {
            uploadingFile.status = "processing";
            uploadingFile.progress = 100;
            uploadingFile.canAbort = false;
            uploadingFile.stage = null;
            uploadingFiles.value = new Map(uploadingFiles.value);
            try {
              const isMovFile = file.type === "video/quicktime" || file.type === "video/mp4" || file.name.toLowerCase().endsWith(".mov");
              const resp = await $fetch("/api/queue/add-task", {
                method: "POST",
                body: {
                  payload: {
                    type: isMovFile ? "live-photo-video" : "photo",
                    storageKey: signedUrlResponse.fileKey
                  },
                  priority: isMovFile ? 0 : 1,
                  // Live Photo 视频优先级更低，确保图片优先处理
                  maxAttempts: 3
                }
              });
              if (resp.success) {
                uploadingFile.taskId = resp.taskId;
                uploadingFile.status = "processing";
                uploadingFiles.value = new Map(uploadingFiles.value);
                startTaskStatusCheck(resp.taskId, fileId);
              } else {
                uploadingFile.status = "error";
                uploadingFile.error = $t(
                  "dashboard.photos.messages.taskSubmitFailed"
                );
                uploadingFiles.value = new Map(uploadingFiles.value);
              }
            } catch (processError) {
              uploadingFile.status = "error";
              uploadingFile.error = `${$t("dashboard.photos.messages.taskSubmitFailed")}: ${processError.message}`;
              uploadingFile.canAbort = false;
              uploadingFiles.value = new Map(uploadingFiles.value);
            }
          },
          onError: (error) => {
            uploadingFile.status = "error";
            uploadingFile.error = error;
            uploadingFile.canAbort = false;
            uploadingFiles.value = new Map(uploadingFiles.value);
          }
        });
      } catch (error) {
        uploadingFile.status = "error";
        uploadingFile.canAbort = false;
        if (error.statusCode === 409 && error.data?.duplicate) {
          uploadingFile.status = "blocked";
          uploadingFile.error = error.data.title || $t("upload.duplicate.block.title");
        } else {
          uploadingFile.error = error.message || $t("dashboard.photos.messages.uploadFailed");
        }
        uploadingFiles.value = new Map(uploadingFiles.value);
        if (error.response?.status === 401) {
          uploadingFile.error = $t("dashboard.photos.errors.uploadUnauthorized");
        } else if (error.message?.includes("CORS")) {
          uploadingFile.error = $t("dashboard.photos.errors.uploadCorsError");
        } else if (error.message?.includes("NetworkError") || error.name === "TypeError") {
          uploadingFile.error = $t("dashboard.photos.errors.uploadNetworkError");
        } else if (error.message?.includes("上传到存储失败")) {
          uploadingFile.error = $t("dashboard.photos.messages.uploadFailed");
        }
        uploadingFiles.value = new Map(uploadingFiles.value);
      }
    };
    const toast = useToast();
    const selectedFiles = ref([]);
    const isUploadSlideoverOpen = ref(false);
    const hasSelectedFiles = computed(() => selectedFiles.value.length > 0);
    const selectedFilesTotalSize = computed(
      () => selectedFiles.value.reduce((total, file) => total + (file?.size || 0), 0)
    );
    const selectedFilesTotalSizeLabel = computed(
      () => selectedFilesTotalSize.value > 0 ? formatBytes(selectedFilesTotalSize.value) : "0 B"
    );
    const selectedFilesSummary = computed(() => {
      if (!selectedFiles.value.length) {
        return $t("dashboard.photos.slideover.footer.noSelection");
      }
      return $t("dashboard.photos.slideover.footer.prepared", {
        count: selectedFiles.value.length,
        size: selectedFilesTotalSizeLabel.value
      });
    });
    const clearSelectedFiles = () => {
      selectedFiles.value = [];
    };
    watch(isUploadSlideoverOpen, (open) => {
      if (!open) {
        clearSelectedFiles();
      }
    });
    const openUploadSlideover = () => {
      isUploadSlideoverOpen.value = true;
    };
    watch(isEditModalOpen, (open) => {
      if (!open) {
        editingPhoto.value = null;
        editFormState.title = "";
        editFormState.description = "";
        editFormState.tags = [];
        editFormState.rating = null;
        originalMetadata.value = {
          title: "",
          description: "",
          tags: [],
          location: null,
          rating: null
        };
        locationSelection.value = null;
        locationTouched.value = false;
      }
    });
    const rowSelection = ref({});
    const table = useTemplateRef("table");
    const columnVisibility = ref({
      thumbnailUrl: true,
      id: true,
      actions: true,
      title: true,
      tags: true,
      rating: true,
      isLivePhoto: true,
      location: true,
      dateTaken: true,
      lastModified: true,
      fileSize: true,
      colorSpace: true,
      reactions: true
    });
    const selectedRowsCount = computed(() => {
      return table.value?.tableApi?.getFilteredSelectedRowModel().rows.length || 0;
    });
    const totalRowsCount = computed(() => {
      return table.value?.tableApi?.getFilteredRowModel().rows.length || 0;
    });
    const livePhotoStats = computed(() => {
      if (!filteredPhotos.value) return { total: 0, livePhotos: 0, staticPhotos: 0 };
      const total = filteredPhotos.value.length;
      const livePhotos = filteredPhotos.value.filter(
        (photo) => photo.isLivePhoto
      ).length;
      const staticPhotos = total - livePhotos;
      return { total, livePhotos, staticPhotos };
    });
    const photoFilter = ref("all");
    const filteredData = computed(() => {
      if (!filteredPhotos.value) return [];
      switch (photoFilter.value) {
        case "livephoto":
          return filteredPhotos.value.filter((photo) => photo.isLivePhoto);
        case "static":
          return filteredPhotos.value.filter((photo) => !photo.isLivePhoto);
        default:
          return filteredPhotos.value;
      }
    });
    watch(
      () => filteredData.value,
      async (photos) => {
        if (photos && photos.length > 0) {
          const photoIds = photos.map((p) => p.id);
          await fetchReactions(photoIds);
        }
      },
      { immediate: true }
    );
    const statusIntervals = ref(/* @__PURE__ */ new Map());
    const startTaskStatusCheck = (taskId, fileId) => {
      const intervalId = setInterval();
      statusIntervals.value.set(taskId, intervalId);
    };
    const removeUploadingFile = (fileId) => {
      const uploadingFile = uploadingFiles.value.get(fileId);
      if (uploadingFile?.taskId) {
        const intervalId = statusIntervals.value.get(uploadingFile.taskId);
        if (intervalId) {
          clearInterval(intervalId);
          statusIntervals.value.delete(uploadingFile.taskId);
        }
      }
      uploadingFiles.value.delete(fileId);
      uploadingFiles.value = new Map(uploadingFiles.value);
    };
    const clearCompletedTasks = () => {
      const toRemove = [];
      for (const [fileId, uploadingFile] of uploadingFiles.value) {
        if (uploadingFile.status === "completed" || uploadingFile.status === "error") {
          toRemove.push(fileId);
          if (uploadingFile.taskId) {
            const intervalId = statusIntervals.value.get(uploadingFile.taskId);
            if (intervalId) {
              clearInterval(intervalId);
              statusIntervals.value.delete(uploadingFile.taskId);
            }
          }
        }
      }
      toRemove.forEach((fileId) => {
        uploadingFiles.value.delete(fileId);
      });
      uploadingFiles.value = new Map(uploadingFiles.value);
      if (toRemove.length > 0) {
        toast.add({
          title: $t("dashboard.photos.uploadQueue.taskCleared"),
          description: $t("dashboard.photos.uploadQueue.tasksCleared", {
            count: toRemove.length
          }),
          color: "info"
        });
      }
    };
    const clearCompletedUploads = () => {
      clearCompletedTasks();
    };
    const clearAllUploads = () => {
      const toRemove = [];
      for (const [fileId, uploadingFile] of uploadingFiles.value) {
        toRemove.push(fileId);
        if (uploadingFile.status === "uploading" && uploadingFile.abortUpload) {
          uploadingFile.abortUpload();
        }
        if (uploadingFile.taskId) {
          const intervalId = statusIntervals.value.get(uploadingFile.taskId);
          if (intervalId) {
            clearInterval(intervalId);
            statusIntervals.value.delete(uploadingFile.taskId);
          }
        }
      }
      uploadingFiles.value.clear();
      uploadingFiles.value = new Map(uploadingFiles.value);
      if (toRemove.length > 0) {
        toast.add({
          title: $t("dashboard.photos.uploadQueue.allTasksCleared"),
          description: $t("dashboard.photos.uploadQueue.tasksCleared", {
            count: toRemove.length
          }),
          color: "info"
        });
      }
    };
    const columns = [
      {
        id: "select",
        header: ({ table: table2 }) => h(_sfc_main$m, {
          modelValue: table2.getIsSomePageRowsSelected() ? "indeterminate" : table2.getIsAllPageRowsSelected(),
          "onUpdate:modelValue": (value) => table2.toggleAllPageRowsSelected(!!value),
          "aria-label": "Select all"
        }),
        cell: ({ row }) => h(_sfc_main$m, {
          modelValue: row.getIsSelected(),
          "onUpdate:modelValue": (value) => row.toggleSelected(!!value),
          "aria-label": "Select row"
        }),
        enableHiding: false
      },
      {
        id: "thumbnailUrl",
        accessorKey: "thumbnailUrl",
        header: $t("dashboard.photos.table.columns.thumbnail.title"),
        cell: ({ row }) => {
          const url = row.original.thumbnailUrl;
          return h(__nuxt_component_2$1, {
            src: url || row.original.originalUrl || "",
            alt: row.original.title || "Photo Thumbnail",
            key: row.original.id,
            thumbhash: row.original.thumbnailHash || "",
            class: "size-16 min-w-[100px] object-cover rounded-md shadow",
            onClick: () => openImagePreview(row.original),
            style: { cursor: url ? "pointer" : "default" }
          });
        },
        enableHiding: false
      },
      {
        id: "id",
        accessorKey: "id",
        header: $t("dashboard.photos.table.columns.id"),
        enableHiding: false
      },
      {
        accessorKey: "title",
        header: $t("dashboard.photos.table.columns.title")
      },
      {
        accessorKey: "tags",
        header: $t("dashboard.photos.table.columns.tags"),
        cell: ({ row }) => {
          const tags = row.original.tags;
          return h("div", { class: "flex items-center gap-1" }, [
            tags && tags.length ? tags.map(
              (tag) => h(
                _sfc_main$a,
                {
                  size: "sm",
                  variant: "soft",
                  color: "neutral"
                },
                () => tag
              )
            ) : h(
              "span",
              { class: "text-neutral-400 text-xs" },
              $t("dashboard.photos.table.cells.noTags")
            )
          ]);
        }
      },
      {
        accessorKey: "rating",
        header: $t("dashboard.photos.table.columns.rating"),
        cell: ({ row }) => {
          const rating = row.original.exif?.Rating;
          return h("div", { class: "flex items-center" }, [
            rating !== void 0 && rating !== null ? h(__nuxt_component_1, {
              modelValue: rating,
              readonly: true,
              size: "xs"
            }) : h(
              "span",
              { class: "text-neutral-400 text-xs" },
              $t("dashboard.photos.table.cells.noRating")
            )
          ]);
        }
      },
      {
        accessorKey: "isLivePhoto",
        header: $t("dashboard.photos.table.columns.isLivePhoto"),
        cell: ({ row }) => {
          const isLivePhoto = row.original.isLivePhoto;
          return h("div", { class: "flex items-center gap-2" }, [
            isLivePhoto ? h("div", { class: "flex items-center gap-1" }, [
              h(__nuxt_component_0, {
                name: "tabler:live-photo",
                class: "size-4 text-yellow-600 dark:text-yellow-400"
              }),
              h(
                "span",
                {
                  class: "text-yellow-600 dark:text-yellow-400 text-xs font-medium"
                },
                $t("ui.livePhoto")
              )
            ]) : h(
              "span",
              {
                class: "text-neutral-400 text-xs"
              },
              $t("dashboard.photos.table.cells.staticPhoto")
            )
          ]);
        },
        sortingFn: (rowA, rowB) => {
          const valueA = rowA.original.isLivePhoto ? 1 : 0;
          const valueB = rowB.original.isLivePhoto ? 1 : 0;
          return valueB - valueA;
        }
      },
      {
        accessorKey: "location",
        header: $t("dashboard.photos.table.columns.location"),
        cell: ({ row }) => {
          const { exif, city, country } = row.original;
          if (!exif?.GPSLongitude && !exif?.GPSLatitude) {
            return h(
              "span",
              { class: "text-neutral-400 text-xs" },
              $t("dashboard.photos.table.cells.noGps")
            );
          }
          const location = [city, country].filter(Boolean).join(", ");
          return h(
            "span",
            {
              class: location ? "text-xs" : "text-neutral-400 text-xs"
            },
            location || $t("dashboard.photos.table.cells.unknown")
          );
        }
      },
      {
        accessorKey: "dateTaken",
        header: $t("dashboard.photos.table.columns.dateTaken"),
        cell: (info) => {
          const date = info.getValue();
          return h(
            "span",
            { class: "font-mono text-xs" },
            date ? dayjs(date).format("YYYY-MM-DD HH:mm:ss") : $t("dashboard.photos.table.cells.unknown")
          );
        }
      },
      {
        accessorKey: "lastModified",
        header: $t("dashboard.photos.table.columns.lastModified"),
        cell: (info) => {
          const date = info.getValue();
          return h(
            "span",
            { class: "font-mono text-xs" },
            date ? dayjs(date).format("YYYY-MM-DD HH:mm:ss") : $t("dashboard.photos.table.cells.unknown")
          );
        }
      },
      {
        accessorKey: "fileSize",
        header: $t("dashboard.photos.table.columns.fileSize"),
        cell: (info) => formatBytes(info.getValue())
      },
      {
        id: "colorSpace",
        accessorFn: (row) => row.exif?.ColorSpace,
        header: $t("dashboard.photos.table.columns.colorSpace")
      },
      {
        accessorKey: "reactions",
        header: $t("dashboard.photos.table.columns.reactions"),
        cell: ({ row }) => {
          const photoId = row.original.id;
          const reactions = reactionsData.value[photoId] || {};
          const totalReactions = Object.values(reactions).reduce(
            (sum, count) => sum + count,
            0
          );
          if (totalReactions === 0) {
            return h(
              "span",
              { class: "text-neutral-400 text-xs" },
              $t("dashboard.photos.table.cells.noReactions")
            );
          }
          const reactionIcons = {
            like: "fluent-emoji-flat:thumbs-up",
            love: "fluent-emoji-flat:red-heart",
            amazing: "fluent-emoji-flat:smiling-face-with-heart-eyes",
            funny: "fluent-emoji-flat:face-with-tears-of-joy",
            wow: "fluent-emoji-flat:face-with-open-mouth",
            sad: "fluent-emoji-flat:crying-face",
            fire: "fluent-emoji-flat:fire",
            sparkle: "fluent-emoji-flat:sparkles"
          };
          const topReactions = Object.entries(reactions).filter(([_, count]) => count > 0).sort((a, b) => b[1] - a[1]).slice(0, 3);
          return h(
            "div",
            { class: "flex items-center gap-2" },
            [
              ...topReactions.map(
                ([type, count]) => h("div", { class: "flex items-center gap-0.5" }, [
                  h(__nuxt_component_0, {
                    name: reactionIcons[type] || "fluent-emoji-flat:face-with-tears-of-joy",
                    class: "size-4",
                    mode: "svg"
                  }),
                  h(
                    "span",
                    {
                      class: "text-xs font-medium text-neutral-700 dark:text-neutral-300"
                    },
                    count
                  )
                ])
              ),
              totalReactions > topReactions.length ? h(
                "span",
                { class: "text-xs text-neutral-400" },
                `+${totalReactions - topReactions.reduce((sum, [_, count]) => sum + count, 0)}`
              ) : null
            ].filter(Boolean)
          );
        }
      },
      {
        id: "actions",
        accessorKey: "actions",
        header: $t("dashboard.photos.table.columns.actions"),
        enableHiding: false
      }
    ];
    const validateFile = (file) => {
      const allowedTypes = [
        "image/jpeg",
        "image/png",
        "image/heic",
        "image/heif",
        "video/quicktime"
        // MOV 文件
      ];
      const isValidImageType = allowedTypes.includes(file.type);
      const isValidImageExtension = [".heic", ".heif"].some(
        (ext) => file.name.toLowerCase().endsWith(ext)
      );
      const isValidVideoExtension = file.name.toLowerCase().endsWith(".mov");
      if (!isValidImageType && !isValidImageExtension && !isValidVideoExtension) {
        return {
          valid: false,
          error: $t("dashboard.photos.errors.unsupportedFormat", {
            type: file.type
          })
        };
      }
      const maxSize = MAX_FILE_SIZE * 1024 * 1024;
      if (file.size > maxSize) {
        return {
          valid: false,
          error: $t("dashboard.photos.errors.fileTooLarge", {
            size: (file.size / 1024 / 1024).toFixed(2),
            maxSize: MAX_FILE_SIZE
          })
        };
      }
      return { valid: true };
    };
    const handleUpload = async () => {
      const fileList = selectedFiles.value;
      if (fileList.length === 0) {
        return;
      }
      const errors = [];
      const validFiles = [];
      const fileIdMapping = /* @__PURE__ */ new Map();
      for (const file of fileList) {
        const validation = validateFile(file);
        if (!validation.valid) {
          errors.push(`${file.name}: ${validation.error}`);
        } else {
          validFiles.push(file);
          const fileId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${file.name}`;
          fileIdMapping.set(file, fileId);
        }
      }
      if (validFiles.length === 0) {
        toast.add({
          title: $t("dashboard.photos.messages.error"),
          description: $t("dashboard.photos.errors.allFilesValidationFailed"),
          color: "error"
        });
        selectedFiles.value = [];
        return;
      }
      for (const file of validFiles) {
        const fileId = fileIdMapping.get(file);
        const uploadingFile = {
          file,
          fileName: file.name,
          fileId,
          status: "waiting",
          canAbort: false
        };
        uploadingFiles.value.set(fileId, uploadingFile);
      }
      uploadingFiles.value = new Map(uploadingFiles.value);
      const CONCURRENT_LIMIT = 3;
      const fileQueue = [...validFiles];
      const activeUploads = /* @__PURE__ */ new Set();
      const startUpload = async (file) => {
        const fileId = fileIdMapping.get(file);
        try {
          uploadImage(file, fileId);
        } catch (error) {
          errors.push(`${file.name}: ${error.message || "上传失败"}`);
          console.error("上传错误:", error);
        }
      };
      const processQueue = async () => {
        while (fileQueue.length > 0 || activeUploads.size > 0) {
          while (activeUploads.size < CONCURRENT_LIMIT && fileQueue.length > 0) {
            const file = fileQueue.shift();
            const uploadPromise = startUpload(file);
            activeUploads.add(uploadPromise);
            uploadPromise.finally(() => {
              activeUploads.delete(uploadPromise);
            });
          }
          if (activeUploads.size > 0) {
            await Promise.race(activeUploads);
          }
        }
      };
      await processQueue();
      if (errors.length > 0) {
        console.error("批量上传错误详情:", errors);
      }
      selectedFiles.value = [];
      isUploadSlideoverOpen.value = false;
    };
    const openMetadataEditor = (photo) => {
      const initialTitle = photo.title?.trim() ?? "";
      const initialDescription = photo.description?.trim() ?? "";
      const initialTags = normalizeTagList(photo.tags ?? []);
      const hasCoordinates = typeof photo.latitude === "number" && typeof photo.longitude === "number";
      editingPhoto.value = photo;
      editFormState.title = initialTitle;
      editFormState.description = initialDescription;
      editFormState.tags = [...initialTags];
      editFormState.rating = typeof photo.exif?.Rating === "number" ? photo.exif.Rating : null;
      const initialLocation = hasCoordinates ? {
        latitude: photo.latitude,
        longitude: photo.longitude
      } : null;
      originalMetadata.value = {
        title: initialTitle,
        description: initialDescription,
        tags: [...initialTags],
        location: initialLocation ? { ...initialLocation } : null,
        rating: typeof photo.exif?.Rating === "number" ? photo.exif.Rating : null
      };
      locationSelection.value = initialLocation ? { ...initialLocation } : null;
      locationTouched.value = false;
      isEditModalOpen.value = true;
    };
    const handleLocationPick = () => {
      locationTouched.value = true;
    };
    const clearSelectedLocation = () => {
      locationSelection.value = null;
      locationTouched.value = true;
    };
    const saveMetadataChanges = async () => {
      if (!editingPhoto.value || !isMetadataDirty.value) {
        return;
      }
      isSavingMetadata.value = true;
      try {
        const payload = {};
        if (titleChanged.value) {
          payload.title = normalizedTitle.value;
        }
        if (descriptionChanged.value) {
          payload.description = normalizedDescription.value;
        }
        if (tagsChanged.value) {
          payload.tags = [...editFormState.tags];
        }
        if (locationChanged.value) {
          payload.location = locationSelection.value ? {
            latitude: locationSelection.value.latitude,
            longitude: locationSelection.value.longitude
          } : null;
        }
        if (ratingChanged.value) {
          payload.rating = editFormState.rating;
        }
        if (Object.keys(payload).length === 0) {
          isEditModalOpen.value = false;
          return;
        }
        await $fetch(`/api/photos/${editingPhoto.value.id}`, {
          method: "PUT",
          body: payload
        });
        toast.add({
          title: $t("dashboard.photos.messages.metadataUpdateSuccess"),
          description: "",
          color: "success"
        });
        await refresh();
        isEditModalOpen.value = false;
      } catch (error) {
        console.error("更新照片信息失败:", error);
        const message = error?.data?.statusMessage || error?.statusMessage || error?.message || $t("dashboard.photos.messages.metadataUpdateFailed");
        toast.add({
          title: $t("dashboard.photos.messages.metadataUpdateFailed"),
          description: message,
          color: "error"
        });
      } finally {
        isSavingMetadata.value = false;
      }
    };
    const handleEditSubmit = async (event) => {
      event.preventDefault();
      if (!isMetadataDirty.value) {
        return;
      }
      await saveMetadataChanges();
    };
    const handleReverseGeocodeRequest = async (photo) => {
      if (!photo?.id) {
        return;
      }
      setReverseGeocodeLoading(photo.id, true);
      try {
        const result = await $fetch("/api/queue/add-task", {
          method: "POST",
          body: {
            payload: {
              type: "photo-reverse-geocoding",
              photoId: photo.id,
              latitude: typeof photo.latitude === "number" ? photo.latitude : void 0,
              longitude: typeof photo.longitude === "number" ? photo.longitude : void 0
            },
            priority: 1,
            maxAttempts: 3
          }
        });
        if (result.success) {
          toast.add({
            title: $t("dashboard.photos.messages.reverseGeocodeQueued"),
            description: typeof result.taskId === "number" ? $t("dashboard.photos.messages.reprocessTaskId", {
              taskId: result.taskId
            }) : "",
            color: "success"
          });
        } else {
          toast.add({
            title: $t("dashboard.photos.messages.reverseGeocodeFailed"),
            description: result?.message || $t("dashboard.photos.messages.reverseGeocodeFailed"),
            color: "error"
          });
        }
      } catch (error) {
        console.error("Failed to enqueue reverse geocoding task:", error);
        const message = error?.data?.statusMessage || error?.statusMessage || error?.message || $t("dashboard.photos.messages.reverseGeocodeFailed");
        toast.add({
          title: $t("dashboard.photos.messages.reverseGeocodeFailed"),
          description: message,
          color: "error"
        });
      } finally {
        setReverseGeocodeLoading(photo.id, false);
      }
    };
    const handleReprocessSingle = async (photo) => {
      try {
        if (!photo || !photo.storageKey) {
          toast.add({
            title: $t("dashboard.photos.messages.error"),
            description: $t("dashboard.photos.messages.noStorageKey"),
            color: "error"
          });
          return;
        }
        const reprocessToast = toast.add({
          title: $t("dashboard.photos.messages.reprocessSuccess"),
          description: "",
          color: "info"
        });
        const result = await $fetch("/api/queue/add-task", {
          method: "POST",
          body: {
            payload: {
              type: "photo",
              storageKey: photo.storageKey
            },
            priority: 0,
            maxAttempts: 3
          }
        });
        if (result.success) {
          toast.update(reprocessToast.id, {
            title: $t("dashboard.photos.messages.reprocessSuccess"),
            description: $t("dashboard.photos.messages.reprocessTaskId", {
              taskId: result.taskId
            }),
            color: "success"
          });
        } else {
          toast.update(reprocessToast.id, {
            title: $t("dashboard.photos.messages.error"),
            description: $t("dashboard.photos.messages.taskSubmitFailed"),
            color: "error"
          });
        }
      } catch (error) {
        console.error("处理照片失败:", error);
        toast.add({
          title: $t("dashboard.photos.messages.reprocessFailed"),
          description: error.message || $t("dashboard.photos.messages.error"),
          color: "error"
        });
      }
    };
    const getRowActions = (photo) => {
      const isReverseLoading = !!reverseGeocodeLoading.value[photo.id];
      return [
        [
          {
            label: $t("dashboard.photos.actions.editMetadata"),
            icon: "tabler:pencil",
            onSelect() {
              openMetadataEditor(photo);
            }
          },
          {
            label: $t("dashboard.photos.actions.reprocess"),
            icon: "tabler:refresh",
            onSelect() {
              handleReprocessSingle(photo);
            }
          },
          {
            label: $t("dashboard.photos.actions.refreshLocation"),
            icon: isReverseLoading ? "tabler:loader-2" : "tabler:map-pin",
            disabled: isReverseLoading,
            onSelect() {
              handleReverseGeocodeRequest(photo);
            }
          },
          {
            label: $t("dashboard.photos.actions.previewPhoto"),
            icon: "tabler:photo",
            onSelect() {
              openImagePreview(photo);
            }
          }
        ],
        [
          {
            color: "error",
            label: $t("dashboard.photos.actions.delete"),
            icon: "tabler:trash",
            onSelect: () => handleSingleDeleteRequest(photo)
          }
        ]
      ];
    };
    const isImagePreviewOpen = ref(false);
    const previewingPhoto = ref(null);
    const openImagePreview = (photo) => {
      if (photo) {
        previewingPhoto.value = photo;
        isImagePreviewOpen.value = true;
      }
    };
    const openInNewTab = (url) => {
    };
    const isDeleteConfirmOpen = ref(false);
    const deleteMode = ref("single");
    const deleteTargetPhotos = ref([]);
    const isDeleting = ref(false);
    const openDeleteConfirm = (mode, photos) => {
      deleteMode.value = mode;
      deleteTargetPhotos.value = photos;
      isDeleteConfirmOpen.value = true;
    };
    const handleSingleDeleteRequest = (photo) => {
      openDeleteConfirm("single", [photo]);
    };
    const handleBatchDelete = () => {
      const selectedRowModel = table.value?.tableApi?.getFilteredSelectedRowModel();
      const selectedPhotos = selectedRowModel?.rows.map((row) => row.original) || [];
      if (selectedPhotos.length === 0) {
        toast.add({
          title: $t("dashboard.photos.selection.selected", { count: 0, total: 0 }),
          description: $t("dashboard.photos.messages.batchSelectRequired"),
          color: "warning"
        });
        return;
      }
      openDeleteConfirm("batch", selectedPhotos);
    };
    const confirmDelete = async () => {
      if (deleteTargetPhotos.value.length === 0) {
        isDeleteConfirmOpen.value = false;
        return;
      }
      const mode = deleteMode.value;
      const targetPhotos = [...deleteTargetPhotos.value];
      let deleteToast = null;
      isDeleting.value = true;
      try {
        if (mode === "batch") {
          deleteToast = toast.add({
            title: $t("dashboard.photos.delete.batch.title"),
            description: $t("dashboard.photos.messages.deleteSuccess"),
            color: "info"
          });
          await Promise.all(
            targetPhotos.map(
              (photo) => $fetch(`/api/photos/${photo.id}`, {
                method: "DELETE"
              })
            )
          );
          toast.update(deleteToast.id, {
            title: $t("dashboard.photos.messages.batchDeleteSuccess", {
              count: targetPhotos.length
            }),
            description: "",
            color: "success"
          });
          rowSelection.value = {};
        } else {
          const photo = targetPhotos[0];
          if (!photo) {
            throw new Error($t("dashboard.photos.messages.error"));
          }
          await $fetch(`/api/photos/${photo.id}`, {
            method: "DELETE"
          });
          toast.add({
            title: $t("dashboard.photos.messages.deleteSuccess"),
            description: "",
            color: "success"
          });
        }
        await refresh();
        isDeleteConfirmOpen.value = false;
        deleteTargetPhotos.value = [];
      } catch (error) {
        console.error("删除照片失败:", error);
        const message = error?.message || $t("dashboard.photos.messages.error");
        if (mode === "batch" && deleteToast) {
          toast.update(deleteToast.id, {
            title: $t("dashboard.photos.messages.batchDeleteFailed"),
            description: message,
            color: "error"
          });
        } else {
          toast.add({
            title: $t("dashboard.photos.messages.deleteFailed"),
            description: message,
            color: "error"
          });
        }
      }
      isDeleting.value = false;
    };
    const handleBatchReprocess = async () => {
      const selectedRowModel = table.value?.tableApi?.getFilteredSelectedRowModel();
      const selectedPhotos = selectedRowModel?.rows.map((row) => row.original) || [];
      if (selectedPhotos.length === 0) {
        toast.add({
          title: $t("dashboard.photos.messages.batchSelectRequired"),
          description: "",
          color: "warning"
        });
        return;
      }
      const photosWithStorageKey = selectedPhotos.filter(
        (photo) => photo.storageKey
      );
      if (photosWithStorageKey.length !== selectedPhotos.length) {
        toast.add({
          title: $t("dashboard.photos.messages.error"),
          description: $t("dashboard.photos.messages.batchNoStorageKey", {
            count: selectedPhotos.length - photosWithStorageKey.length
          }),
          color: "error"
        });
        return;
      }
      try {
        const reprocessToast = toast.add({
          title: $t("dashboard.photos.messages.batchSelectRequired"),
          description: "",
          color: "info"
        });
        const result = await $fetch("/api/queue/add-tasks", {
          method: "POST",
          body: {
            tasks: photosWithStorageKey.map((photo) => ({
              payload: {
                type: "photo",
                storageKey: photo.storageKey
              },
              priority: 0,
              maxAttempts: 3
            }))
          }
        });
        if (result.success) {
          toast.update(reprocessToast.id, {
            title: $t("dashboard.photos.messages.reprocessSuccess"),
            description: $t("dashboard.queue.title", {
              count: photosWithStorageKey.length
            }),
            color: "success"
          });
        } else {
          toast.update(reprocessToast.id, {
            title: $t("dashboard.photos.messages.error"),
            description: $t("dashboard.photos.messages.batchReprocessFailed"),
            color: "error"
          });
        }
        rowSelection.value = {};
      } catch (error) {
        console.error("批量处理失败:", error);
        toast.add({
          title: $t("dashboard.photos.messages.batchReprocessFailed"),
          description: error.message || $t("dashboard.photos.messages.error"),
          color: "error"
        });
      }
    };
    const handleBatchDownload = async () => {
      const selectedRowModel = table.value?.tableApi?.getFilteredSelectedRowModel();
      const selectedPhotos = selectedRowModel?.rows.map((row) => row.original) || [];
      if (selectedPhotos.length === 0) {
        toast.add({
          title: $t("dashboard.photos.messages.batchSelectRequired"),
          description: "",
          color: "warning"
        });
        return;
      }
      const photosWithUrl = selectedPhotos.filter(
        (photo) => photo.originalUrl
      );
      if (photosWithUrl.length === 0) {
        toast.add({
          title: $t("dashboard.photos.messages.error"),
          description: $t("dashboard.photos.messages.batchNoUrl"),
          color: "error"
        });
        return;
      }
      if (photosWithUrl.length !== selectedPhotos.length) {
        toast.add({
          title: $t("dashboard.photos.messages.warning"),
          description: $t("dashboard.photos.messages.batchPartialUrl", {
            count: photosWithUrl.length,
            total: selectedPhotos.length
          }),
          color: "warning"
        });
      }
      const downloadToast = toast.add({
        title: $t("dashboard.photos.messages.downloadStarted"),
        description: $t("dashboard.photos.messages.downloadingCount", {
          count: photosWithUrl.length
        }),
        color: "info"
      });
      let successCount = 0;
      let failureCount = 0;
      try {
        for (const photo of photosWithUrl) {
          try {
            const response = await fetch(photo.originalUrl);
            if (!response.ok) {
              failureCount++;
              continue;
            }
            const blob = await response.blob();
            const url = (void 0).URL.createObjectURL(blob);
            const link = (void 0).createElement("a");
            link.href = url;
            const extension = photo.originalUrl.split(".").pop() || "jpg";
            link.download = `${photo.title || `photo-${photo.id}`}.${extension}`;
            (void 0).body.appendChild(link);
            link.click();
            (void 0).body.removeChild(link);
            (void 0).URL.revokeObjectURL(url);
            successCount++;
            await new Promise((resolve) => setTimeout(resolve, 200));
          } catch (error) {
            console.error(`Failed to download photo ${photo.id}:`, error);
            failureCount++;
          }
        }
        if (successCount === photosWithUrl.length) {
          toast.update(downloadToast.id, {
            title: $t("dashboard.photos.messages.batchDownloadSuccess"),
            description: $t("dashboard.photos.messages.downloadedCount", {
              count: successCount
            }),
            color: "success"
          });
        } else if (failureCount === photosWithUrl.length) {
          toast.update(downloadToast.id, {
            title: $t("dashboard.photos.messages.batchDownloadFailed"),
            description: $t("dashboard.photos.messages.downloadFailedCount", {
              count: failureCount
            }),
            color: "error"
          });
        } else {
          toast.update(downloadToast.id, {
            title: $t("dashboard.photos.messages.batchDownloadPartial"),
            description: $t("dashboard.photos.messages.downloadPartialCount", {
              success: successCount,
              failed: failureCount
            }),
            color: "warning"
          });
        }
      } catch (error) {
        console.error("批量下载出错:", error);
        toast.update(downloadToast.id, {
          title: $t("dashboard.photos.messages.error"),
          description: error.message || $t("dashboard.photos.messages.error"),
          color: "error"
        });
      }
    };
    watch(isImagePreviewOpen, (open) => {
      if (!open) {
        previewingPhoto.value = null;
      }
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_UDashboardPanel = _sfc_main$n;
      const _component_UDashboardNavbar = _sfc_main$y;
      const _component_UploadQueuePanel = __nuxt_component_7;
      const _component_i18n_t = resolveComponent("i18n-t");
      const _component_NuxtLink = __nuxt_component_0$2;
      const _component_UButton = _sfc_main$b;
      const _component_USlideover = _sfc_main$o;
      const _component_UFileUpload = _sfc_main$6;
      const _component_UIcon = _sfc_main$f;
      const _component_UPopover = _sfc_main$p;
      const _component_UTooltip = _sfc_main$h;
      const _component_UChip = _sfc_main$q;
      const _component_UCard = _sfc_main$r;
      const _component_OverlayFilterPanel = __nuxt_component_17;
      const _component_USelectMenu = _sfc_main$s;
      const _component_UDropdownMenu = _sfc_main$3;
      const _component_UTable = _sfc_main$t;
      const _component_UModal = _sfc_main$u;
      const _component_UForm = _sfc_main$v;
      const _component_UFormField = _sfc_main$w;
      const _component_UInput = _sfc_main$g;
      const _component_UTextarea = _sfc_main$x;
      const _component_UInputTags = _sfc_main$2;
      const _component_MapLocationPicker = __nuxt_component_27;
      const _component_MasonryItemPhoto = __nuxt_component_28;
      _push(ssrRenderComponent(_component_UDashboardPanel, _attrs, {
        header: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(ssrRenderComponent(_component_UDashboardNavbar, {
              title: unref($t)("dashboard.photos.toolbar.title")
            }, null, _parent2, _scopeId));
          } else {
            return [
              createVNode(_component_UDashboardNavbar, {
                title: unref($t)("dashboard.photos.toolbar.title")
              }, null, 8, ["title"])
            ];
          }
        }),
        body: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<div class="flex flex-col gap-3"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_UploadQueuePanel, {
              "uploading-files": unref(uploadingFiles),
              onRemoveFile: removeUploadingFile,
              onClearCompleted: clearCompletedUploads,
              onClearAll: clearAllUploads,
              onGoToQueue: ($event) => _ctx.$router.push("/dashboard/queue")
            }, null, _parent2, _scopeId));
            _push2(`<div class="relative overflow-hidden rounded-3xl border border-neutral-200/80 bg-linear-to-br from-white via-white to-neutral-50 shadow-sm transition dark:border-neutral-800/70 dark:from-neutral-900 dark:via-neutral-900/80 dark:to-neutral-900"${_scopeId}><div class="pointer-events-none absolute -left-32 -top-24 h-72 w-[18rem] rounded-full bg-primary-400/20 blur-3xl dark:bg-primary-500/20"${_scopeId}></div><div class="relative flex flex-col gap-6 p-5 sm:p-8"${_scopeId}><div class="flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between"${_scopeId}><div class="space-y-4"${_scopeId}><div class="flex items-center gap-3"${_scopeId}><span class="flex size-12 items-center justify-center rounded-2xl bg-primary-500/10 text-primary-600 dark:bg-primary-500/15 dark:text-primary-300"${_scopeId}>`);
            _push2(ssrRenderComponent(unref(__nuxt_component_0), {
              name: "tabler:cloud-upload",
              class: "size-6"
            }, null, _parent2, _scopeId));
            _push2(`</span><div${_scopeId}><h2 class="text-lg font-semibold text-neutral-800 dark:text-neutral-100"${_scopeId}>${ssrInterpolate(unref($t)("dashboard.photos.title"))}</h2>`);
            _push2(ssrRenderComponent(_component_i18n_t, {
              keypath: "dashboard.photos.subtitle",
              tag: "p",
              class: "mt-1 text-sm text-neutral-500 dark:text-neutral-400"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_NuxtLink, {
                    to: "/dashboard/albums",
                    class: "text-primary font-medium"
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`${ssrInterpolate(unref($t)("title.albums"))}`);
                      } else {
                        return [
                          createTextVNode(toDisplayString(unref($t)("title.albums")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_NuxtLink, {
                      to: "/dashboard/albums",
                      class: "text-primary font-medium"
                    }, {
                      default: withCtx(() => [
                        createTextVNode(toDisplayString(unref($t)("title.albums")), 1)
                      ]),
                      _: 1
                    })
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div></div><div class="flex flex-wrap items-center gap-1 text-xs font-medium text-neutral-500 dark:text-neutral-400"${_scopeId}>`);
            _push2(ssrRenderComponent(unref(_sfc_main$a), {
              variant: "soft",
              color: "primary",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(` JPEG / PNG `);
                } else {
                  return [
                    createTextVNode(" JPEG / PNG ")
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$a), {
              variant: "soft",
              color: "primary",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(` HEIC `);
                } else {
                  return [
                    createTextVNode(" HEIC ")
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$a), {
              variant: "soft",
              color: "primary",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`${ssrInterpolate(unref($t)("ui.livePhoto"))}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(unref($t)("ui.livePhoto")), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$a), {
              variant: "soft",
              color: "primary",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(` Motion Photo `);
                } else {
                  return [
                    createTextVNode(" Motion Photo ")
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(unref(_sfc_main$a), {
              variant: "outline",
              color: "neutral",
              size: "sm"
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`${ssrInterpolate(unref($t)("dashboard.photos.maxFileSize", {
                    size: MAX_FILE_SIZE
                  }))}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(unref($t)("dashboard.photos.maxFileSize", {
                      size: MAX_FILE_SIZE
                    })), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div></div><div class="flex gap-2 items-center"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_UButton, {
              variant: "soft",
              size: "lg",
              class: "w-full sm:w-auto",
              icon: "tabler:list-check",
              onClick: ($event) => _ctx.$router.push("/dashboard/queue")
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`${ssrInterpolate(unref($t)("dashboard.photos.buttons.queue"))}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(unref($t)("dashboard.photos.buttons.queue")), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_UButton, {
              size: "lg",
              class: "w-full sm:w-auto",
              icon: "tabler:cloud-upload",
              onClick: openUploadSlideover
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`${ssrInterpolate(unref($t)("dashboard.photos.buttons.upload"))}`);
                } else {
                  return [
                    createTextVNode(toDisplayString(unref($t)("dashboard.photos.buttons.upload")), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div></div></div></div>`);
            _push2(ssrRenderComponent(_component_USlideover, {
              open: unref(isUploadSlideoverOpen),
              "onUpdate:open": ($event) => isRef(isUploadSlideoverOpen) ? isUploadSlideoverOpen.value = $event : null,
              title: unref($t)("dashboard.photos.slideover.title"),
              description: unref($t)("dashboard.photos.slideover.description"),
              ui: {
                content: "sm:max-w-xl",
                body: "p-2",
                header: "px-6 py-5 border-b border-neutral-200 dark:border-neutral-800",
                footer: "px-6 py-5 border-t border-neutral-200 dark:border-neutral-800"
              }
            }, {
              body: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_UFileUpload, {
                    modelValue: unref(selectedFiles),
                    "onUpdate:modelValue": ($event) => isRef(selectedFiles) ? selectedFiles.value = $event : null,
                    label: unref($t)("dashboard.photos.uploader.label"),
                    description: unref($t)("dashboard.photos.uploader.description", {
                      maxSize: MAX_FILE_SIZE
                    }),
                    icon: "tabler:cloud-upload",
                    layout: "list",
                    size: "xl",
                    accept: "image/jpeg,image/png,image/heic,image/heif,video/quicktime,.mov",
                    multiple: "",
                    highlight: "",
                    dropzone: "",
                    "file-delete": { variant: "soft", color: "neutral" },
                    ui: {
                      root: "w-full",
                      base: "group relative flex flex-col items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-neutral-200/80 bg-white/90 px-6 py-12 text-center shadow-sm transition-all duration-300 hover:border-primary-400/80 hover:bg-primary-500/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/60 dark:border-neutral-700/70 dark:bg-neutral-900/80",
                      wrapper: "flex flex-col items-center gap-2",
                      label: "text-base font-semibold text-neutral-800 dark:text-neutral-100",
                      description: "text-sm text-neutral-500 dark:text-neutral-400",
                      files: "mt-2 flex w-full flex-col gap-2 overflow-y-auto",
                      file: "flex items-center justify-between gap-3 rounded-2xl border border-neutral-200/80 bg-white/80 px-4 py-3 text-left shadow-sm shadow-black/5 backdrop-blur-sm dark:border-neutral-800/80 dark:bg-neutral-900/70",
                      fileLeadingAvatar: "ring-1 ring-white/80 dark:ring-neutral-800",
                      fileWrapper: "min-w-0 flex-1",
                      fileName: "text-sm font-medium text-neutral-700 dark:text-neutral-100 truncate",
                      fileSize: "text-xs text-neutral-500 dark:text-neutral-400",
                      fileTrailingButton: "text-neutral-400 hover:text-error-500"
                    }
                  }, null, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_UFileUpload, {
                      modelValue: unref(selectedFiles),
                      "onUpdate:modelValue": ($event) => isRef(selectedFiles) ? selectedFiles.value = $event : null,
                      label: unref($t)("dashboard.photos.uploader.label"),
                      description: unref($t)("dashboard.photos.uploader.description", {
                        maxSize: MAX_FILE_SIZE
                      }),
                      icon: "tabler:cloud-upload",
                      layout: "list",
                      size: "xl",
                      accept: "image/jpeg,image/png,image/heic,image/heif,video/quicktime,.mov",
                      multiple: "",
                      highlight: "",
                      dropzone: "",
                      "file-delete": { variant: "soft", color: "neutral" },
                      ui: {
                        root: "w-full",
                        base: "group relative flex flex-col items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-neutral-200/80 bg-white/90 px-6 py-12 text-center shadow-sm transition-all duration-300 hover:border-primary-400/80 hover:bg-primary-500/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/60 dark:border-neutral-700/70 dark:bg-neutral-900/80",
                        wrapper: "flex flex-col items-center gap-2",
                        label: "text-base font-semibold text-neutral-800 dark:text-neutral-100",
                        description: "text-sm text-neutral-500 dark:text-neutral-400",
                        files: "mt-2 flex w-full flex-col gap-2 overflow-y-auto",
                        file: "flex items-center justify-between gap-3 rounded-2xl border border-neutral-200/80 bg-white/80 px-4 py-3 text-left shadow-sm shadow-black/5 backdrop-blur-sm dark:border-neutral-800/80 dark:bg-neutral-900/70",
                        fileLeadingAvatar: "ring-1 ring-white/80 dark:ring-neutral-800",
                        fileWrapper: "min-w-0 flex-1",
                        fileName: "text-sm font-medium text-neutral-700 dark:text-neutral-100 truncate",
                        fileSize: "text-xs text-neutral-500 dark:text-neutral-400",
                        fileTrailingButton: "text-neutral-400 hover:text-error-500"
                      }
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "label", "description"])
                  ];
                }
              }),
              footer: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"${_scopeId2}><div class="flex flex-col gap-1 text-sm text-neutral-500 dark:text-neutral-400"${_scopeId2}><span${_scopeId2}>${ssrInterpolate(unref(hasSelectedFiles) ? unref(selectedFilesSummary) : unref($t)("dashboard.photos.slideover.footer.noSelection"))}</span></div><div class="flex w-full flex-col gap-2 sm:w-auto sm:flex-row"${_scopeId2}>`);
                  _push3(ssrRenderComponent(_component_UButton, {
                    variant: "soft",
                    color: "neutral",
                    class: "w-full sm:w-auto",
                    disabled: !unref(hasSelectedFiles),
                    onClick: clearSelectedFiles
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`${ssrInterpolate(unref($t)("dashboard.photos.slideover.buttons.clear"))}`);
                      } else {
                        return [
                          createTextVNode(toDisplayString(unref($t)("dashboard.photos.slideover.buttons.clear")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(ssrRenderComponent(_component_UButton, {
                    color: "primary",
                    size: "lg",
                    class: "w-full sm:w-auto",
                    icon: "tabler:upload",
                    disabled: !unref(hasSelectedFiles),
                    onClick: handleUpload
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`${ssrInterpolate(unref(hasSelectedFiles) ? unref($t)("dashboard.photos.slideover.buttons.upload", {
                          count: unref(selectedFiles).length
                        }) : unref($t)("dashboard.photos.buttons.upload"))}`);
                      } else {
                        return [
                          createTextVNode(toDisplayString(unref(hasSelectedFiles) ? unref($t)("dashboard.photos.slideover.buttons.upload", {
                            count: unref(selectedFiles).length
                          }) : unref($t)("dashboard.photos.buttons.upload")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(`</div></div>`);
                } else {
                  return [
                    createVNode("div", { class: "flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between" }, [
                      createVNode("div", { class: "flex flex-col gap-1 text-sm text-neutral-500 dark:text-neutral-400" }, [
                        createVNode("span", null, toDisplayString(unref(hasSelectedFiles) ? unref(selectedFilesSummary) : unref($t)("dashboard.photos.slideover.footer.noSelection")), 1)
                      ]),
                      createVNode("div", { class: "flex w-full flex-col gap-2 sm:w-auto sm:flex-row" }, [
                        createVNode(_component_UButton, {
                          variant: "soft",
                          color: "neutral",
                          class: "w-full sm:w-auto",
                          disabled: !unref(hasSelectedFiles),
                          onClick: clearSelectedFiles
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.slideover.buttons.clear")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled"]),
                        createVNode(_component_UButton, {
                          color: "primary",
                          size: "lg",
                          class: "w-full sm:w-auto",
                          icon: "tabler:upload",
                          disabled: !unref(hasSelectedFiles),
                          onClick: handleUpload
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref(hasSelectedFiles) ? unref($t)("dashboard.photos.slideover.buttons.upload", {
                              count: unref(selectedFiles).length
                            }) : unref($t)("dashboard.photos.buttons.upload")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled"])
                      ])
                    ])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`<div class="flex flex-row sm:items-center justify-between gap-3 sm:gap-0 p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-900/50 border border-neutral-200 dark:border-neutral-700 rounded-lg"${_scopeId}><div class="flex items-center gap-2"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_UIcon, {
              name: "tabler:photo",
              class: "text-neutral-500"
            }, null, _parent2, _scopeId));
            _push2(`<span class="font-medium text-neutral-700 dark:text-neutral-300 hidden sm:inline"${_scopeId}>${ssrInterpolate(unref($t)("dashboard.photos.toolbar.title"))}</span><div class="flex items-center gap-1 sm:gap-2"${_scopeId}>`);
            if (unref(livePhotoStats).staticPhotos > 0) {
              _push2(ssrRenderComponent(unref(_sfc_main$a), {
                variant: "soft",
                color: "neutral",
                size: "sm"
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<span class="hidden sm:inline"${_scopeId2}>${ssrInterpolate(unref(livePhotoStats).staticPhotos)} ${ssrInterpolate(unref($t)("dashboard.photos.stats.photos"))}</span><span class="sm:hidden"${_scopeId2}>${ssrInterpolate(unref(livePhotoStats).staticPhotos)}P</span>`);
                  } else {
                    return [
                      createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref(livePhotoStats).staticPhotos) + " " + toDisplayString(unref($t)("dashboard.photos.stats.photos")), 1),
                      createVNode("span", { class: "sm:hidden" }, toDisplayString(unref(livePhotoStats).staticPhotos) + "P", 1)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
            if (unref(livePhotoStats).livePhotos > 0) {
              _push2(ssrRenderComponent(unref(_sfc_main$a), {
                variant: "soft",
                color: "warning",
                size: "sm"
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<span class="hidden sm:inline"${_scopeId2}>${ssrInterpolate(unref(livePhotoStats).livePhotos)} ${ssrInterpolate(unref($t)("dashboard.photos.stats.livePhotos"))}</span><span class="sm:hidden"${_scopeId2}>${ssrInterpolate(unref(livePhotoStats).livePhotos)}LP</span>`);
                  } else {
                    return [
                      createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref(livePhotoStats).livePhotos) + " " + toDisplayString(unref($t)("dashboard.photos.stats.livePhotos")), 1),
                      createVNode("span", { class: "sm:hidden" }, toDisplayString(unref(livePhotoStats).livePhotos) + "LP", 1)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div></div><div class="flex items-center gap-2"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_UPopover, null, {
              content: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_UCard, { variant: "glassmorphism" }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_OverlayFilterPanel, null, null, _parent4, _scopeId3));
                      } else {
                        return [
                          createVNode(_component_OverlayFilterPanel)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_UCard, { variant: "glassmorphism" }, {
                      default: withCtx(() => [
                        createVNode(_component_OverlayFilterPanel)
                      ]),
                      _: 1
                    })
                  ];
                }
              }),
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_UTooltip, {
                    text: unref($t)("ui.action.filter.tooltip")
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_UChip, {
                          inset: "",
                          size: "sm",
                          color: "info",
                          show: unref(totalSelectedFilters) > 0
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_UButton, {
                                variant: "soft",
                                color: unref(hasActiveFilters) ? "info" : "neutral",
                                class: "bg-transparent rounded-full cursor-pointer relative",
                                icon: "tabler:filter",
                                size: "sm"
                              }, null, _parent5, _scopeId4));
                            } else {
                              return [
                                createVNode(_component_UButton, {
                                  variant: "soft",
                                  color: unref(hasActiveFilters) ? "info" : "neutral",
                                  class: "bg-transparent rounded-full cursor-pointer relative",
                                  icon: "tabler:filter",
                                  size: "sm"
                                }, null, 8, ["color"])
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                      } else {
                        return [
                          createVNode(_component_UChip, {
                            inset: "",
                            size: "sm",
                            color: "info",
                            show: unref(totalSelectedFilters) > 0
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UButton, {
                                variant: "soft",
                                color: unref(hasActiveFilters) ? "info" : "neutral",
                                class: "bg-transparent rounded-full cursor-pointer relative",
                                icon: "tabler:filter",
                                size: "sm"
                              }, null, 8, ["color"])
                            ]),
                            _: 1
                          }, 8, ["show"])
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_UTooltip, {
                      text: unref($t)("ui.action.filter.tooltip")
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UChip, {
                          inset: "",
                          size: "sm",
                          color: "info",
                          show: unref(totalSelectedFilters) > 0
                        }, {
                          default: withCtx(() => [
                            createVNode(_component_UButton, {
                              variant: "soft",
                              color: unref(hasActiveFilters) ? "info" : "neutral",
                              class: "bg-transparent rounded-full cursor-pointer relative",
                              icon: "tabler:filter",
                              size: "sm"
                            }, null, 8, ["color"])
                          ]),
                          _: 1
                        }, 8, ["show"])
                      ]),
                      _: 1
                    }, 8, ["text"])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_USelectMenu, {
              modelValue: unref(photoFilter),
              "onUpdate:modelValue": ($event) => isRef(photoFilter) ? photoFilter.value = $event : null,
              class: "w-full sm:w-48",
              items: [
                {
                  label: unref($t)("dashboard.photos.photoFilter.all"),
                  value: "all",
                  icon: "tabler:photo-scan"
                },
                {
                  label: unref($t)("dashboard.photos.photoFilter.livephoto"),
                  value: "livephoto",
                  icon: "tabler:live-photo"
                },
                {
                  label: unref($t)("dashboard.photos.photoFilter.static"),
                  value: "static",
                  icon: "tabler:photo"
                }
              ],
              "value-key": "value",
              "label-key": "label",
              size: "sm"
            }, null, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_UButton, {
              variant: "soft",
              color: "info",
              size: "sm",
              icon: "tabler:refresh",
              loading: unref(reactionsLoading),
              onClick: async () => {
                await unref(refresh)();
                if (unref(filteredData).length > 0) {
                  await fetchReactions(unref(filteredData).map((p) => p.id));
                }
              }
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<span class="hidden sm:inline"${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.toolbar.refresh"))}</span>`);
                } else {
                  return [
                    createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.toolbar.refresh")), 1)
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_UDropdownMenu, {
              items: unref(table)?.tableApi?.getAllColumns().filter((column) => column.getCanHide()).map((column) => ({
                label: columnNameMap[column.id] || column.id,
                type: "checkbox",
                checked: column.getIsVisible(),
                disabled: !column.getCanHide() || column.id === "thumbnailUrl" || column.id === "id" || column.id === "actions",
                onUpdateChecked(checked) {
                  unref(table)?.tableApi?.getColumn(column.id)?.toggleVisibility(!!checked);
                },
                onSelect(e) {
                  e.preventDefault();
                }
              })),
              content: { align: "end" }
            }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_UButton, {
                    label: "",
                    color: "neutral",
                    variant: "outline",
                    size: "sm",
                    icon: "tabler:columns-3",
                    title: unref($t)("dashboard.photos.table.columnVisibility.description")
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`<span class="hidden sm:inline"${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.table.columnVisibility.button"))}</span>`);
                      } else {
                        return [
                          createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.table.columnVisibility.button")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_UButton, {
                      label: "",
                      color: "neutral",
                      variant: "outline",
                      size: "sm",
                      icon: "tabler:columns-3",
                      title: unref($t)("dashboard.photos.table.columnVisibility.description")
                    }, {
                      default: withCtx(() => [
                        createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.table.columnVisibility.button")), 1)
                      ]),
                      _: 1
                    }, 8, ["title"])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div></div><div class="border border-neutral-300 dark:border-neutral-800 rounded overflow-hidden"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_UTable, {
              ref_key: "table",
              ref: table,
              "row-selection": unref(rowSelection),
              "onUpdate:rowSelection": ($event) => isRef(rowSelection) ? rowSelection.value = $event : null,
              "column-visibility": unref(columnVisibility),
              "onUpdate:columnVisibility": ($event) => isRef(columnVisibility) ? columnVisibility.value = $event : null,
              "column-pinning": {
                right: ["actions"]
              },
              data: unref(filteredData),
              columns,
              loading: unref(status) === "pending",
              sticky: "",
              class: "h-[calc(100vh-27rem)] sm:h-[calc(100vh-24.5rem)]",
              ui: {
                separator: "bg-neutral-200 dark:bg-neutral-700"
              }
            }, {
              "actions-cell": withCtx(({ row }, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="flex justify-end"${_scopeId2}>`);
                  _push3(ssrRenderComponent(_component_UDropdownMenu, {
                    size: "sm",
                    content: {
                      align: "end"
                    },
                    items: getRowActions(row.original)
                  }, {
                    default: withCtx((_2, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_UButton, {
                          variant: "outline",
                          color: "neutral",
                          size: "sm",
                          icon: "tabler:dots-vertical"
                        }, null, _parent4, _scopeId3));
                      } else {
                        return [
                          createVNode(_component_UButton, {
                            variant: "outline",
                            color: "neutral",
                            size: "sm",
                            icon: "tabler:dots-vertical"
                          })
                        ];
                      }
                    }),
                    _: 2
                  }, _parent3, _scopeId2));
                  _push3(`</div>`);
                } else {
                  return [
                    createVNode("div", { class: "flex justify-end" }, [
                      createVNode(_component_UDropdownMenu, {
                        size: "sm",
                        content: {
                          align: "end"
                        },
                        items: getRowActions(row.original)
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_UButton, {
                            variant: "outline",
                            color: "neutral",
                            size: "sm",
                            icon: "tabler:dots-vertical"
                          })
                        ]),
                        _: 1
                      }, 8, ["items"])
                    ])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`<div class="px-4 py-4 border-t border-neutral-200 dark:border-neutral-700"${_scopeId}><div class="text-sm text-neutral-600 dark:text-neutral-400 flex items-center gap-2"${_scopeId}><div class="leading-6"${_scopeId}>${ssrInterpolate(unref($t)("dashboard.photos.selection.selected", {
              count: unref(selectedRowsCount),
              total: unref(totalRowsCount)
            }))}</div>`);
            if (unref(selectedRowsCount) > 0) {
              _push2(`<div class="flex items-center gap-1 sm:gap-2"${_scopeId}>`);
              _push2(ssrRenderComponent(_component_UButton, {
                variant: "soft",
                color: "info",
                size: "xs",
                icon: "tabler:refresh",
                class: "flex-1 sm:flex-none",
                onClick: handleBatchReprocess
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<span${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.selection.batchReprocess"))}</span>`);
                  } else {
                    return [
                      createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchReprocess")), 1)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
              _push2(ssrRenderComponent(_component_UButton, {
                variant: "soft",
                color: "primary",
                size: "xs",
                icon: "tabler:download",
                class: "flex-1 sm:flex-none",
                onClick: handleBatchDownload
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<span${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.selection.batchDownload"))}</span>`);
                  } else {
                    return [
                      createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchDownload")), 1)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
              _push2(ssrRenderComponent(_component_UButton, {
                color: "error",
                variant: "soft",
                size: "xs",
                icon: "tabler:trash",
                class: "flex-1 sm:flex-none",
                onClick: handleBatchDelete
              }, {
                default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                  if (_push3) {
                    _push3(`<span${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.selection.batchDelete"))}</span>`);
                  } else {
                    return [
                      createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchDelete")), 1)
                    ];
                  }
                }),
                _: 1
              }, _parent2, _scopeId));
              _push2(`</div>`);
            } else {
              _push2(`<!---->`);
            }
            _push2(`</div></div></div>`);
            _push2(ssrRenderComponent(_component_UModal, {
              open: unref(isEditModalOpen),
              "onUpdate:open": ($event) => isRef(isEditModalOpen) ? isEditModalOpen.value = $event : null
            }, {
              content: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="p-6 space-y-6"${_scopeId2}><div class="space-y-1"${_scopeId2}><h2 class="text-lg font-semibold text-neutral-800 dark:text-neutral-100"${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.title"))}</h2><p class="text-sm text-neutral-500 dark:text-neutral-400"${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.description"))}</p>`);
                  if (unref(editingPhoto)) {
                    _push3(`<p class="text-xs text-neutral-500 dark:text-neutral-500"${_scopeId2}>${ssrInterpolate(unref(editingPhoto).title || unref(editingPhoto).id)}</p>`);
                  } else {
                    _push3(`<!---->`);
                  }
                  _push3(`</div>`);
                  _push3(ssrRenderComponent(_component_UForm, {
                    state: unref(editFormState),
                    class: "space-y-5",
                    onSubmit: handleEditSubmit
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_UFormField, {
                          label: unref($t)("dashboard.photos.editModal.fields.title"),
                          name: "title"
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_UInput, {
                                modelValue: unref(editFormState).title,
                                "onUpdate:modelValue": ($event) => unref(editFormState).title = $event,
                                class: "w-full"
                              }, null, _parent5, _scopeId4));
                            } else {
                              return [
                                createVNode(_component_UInput, {
                                  modelValue: unref(editFormState).title,
                                  "onUpdate:modelValue": ($event) => unref(editFormState).title = $event,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(ssrRenderComponent(_component_UFormField, {
                          label: unref($t)("dashboard.photos.editModal.fields.description"),
                          name: "description"
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_UTextarea, {
                                modelValue: unref(editFormState).description,
                                "onUpdate:modelValue": ($event) => unref(editFormState).description = $event,
                                rows: 3,
                                class: "w-full"
                              }, null, _parent5, _scopeId4));
                            } else {
                              return [
                                createVNode(_component_UTextarea, {
                                  modelValue: unref(editFormState).description,
                                  "onUpdate:modelValue": ($event) => unref(editFormState).description = $event,
                                  rows: 3,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(`<div class="space-y-2"${_scopeId3}>`);
                        _push4(ssrRenderComponent(_component_UFormField, {
                          label: unref($t)("dashboard.photos.editModal.fields.tags"),
                          name: "tags"
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_UInputTags, {
                                modelValue: unref(tagsModel),
                                "onUpdate:modelValue": ($event) => isRef(tagsModel) ? tagsModel.value = $event : null,
                                class: "w-full"
                              }, null, _parent5, _scopeId4));
                            } else {
                              return [
                                createVNode(_component_UInputTags, {
                                  modelValue: unref(tagsModel),
                                  "onUpdate:modelValue": ($event) => isRef(tagsModel) ? tagsModel.value = $event : null,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(`<p class="text-xs text-neutral-500 dark:text-neutral-400"${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.tagsHint"))}</p></div><div class="flex items-center justify-between space-y-2"${_scopeId3}><label class="text-sm font-medium text-neutral-700 dark:text-neutral-200"${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.rating"))}</label><div class="flex items-center gap-3"${_scopeId3}>`);
                        if (unref(editFormState).rating) {
                          _push4(`<span class="text-sm text-neutral-600 dark:text-neutral-400"${_scopeId3}>${ssrInterpolate(unref(editFormState).rating)} / 5 </span>`);
                        } else {
                          _push4(`<span class="text-sm text-neutral-500 dark:text-neutral-500"${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.noRating"))}</span>`);
                        }
                        _push4(ssrRenderComponent(unref(Rating), {
                          "model-value": unref(editFormState).rating || 0,
                          "allow-half": false,
                          size: "lg",
                          "onUpdate:modelValue": ($event) => unref(editFormState).rating = $event || null
                        }, null, _parent4, _scopeId3));
                        _push4(`</div></div><div class="space-y-3"${_scopeId3}><div class="flex items-center justify-between"${_scopeId3}><label class="text-sm font-medium text-neutral-700 dark:text-neutral-200"${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.location"))}</label>`);
                        if (unref(locationSelection)) {
                          _push4(ssrRenderComponent(_component_UButton, {
                            variant: "ghost",
                            color: "neutral",
                            size: "xs",
                            icon: "tabler:map-off",
                            onClick: clearSelectedLocation
                          }, {
                            default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                              if (_push5) {
                                _push5(`${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.clearLocation"))}`);
                              } else {
                                return [
                                  createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.fields.clearLocation")), 1)
                                ];
                              }
                            }),
                            _: 1
                          }, _parent4, _scopeId3));
                        } else {
                          _push4(`<!---->`);
                        }
                        _push4(`</div>`);
                        _push4(ssrRenderComponent(_component_MapLocationPicker, {
                          modelValue: unref(locationSelection),
                          "onUpdate:modelValue": ($event) => isRef(locationSelection) ? locationSelection.value = $event : null,
                          class: "border border-neutral-200 dark:border-neutral-800",
                          onPick: handleLocationPick
                        }, {
                          empty: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(`<span class="px-3 py-2 rounded-full bg-white/80 text-neutral-600 dark:bg-neutral-900/80 dark:text-neutral-200 shadow"${_scopeId4}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.locationHint"))}</span>`);
                            } else {
                              return [
                                createVNode("span", { class: "px-3 py-2 rounded-full bg-white/80 text-neutral-600 dark:bg-neutral-900/80 dark:text-neutral-200 shadow" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.locationHint")), 1)
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(`<div class="text-xs text-neutral-500 dark:text-neutral-400 flex items-center gap-2"${_scopeId3}><span${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.coordinates"))}:</span>`);
                        if (unref(formattedCoordinates)) {
                          _push4(`<span${_scopeId3}>${ssrInterpolate(unref(formattedCoordinates).latitude)}, ${ssrInterpolate(unref(formattedCoordinates).longitude)}</span>`);
                        } else {
                          _push4(`<span${_scopeId3}>${ssrInterpolate(unref($t)("dashboard.photos.editModal.fields.noLocation"))}</span>`);
                        }
                        _push4(`</div></div><div class="flex items-center justify-end gap-2 pt-4 border-t border-neutral-200 dark:border-neutral-800"${_scopeId3}>`);
                        _push4(ssrRenderComponent(_component_UButton, {
                          variant: "ghost",
                          color: "neutral",
                          onClick: ($event) => isEditModalOpen.value = false
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(`${ssrInterpolate(unref($t)("dashboard.photos.editModal.actions.cancel"))}`);
                            } else {
                              return [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.cancel")), 1)
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(ssrRenderComponent(_component_UButton, {
                          type: "submit",
                          loading: unref(isSavingMetadata),
                          disabled: !unref(isMetadataDirty) || unref(isSavingMetadata),
                          icon: "tabler:device-floppy"
                        }, {
                          default: withCtx((_4, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(`${ssrInterpolate(unref($t)("dashboard.photos.editModal.actions.save"))}`);
                            } else {
                              return [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.save")), 1)
                              ];
                            }
                          }),
                          _: 1
                        }, _parent4, _scopeId3));
                        _push4(`</div>`);
                      } else {
                        return [
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.title"),
                            name: "title"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UInput, {
                                modelValue: unref(editFormState).title,
                                "onUpdate:modelValue": ($event) => unref(editFormState).title = $event,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.description"),
                            name: "description"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UTextarea, {
                                modelValue: unref(editFormState).description,
                                "onUpdate:modelValue": ($event) => unref(editFormState).description = $event,
                                rows: 3,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode("div", { class: "space-y-2" }, [
                            createVNode(_component_UFormField, {
                              label: unref($t)("dashboard.photos.editModal.fields.tags"),
                              name: "tags"
                            }, {
                              default: withCtx(() => [
                                createVNode(_component_UInputTags, {
                                  modelValue: unref(tagsModel),
                                  "onUpdate:modelValue": ($event) => isRef(tagsModel) ? tagsModel.value = $event : null,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ]),
                              _: 1
                            }, 8, ["label"]),
                            createVNode("p", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.tagsHint")), 1)
                          ]),
                          createVNode("div", { class: "flex items-center justify-between space-y-2" }, [
                            createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.rating")), 1),
                            createVNode("div", { class: "flex items-center gap-3" }, [
                              unref(editFormState).rating ? (openBlock(), createBlock("span", {
                                key: 0,
                                class: "text-sm text-neutral-600 dark:text-neutral-400"
                              }, toDisplayString(unref(editFormState).rating) + " / 5 ", 1)) : (openBlock(), createBlock("span", {
                                key: 1,
                                class: "text-sm text-neutral-500 dark:text-neutral-500"
                              }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noRating")), 1)),
                              createVNode(unref(Rating), {
                                "model-value": unref(editFormState).rating || 0,
                                "allow-half": false,
                                size: "lg",
                                "onUpdate:modelValue": ($event) => unref(editFormState).rating = $event || null
                              }, null, 8, ["model-value", "onUpdate:modelValue"])
                            ])
                          ]),
                          createVNode("div", { class: "space-y-3" }, [
                            createVNode("div", { class: "flex items-center justify-between" }, [
                              createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.location")), 1),
                              unref(locationSelection) ? (openBlock(), createBlock(_component_UButton, {
                                key: 0,
                                variant: "ghost",
                                color: "neutral",
                                size: "xs",
                                icon: "tabler:map-off",
                                onClick: withModifiers(clearSelectedLocation, ["prevent"])
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.fields.clearLocation")), 1)
                                ]),
                                _: 1
                              })) : createCommentVNode("", true)
                            ]),
                            createVNode(_component_MapLocationPicker, {
                              modelValue: unref(locationSelection),
                              "onUpdate:modelValue": ($event) => isRef(locationSelection) ? locationSelection.value = $event : null,
                              class: "border border-neutral-200 dark:border-neutral-800",
                              onPick: handleLocationPick
                            }, {
                              empty: withCtx(() => [
                                createVNode("span", { class: "px-3 py-2 rounded-full bg-white/80 text-neutral-600 dark:bg-neutral-900/80 dark:text-neutral-200 shadow" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.locationHint")), 1)
                              ]),
                              _: 1
                            }, 8, ["modelValue", "onUpdate:modelValue"]),
                            createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400 flex items-center gap-2" }, [
                              createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.editModal.fields.coordinates")) + ":", 1),
                              unref(formattedCoordinates) ? (openBlock(), createBlock("span", { key: 0 }, toDisplayString(unref(formattedCoordinates).latitude) + ", " + toDisplayString(unref(formattedCoordinates).longitude), 1)) : (openBlock(), createBlock("span", { key: 1 }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noLocation")), 1))
                            ])
                          ]),
                          createVNode("div", { class: "flex items-center justify-end gap-2 pt-4 border-t border-neutral-200 dark:border-neutral-800" }, [
                            createVNode(_component_UButton, {
                              variant: "ghost",
                              color: "neutral",
                              onClick: withModifiers(($event) => isEditModalOpen.value = false, ["prevent"])
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.cancel")), 1)
                              ]),
                              _: 1
                            }, 8, ["onClick"]),
                            createVNode(_component_UButton, {
                              type: "submit",
                              loading: unref(isSavingMetadata),
                              disabled: !unref(isMetadataDirty) || unref(isSavingMetadata),
                              icon: "tabler:device-floppy"
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.save")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "disabled"])
                          ])
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(`</div>`);
                } else {
                  return [
                    createVNode("div", { class: "p-6 space-y-6" }, [
                      createVNode("div", { class: "space-y-1" }, [
                        createVNode("h2", { class: "text-lg font-semibold text-neutral-800 dark:text-neutral-100" }, toDisplayString(unref($t)("dashboard.photos.editModal.title")), 1),
                        createVNode("p", { class: "text-sm text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref($t)("dashboard.photos.editModal.description")), 1),
                        unref(editingPhoto) ? (openBlock(), createBlock("p", {
                          key: 0,
                          class: "text-xs text-neutral-500 dark:text-neutral-500"
                        }, toDisplayString(unref(editingPhoto).title || unref(editingPhoto).id), 1)) : createCommentVNode("", true)
                      ]),
                      createVNode(_component_UForm, {
                        state: unref(editFormState),
                        class: "space-y-5",
                        onSubmit: handleEditSubmit
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.title"),
                            name: "title"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UInput, {
                                modelValue: unref(editFormState).title,
                                "onUpdate:modelValue": ($event) => unref(editFormState).title = $event,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.description"),
                            name: "description"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UTextarea, {
                                modelValue: unref(editFormState).description,
                                "onUpdate:modelValue": ($event) => unref(editFormState).description = $event,
                                rows: 3,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode("div", { class: "space-y-2" }, [
                            createVNode(_component_UFormField, {
                              label: unref($t)("dashboard.photos.editModal.fields.tags"),
                              name: "tags"
                            }, {
                              default: withCtx(() => [
                                createVNode(_component_UInputTags, {
                                  modelValue: unref(tagsModel),
                                  "onUpdate:modelValue": ($event) => isRef(tagsModel) ? tagsModel.value = $event : null,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ]),
                              _: 1
                            }, 8, ["label"]),
                            createVNode("p", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.tagsHint")), 1)
                          ]),
                          createVNode("div", { class: "flex items-center justify-between space-y-2" }, [
                            createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.rating")), 1),
                            createVNode("div", { class: "flex items-center gap-3" }, [
                              unref(editFormState).rating ? (openBlock(), createBlock("span", {
                                key: 0,
                                class: "text-sm text-neutral-600 dark:text-neutral-400"
                              }, toDisplayString(unref(editFormState).rating) + " / 5 ", 1)) : (openBlock(), createBlock("span", {
                                key: 1,
                                class: "text-sm text-neutral-500 dark:text-neutral-500"
                              }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noRating")), 1)),
                              createVNode(unref(Rating), {
                                "model-value": unref(editFormState).rating || 0,
                                "allow-half": false,
                                size: "lg",
                                "onUpdate:modelValue": ($event) => unref(editFormState).rating = $event || null
                              }, null, 8, ["model-value", "onUpdate:modelValue"])
                            ])
                          ]),
                          createVNode("div", { class: "space-y-3" }, [
                            createVNode("div", { class: "flex items-center justify-between" }, [
                              createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.location")), 1),
                              unref(locationSelection) ? (openBlock(), createBlock(_component_UButton, {
                                key: 0,
                                variant: "ghost",
                                color: "neutral",
                                size: "xs",
                                icon: "tabler:map-off",
                                onClick: withModifiers(clearSelectedLocation, ["prevent"])
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.fields.clearLocation")), 1)
                                ]),
                                _: 1
                              })) : createCommentVNode("", true)
                            ]),
                            createVNode(_component_MapLocationPicker, {
                              modelValue: unref(locationSelection),
                              "onUpdate:modelValue": ($event) => isRef(locationSelection) ? locationSelection.value = $event : null,
                              class: "border border-neutral-200 dark:border-neutral-800",
                              onPick: handleLocationPick
                            }, {
                              empty: withCtx(() => [
                                createVNode("span", { class: "px-3 py-2 rounded-full bg-white/80 text-neutral-600 dark:bg-neutral-900/80 dark:text-neutral-200 shadow" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.locationHint")), 1)
                              ]),
                              _: 1
                            }, 8, ["modelValue", "onUpdate:modelValue"]),
                            createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400 flex items-center gap-2" }, [
                              createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.editModal.fields.coordinates")) + ":", 1),
                              unref(formattedCoordinates) ? (openBlock(), createBlock("span", { key: 0 }, toDisplayString(unref(formattedCoordinates).latitude) + ", " + toDisplayString(unref(formattedCoordinates).longitude), 1)) : (openBlock(), createBlock("span", { key: 1 }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noLocation")), 1))
                            ])
                          ]),
                          createVNode("div", { class: "flex items-center justify-end gap-2 pt-4 border-t border-neutral-200 dark:border-neutral-800" }, [
                            createVNode(_component_UButton, {
                              variant: "ghost",
                              color: "neutral",
                              onClick: withModifiers(($event) => isEditModalOpen.value = false, ["prevent"])
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.cancel")), 1)
                              ]),
                              _: 1
                            }, 8, ["onClick"]),
                            createVNode(_component_UButton, {
                              type: "submit",
                              loading: unref(isSavingMetadata),
                              disabled: !unref(isMetadataDirty) || unref(isSavingMetadata),
                              icon: "tabler:device-floppy"
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.save")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "disabled"])
                          ])
                        ]),
                        _: 1
                      }, 8, ["state"])
                    ])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_UModal, {
              open: unref(isDeleteConfirmOpen),
              "onUpdate:open": ($event) => isRef(isDeleteConfirmOpen) ? isDeleteConfirmOpen.value = $event : null
            }, {
              content: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="p-6 space-y-4"${_scopeId2}><div class="flex items-start gap-3"${_scopeId2}>`);
                  _push3(ssrRenderComponent(unref(__nuxt_component_0), {
                    name: "tabler:trash",
                    class: "mt-1 size-6 shrink-0 text-error-500"
                  }, null, _parent3, _scopeId2));
                  _push3(`<div class="space-y-2"${_scopeId2}><h3 class="text-lg font-semibold"${_scopeId2}>${ssrInterpolate(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.title") : unref($t)("dashboard.photos.delete.batch.title"))}</h3><p class="text-sm text-neutral-600 dark:text-neutral-400"${_scopeId2}>${ssrInterpolate(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.message") : unref($t)("dashboard.photos.delete.batch.message", {
                    count: unref(deleteTargetPhotos).length
                  }))}</p><p class="text-sm text-error-500 dark:text-error-400"${_scopeId2}>${ssrInterpolate(unref($t)("dashboard.photos.delete.warning"))}</p></div></div><div class="flex justify-end gap-2"${_scopeId2}>`);
                  _push3(ssrRenderComponent(_component_UButton, {
                    variant: "ghost",
                    color: "neutral",
                    disabled: unref(isDeleting),
                    onClick: ($event) => isDeleteConfirmOpen.value = false
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`${ssrInterpolate(unref($t)("dashboard.photos.delete.buttons.cancel"))}`);
                      } else {
                        return [
                          createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.cancel")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(ssrRenderComponent(_component_UButton, {
                    color: "error",
                    icon: "tabler:trash",
                    loading: unref(isDeleting),
                    onClick: confirmDelete
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`${ssrInterpolate(unref($t)("dashboard.photos.delete.buttons.confirm"))}`);
                      } else {
                        return [
                          createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.confirm")), 1)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(`</div></div>`);
                } else {
                  return [
                    createVNode("div", { class: "p-6 space-y-4" }, [
                      createVNode("div", { class: "flex items-start gap-3" }, [
                        createVNode(unref(__nuxt_component_0), {
                          name: "tabler:trash",
                          class: "mt-1 size-6 shrink-0 text-error-500"
                        }),
                        createVNode("div", { class: "space-y-2" }, [
                          createVNode("h3", { class: "text-lg font-semibold" }, toDisplayString(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.title") : unref($t)("dashboard.photos.delete.batch.title")), 1),
                          createVNode("p", { class: "text-sm text-neutral-600 dark:text-neutral-400" }, toDisplayString(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.message") : unref($t)("dashboard.photos.delete.batch.message", {
                            count: unref(deleteTargetPhotos).length
                          })), 1),
                          createVNode("p", { class: "text-sm text-error-500 dark:text-error-400" }, toDisplayString(unref($t)("dashboard.photos.delete.warning")), 1)
                        ])
                      ]),
                      createVNode("div", { class: "flex justify-end gap-2" }, [
                        createVNode(_component_UButton, {
                          variant: "ghost",
                          color: "neutral",
                          disabled: unref(isDeleting),
                          onClick: ($event) => isDeleteConfirmOpen.value = false
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.cancel")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled", "onClick"]),
                        createVNode(_component_UButton, {
                          color: "error",
                          icon: "tabler:trash",
                          loading: unref(isDeleting),
                          onClick: confirmDelete
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.confirm")), 1)
                          ]),
                          _: 1
                        }, 8, ["loading"])
                      ])
                    ])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_UModal, {
              open: unref(isImagePreviewOpen),
              "onUpdate:open": ($event) => isRef(isImagePreviewOpen) ? isImagePreviewOpen.value = $event : null,
              title: "Photo Preview",
              description: unref(previewingPhoto)?.description || ""
            }, {
              body: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(`<div class="flex items-center justify-center w-full" style="${ssrRenderStyle({ "max-height": "calc(100vh - 12rem)" })}"${_scopeId2}><div class="w-full max-w-2xl rounded-lg overflow-hidden"${_scopeId2}>`);
                  if (unref(previewingPhoto)) {
                    _push3(ssrRenderComponent(_component_MasonryItemPhoto, {
                      photo: unref(previewingPhoto),
                      index: 0,
                      onVisibilityChange: () => {
                      },
                      onOpenViewer: ($event) => openInNewTab(`/${unref(previewingPhoto).id}`)
                    }, null, _parent3, _scopeId2));
                  } else {
                    _push3(`<!---->`);
                  }
                  _push3(`</div></div>`);
                } else {
                  return [
                    createVNode("div", {
                      class: "flex items-center justify-center w-full",
                      style: { "max-height": "calc(100vh - 12rem)" }
                    }, [
                      createVNode("div", { class: "w-full max-w-2xl rounded-lg overflow-hidden" }, [
                        unref(previewingPhoto) ? (openBlock(), createBlock(_component_MasonryItemPhoto, {
                          key: 0,
                          photo: unref(previewingPhoto),
                          index: 0,
                          onVisibilityChange: () => {
                          },
                          onOpenViewer: ($event) => openInNewTab(`/${unref(previewingPhoto).id}`)
                        }, null, 8, ["photo", "onOpenViewer"])) : createCommentVNode("", true)
                      ])
                    ])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</div>`);
          } else {
            return [
              createVNode("div", { class: "flex flex-col gap-3" }, [
                createVNode(_component_UploadQueuePanel, {
                  "uploading-files": unref(uploadingFiles),
                  onRemoveFile: removeUploadingFile,
                  onClearCompleted: clearCompletedUploads,
                  onClearAll: clearAllUploads,
                  onGoToQueue: ($event) => _ctx.$router.push("/dashboard/queue")
                }, null, 8, ["uploading-files", "onGoToQueue"]),
                createVNode("div", { class: "relative overflow-hidden rounded-3xl border border-neutral-200/80 bg-linear-to-br from-white via-white to-neutral-50 shadow-sm transition dark:border-neutral-800/70 dark:from-neutral-900 dark:via-neutral-900/80 dark:to-neutral-900" }, [
                  createVNode("div", { class: "pointer-events-none absolute -left-32 -top-24 h-72 w-[18rem] rounded-full bg-primary-400/20 blur-3xl dark:bg-primary-500/20" }),
                  createVNode("div", { class: "relative flex flex-col gap-6 p-5 sm:p-8" }, [
                    createVNode("div", { class: "flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between" }, [
                      createVNode("div", { class: "space-y-4" }, [
                        createVNode("div", { class: "flex items-center gap-3" }, [
                          createVNode("span", { class: "flex size-12 items-center justify-center rounded-2xl bg-primary-500/10 text-primary-600 dark:bg-primary-500/15 dark:text-primary-300" }, [
                            createVNode(unref(__nuxt_component_0), {
                              name: "tabler:cloud-upload",
                              class: "size-6"
                            })
                          ]),
                          createVNode("div", null, [
                            createVNode("h2", { class: "text-lg font-semibold text-neutral-800 dark:text-neutral-100" }, toDisplayString(unref($t)("dashboard.photos.title")), 1),
                            createVNode(_component_i18n_t, {
                              keypath: "dashboard.photos.subtitle",
                              tag: "p",
                              class: "mt-1 text-sm text-neutral-500 dark:text-neutral-400"
                            }, {
                              default: withCtx(() => [
                                createVNode(_component_NuxtLink, {
                                  to: "/dashboard/albums",
                                  class: "text-primary font-medium"
                                }, {
                                  default: withCtx(() => [
                                    createTextVNode(toDisplayString(unref($t)("title.albums")), 1)
                                  ]),
                                  _: 1
                                })
                              ]),
                              _: 1
                            })
                          ])
                        ]),
                        createVNode("div", { class: "flex flex-wrap items-center gap-1 text-xs font-medium text-neutral-500 dark:text-neutral-400" }, [
                          createVNode(unref(_sfc_main$a), {
                            variant: "soft",
                            color: "primary",
                            size: "sm"
                          }, {
                            default: withCtx(() => [
                              createTextVNode(" JPEG / PNG ")
                            ]),
                            _: 1
                          }),
                          createVNode(unref(_sfc_main$a), {
                            variant: "soft",
                            color: "primary",
                            size: "sm"
                          }, {
                            default: withCtx(() => [
                              createTextVNode(" HEIC ")
                            ]),
                            _: 1
                          }),
                          createVNode(unref(_sfc_main$a), {
                            variant: "soft",
                            color: "primary",
                            size: "sm"
                          }, {
                            default: withCtx(() => [
                              createTextVNode(toDisplayString(unref($t)("ui.livePhoto")), 1)
                            ]),
                            _: 1
                          }),
                          createVNode(unref(_sfc_main$a), {
                            variant: "soft",
                            color: "primary",
                            size: "sm"
                          }, {
                            default: withCtx(() => [
                              createTextVNode(" Motion Photo ")
                            ]),
                            _: 1
                          }),
                          createVNode(unref(_sfc_main$a), {
                            variant: "outline",
                            color: "neutral",
                            size: "sm"
                          }, {
                            default: withCtx(() => [
                              createTextVNode(toDisplayString(unref($t)("dashboard.photos.maxFileSize", {
                                size: MAX_FILE_SIZE
                              })), 1)
                            ]),
                            _: 1
                          })
                        ])
                      ]),
                      createVNode("div", { class: "flex gap-2 items-center" }, [
                        createVNode(_component_UButton, {
                          variant: "soft",
                          size: "lg",
                          class: "w-full sm:w-auto",
                          icon: "tabler:list-check",
                          onClick: ($event) => _ctx.$router.push("/dashboard/queue")
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.buttons.queue")), 1)
                          ]),
                          _: 1
                        }, 8, ["onClick"]),
                        createVNode(_component_UButton, {
                          size: "lg",
                          class: "w-full sm:w-auto",
                          icon: "tabler:cloud-upload",
                          onClick: openUploadSlideover
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.buttons.upload")), 1)
                          ]),
                          _: 1
                        })
                      ])
                    ])
                  ])
                ]),
                createVNode(_component_USlideover, {
                  open: unref(isUploadSlideoverOpen),
                  "onUpdate:open": ($event) => isRef(isUploadSlideoverOpen) ? isUploadSlideoverOpen.value = $event : null,
                  title: unref($t)("dashboard.photos.slideover.title"),
                  description: unref($t)("dashboard.photos.slideover.description"),
                  ui: {
                    content: "sm:max-w-xl",
                    body: "p-2",
                    header: "px-6 py-5 border-b border-neutral-200 dark:border-neutral-800",
                    footer: "px-6 py-5 border-t border-neutral-200 dark:border-neutral-800"
                  }
                }, {
                  body: withCtx(() => [
                    createVNode(_component_UFileUpload, {
                      modelValue: unref(selectedFiles),
                      "onUpdate:modelValue": ($event) => isRef(selectedFiles) ? selectedFiles.value = $event : null,
                      label: unref($t)("dashboard.photos.uploader.label"),
                      description: unref($t)("dashboard.photos.uploader.description", {
                        maxSize: MAX_FILE_SIZE
                      }),
                      icon: "tabler:cloud-upload",
                      layout: "list",
                      size: "xl",
                      accept: "image/jpeg,image/png,image/heic,image/heif,video/quicktime,.mov",
                      multiple: "",
                      highlight: "",
                      dropzone: "",
                      "file-delete": { variant: "soft", color: "neutral" },
                      ui: {
                        root: "w-full",
                        base: "group relative flex flex-col items-center justify-center gap-3 rounded-3xl border-2 border-dashed border-neutral-200/80 bg-white/90 px-6 py-12 text-center shadow-sm transition-all duration-300 hover:border-primary-400/80 hover:bg-primary-500/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/60 dark:border-neutral-700/70 dark:bg-neutral-900/80",
                        wrapper: "flex flex-col items-center gap-2",
                        label: "text-base font-semibold text-neutral-800 dark:text-neutral-100",
                        description: "text-sm text-neutral-500 dark:text-neutral-400",
                        files: "mt-2 flex w-full flex-col gap-2 overflow-y-auto",
                        file: "flex items-center justify-between gap-3 rounded-2xl border border-neutral-200/80 bg-white/80 px-4 py-3 text-left shadow-sm shadow-black/5 backdrop-blur-sm dark:border-neutral-800/80 dark:bg-neutral-900/70",
                        fileLeadingAvatar: "ring-1 ring-white/80 dark:ring-neutral-800",
                        fileWrapper: "min-w-0 flex-1",
                        fileName: "text-sm font-medium text-neutral-700 dark:text-neutral-100 truncate",
                        fileSize: "text-xs text-neutral-500 dark:text-neutral-400",
                        fileTrailingButton: "text-neutral-400 hover:text-error-500"
                      }
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "label", "description"])
                  ]),
                  footer: withCtx(() => [
                    createVNode("div", { class: "flex w-full flex-col gap-4 sm:flex-row sm:items-center sm:justify-between" }, [
                      createVNode("div", { class: "flex flex-col gap-1 text-sm text-neutral-500 dark:text-neutral-400" }, [
                        createVNode("span", null, toDisplayString(unref(hasSelectedFiles) ? unref(selectedFilesSummary) : unref($t)("dashboard.photos.slideover.footer.noSelection")), 1)
                      ]),
                      createVNode("div", { class: "flex w-full flex-col gap-2 sm:w-auto sm:flex-row" }, [
                        createVNode(_component_UButton, {
                          variant: "soft",
                          color: "neutral",
                          class: "w-full sm:w-auto",
                          disabled: !unref(hasSelectedFiles),
                          onClick: clearSelectedFiles
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.slideover.buttons.clear")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled"]),
                        createVNode(_component_UButton, {
                          color: "primary",
                          size: "lg",
                          class: "w-full sm:w-auto",
                          icon: "tabler:upload",
                          disabled: !unref(hasSelectedFiles),
                          onClick: handleUpload
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref(hasSelectedFiles) ? unref($t)("dashboard.photos.slideover.buttons.upload", {
                              count: unref(selectedFiles).length
                            }) : unref($t)("dashboard.photos.buttons.upload")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled"])
                      ])
                    ])
                  ]),
                  _: 1
                }, 8, ["open", "onUpdate:open", "title", "description"]),
                createVNode("div", { class: "flex flex-row sm:items-center justify-between gap-3 sm:gap-0 p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-900/50 border border-neutral-200 dark:border-neutral-700 rounded-lg" }, [
                  createVNode("div", { class: "flex items-center gap-2" }, [
                    createVNode(_component_UIcon, {
                      name: "tabler:photo",
                      class: "text-neutral-500"
                    }),
                    createVNode("span", { class: "font-medium text-neutral-700 dark:text-neutral-300 hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.toolbar.title")), 1),
                    createVNode("div", { class: "flex items-center gap-1 sm:gap-2" }, [
                      unref(livePhotoStats).staticPhotos > 0 ? (openBlock(), createBlock(unref(_sfc_main$a), {
                        key: 0,
                        variant: "soft",
                        color: "neutral",
                        size: "sm"
                      }, {
                        default: withCtx(() => [
                          createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref(livePhotoStats).staticPhotos) + " " + toDisplayString(unref($t)("dashboard.photos.stats.photos")), 1),
                          createVNode("span", { class: "sm:hidden" }, toDisplayString(unref(livePhotoStats).staticPhotos) + "P", 1)
                        ]),
                        _: 1
                      })) : createCommentVNode("", true),
                      unref(livePhotoStats).livePhotos > 0 ? (openBlock(), createBlock(unref(_sfc_main$a), {
                        key: 1,
                        variant: "soft",
                        color: "warning",
                        size: "sm"
                      }, {
                        default: withCtx(() => [
                          createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref(livePhotoStats).livePhotos) + " " + toDisplayString(unref($t)("dashboard.photos.stats.livePhotos")), 1),
                          createVNode("span", { class: "sm:hidden" }, toDisplayString(unref(livePhotoStats).livePhotos) + "LP", 1)
                        ]),
                        _: 1
                      })) : createCommentVNode("", true)
                    ])
                  ]),
                  createVNode("div", { class: "flex items-center gap-2" }, [
                    createVNode(_component_UPopover, null, {
                      content: withCtx(() => [
                        createVNode(_component_UCard, { variant: "glassmorphism" }, {
                          default: withCtx(() => [
                            createVNode(_component_OverlayFilterPanel)
                          ]),
                          _: 1
                        })
                      ]),
                      default: withCtx(() => [
                        createVNode(_component_UTooltip, {
                          text: unref($t)("ui.action.filter.tooltip")
                        }, {
                          default: withCtx(() => [
                            createVNode(_component_UChip, {
                              inset: "",
                              size: "sm",
                              color: "info",
                              show: unref(totalSelectedFilters) > 0
                            }, {
                              default: withCtx(() => [
                                createVNode(_component_UButton, {
                                  variant: "soft",
                                  color: unref(hasActiveFilters) ? "info" : "neutral",
                                  class: "bg-transparent rounded-full cursor-pointer relative",
                                  icon: "tabler:filter",
                                  size: "sm"
                                }, null, 8, ["color"])
                              ]),
                              _: 1
                            }, 8, ["show"])
                          ]),
                          _: 1
                        }, 8, ["text"])
                      ]),
                      _: 1
                    }),
                    createVNode(_component_USelectMenu, {
                      modelValue: unref(photoFilter),
                      "onUpdate:modelValue": ($event) => isRef(photoFilter) ? photoFilter.value = $event : null,
                      class: "w-full sm:w-48",
                      items: [
                        {
                          label: unref($t)("dashboard.photos.photoFilter.all"),
                          value: "all",
                          icon: "tabler:photo-scan"
                        },
                        {
                          label: unref($t)("dashboard.photos.photoFilter.livephoto"),
                          value: "livephoto",
                          icon: "tabler:live-photo"
                        },
                        {
                          label: unref($t)("dashboard.photos.photoFilter.static"),
                          value: "static",
                          icon: "tabler:photo"
                        }
                      ],
                      "value-key": "value",
                      "label-key": "label",
                      size: "sm"
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "items"]),
                    createVNode(_component_UButton, {
                      variant: "soft",
                      color: "info",
                      size: "sm",
                      icon: "tabler:refresh",
                      loading: unref(reactionsLoading),
                      onClick: async () => {
                        await unref(refresh)();
                        if (unref(filteredData).length > 0) {
                          await fetchReactions(unref(filteredData).map((p) => p.id));
                        }
                      }
                    }, {
                      default: withCtx(() => [
                        createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.toolbar.refresh")), 1)
                      ]),
                      _: 1
                    }, 8, ["loading", "onClick"]),
                    createVNode(_component_UDropdownMenu, {
                      items: unref(table)?.tableApi?.getAllColumns().filter((column) => column.getCanHide()).map((column) => ({
                        label: columnNameMap[column.id] || column.id,
                        type: "checkbox",
                        checked: column.getIsVisible(),
                        disabled: !column.getCanHide() || column.id === "thumbnailUrl" || column.id === "id" || column.id === "actions",
                        onUpdateChecked(checked) {
                          unref(table)?.tableApi?.getColumn(column.id)?.toggleVisibility(!!checked);
                        },
                        onSelect(e) {
                          e.preventDefault();
                        }
                      })),
                      content: { align: "end" }
                    }, {
                      default: withCtx(() => [
                        createVNode(_component_UButton, {
                          label: "",
                          color: "neutral",
                          variant: "outline",
                          size: "sm",
                          icon: "tabler:columns-3",
                          title: unref($t)("dashboard.photos.table.columnVisibility.description")
                        }, {
                          default: withCtx(() => [
                            createVNode("span", { class: "hidden sm:inline" }, toDisplayString(unref($t)("dashboard.photos.table.columnVisibility.button")), 1)
                          ]),
                          _: 1
                        }, 8, ["title"])
                      ]),
                      _: 1
                    }, 8, ["items"])
                  ])
                ]),
                createVNode("div", { class: "border border-neutral-300 dark:border-neutral-800 rounded overflow-hidden" }, [
                  createVNode(_component_UTable, {
                    ref_key: "table",
                    ref: table,
                    "row-selection": unref(rowSelection),
                    "onUpdate:rowSelection": ($event) => isRef(rowSelection) ? rowSelection.value = $event : null,
                    "column-visibility": unref(columnVisibility),
                    "onUpdate:columnVisibility": ($event) => isRef(columnVisibility) ? columnVisibility.value = $event : null,
                    "column-pinning": {
                      right: ["actions"]
                    },
                    data: unref(filteredData),
                    columns,
                    loading: unref(status) === "pending",
                    sticky: "",
                    class: "h-[calc(100vh-27rem)] sm:h-[calc(100vh-24.5rem)]",
                    ui: {
                      separator: "bg-neutral-200 dark:bg-neutral-700"
                    }
                  }, {
                    "actions-cell": withCtx(({ row }) => [
                      createVNode("div", { class: "flex justify-end" }, [
                        createVNode(_component_UDropdownMenu, {
                          size: "sm",
                          content: {
                            align: "end"
                          },
                          items: getRowActions(row.original)
                        }, {
                          default: withCtx(() => [
                            createVNode(_component_UButton, {
                              variant: "outline",
                              color: "neutral",
                              size: "sm",
                              icon: "tabler:dots-vertical"
                            })
                          ]),
                          _: 1
                        }, 8, ["items"])
                      ])
                    ]),
                    _: 1
                  }, 8, ["row-selection", "onUpdate:rowSelection", "column-visibility", "onUpdate:columnVisibility", "data", "loading"]),
                  createVNode("div", { class: "px-4 py-4 border-t border-neutral-200 dark:border-neutral-700" }, [
                    createVNode("div", { class: "text-sm text-neutral-600 dark:text-neutral-400 flex items-center gap-2" }, [
                      createVNode("div", { class: "leading-6" }, toDisplayString(unref($t)("dashboard.photos.selection.selected", {
                        count: unref(selectedRowsCount),
                        total: unref(totalRowsCount)
                      })), 1),
                      unref(selectedRowsCount) > 0 ? (openBlock(), createBlock("div", {
                        key: 0,
                        class: "flex items-center gap-1 sm:gap-2"
                      }, [
                        createVNode(_component_UButton, {
                          variant: "soft",
                          color: "info",
                          size: "xs",
                          icon: "tabler:refresh",
                          class: "flex-1 sm:flex-none",
                          onClick: handleBatchReprocess
                        }, {
                          default: withCtx(() => [
                            createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchReprocess")), 1)
                          ]),
                          _: 1
                        }),
                        createVNode(_component_UButton, {
                          variant: "soft",
                          color: "primary",
                          size: "xs",
                          icon: "tabler:download",
                          class: "flex-1 sm:flex-none",
                          onClick: handleBatchDownload
                        }, {
                          default: withCtx(() => [
                            createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchDownload")), 1)
                          ]),
                          _: 1
                        }),
                        createVNode(_component_UButton, {
                          color: "error",
                          variant: "soft",
                          size: "xs",
                          icon: "tabler:trash",
                          class: "flex-1 sm:flex-none",
                          onClick: handleBatchDelete
                        }, {
                          default: withCtx(() => [
                            createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.selection.batchDelete")), 1)
                          ]),
                          _: 1
                        })
                      ])) : createCommentVNode("", true)
                    ])
                  ])
                ]),
                createVNode(_component_UModal, {
                  open: unref(isEditModalOpen),
                  "onUpdate:open": ($event) => isRef(isEditModalOpen) ? isEditModalOpen.value = $event : null
                }, {
                  content: withCtx(() => [
                    createVNode("div", { class: "p-6 space-y-6" }, [
                      createVNode("div", { class: "space-y-1" }, [
                        createVNode("h2", { class: "text-lg font-semibold text-neutral-800 dark:text-neutral-100" }, toDisplayString(unref($t)("dashboard.photos.editModal.title")), 1),
                        createVNode("p", { class: "text-sm text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref($t)("dashboard.photos.editModal.description")), 1),
                        unref(editingPhoto) ? (openBlock(), createBlock("p", {
                          key: 0,
                          class: "text-xs text-neutral-500 dark:text-neutral-500"
                        }, toDisplayString(unref(editingPhoto).title || unref(editingPhoto).id), 1)) : createCommentVNode("", true)
                      ]),
                      createVNode(_component_UForm, {
                        state: unref(editFormState),
                        class: "space-y-5",
                        onSubmit: handleEditSubmit
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.title"),
                            name: "title"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UInput, {
                                modelValue: unref(editFormState).title,
                                "onUpdate:modelValue": ($event) => unref(editFormState).title = $event,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode(_component_UFormField, {
                            label: unref($t)("dashboard.photos.editModal.fields.description"),
                            name: "description"
                          }, {
                            default: withCtx(() => [
                              createVNode(_component_UTextarea, {
                                modelValue: unref(editFormState).description,
                                "onUpdate:modelValue": ($event) => unref(editFormState).description = $event,
                                rows: 3,
                                class: "w-full"
                              }, null, 8, ["modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }, 8, ["label"]),
                          createVNode("div", { class: "space-y-2" }, [
                            createVNode(_component_UFormField, {
                              label: unref($t)("dashboard.photos.editModal.fields.tags"),
                              name: "tags"
                            }, {
                              default: withCtx(() => [
                                createVNode(_component_UInputTags, {
                                  modelValue: unref(tagsModel),
                                  "onUpdate:modelValue": ($event) => isRef(tagsModel) ? tagsModel.value = $event : null,
                                  class: "w-full"
                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                              ]),
                              _: 1
                            }, 8, ["label"]),
                            createVNode("p", { class: "text-xs text-neutral-500 dark:text-neutral-400" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.tagsHint")), 1)
                          ]),
                          createVNode("div", { class: "flex items-center justify-between space-y-2" }, [
                            createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.rating")), 1),
                            createVNode("div", { class: "flex items-center gap-3" }, [
                              unref(editFormState).rating ? (openBlock(), createBlock("span", {
                                key: 0,
                                class: "text-sm text-neutral-600 dark:text-neutral-400"
                              }, toDisplayString(unref(editFormState).rating) + " / 5 ", 1)) : (openBlock(), createBlock("span", {
                                key: 1,
                                class: "text-sm text-neutral-500 dark:text-neutral-500"
                              }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noRating")), 1)),
                              createVNode(unref(Rating), {
                                "model-value": unref(editFormState).rating || 0,
                                "allow-half": false,
                                size: "lg",
                                "onUpdate:modelValue": ($event) => unref(editFormState).rating = $event || null
                              }, null, 8, ["model-value", "onUpdate:modelValue"])
                            ])
                          ]),
                          createVNode("div", { class: "space-y-3" }, [
                            createVNode("div", { class: "flex items-center justify-between" }, [
                              createVNode("label", { class: "text-sm font-medium text-neutral-700 dark:text-neutral-200" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.location")), 1),
                              unref(locationSelection) ? (openBlock(), createBlock(_component_UButton, {
                                key: 0,
                                variant: "ghost",
                                color: "neutral",
                                size: "xs",
                                icon: "tabler:map-off",
                                onClick: withModifiers(clearSelectedLocation, ["prevent"])
                              }, {
                                default: withCtx(() => [
                                  createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.fields.clearLocation")), 1)
                                ]),
                                _: 1
                              })) : createCommentVNode("", true)
                            ]),
                            createVNode(_component_MapLocationPicker, {
                              modelValue: unref(locationSelection),
                              "onUpdate:modelValue": ($event) => isRef(locationSelection) ? locationSelection.value = $event : null,
                              class: "border border-neutral-200 dark:border-neutral-800",
                              onPick: handleLocationPick
                            }, {
                              empty: withCtx(() => [
                                createVNode("span", { class: "px-3 py-2 rounded-full bg-white/80 text-neutral-600 dark:bg-neutral-900/80 dark:text-neutral-200 shadow" }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.locationHint")), 1)
                              ]),
                              _: 1
                            }, 8, ["modelValue", "onUpdate:modelValue"]),
                            createVNode("div", { class: "text-xs text-neutral-500 dark:text-neutral-400 flex items-center gap-2" }, [
                              createVNode("span", null, toDisplayString(unref($t)("dashboard.photos.editModal.fields.coordinates")) + ":", 1),
                              unref(formattedCoordinates) ? (openBlock(), createBlock("span", { key: 0 }, toDisplayString(unref(formattedCoordinates).latitude) + ", " + toDisplayString(unref(formattedCoordinates).longitude), 1)) : (openBlock(), createBlock("span", { key: 1 }, toDisplayString(unref($t)("dashboard.photos.editModal.fields.noLocation")), 1))
                            ])
                          ]),
                          createVNode("div", { class: "flex items-center justify-end gap-2 pt-4 border-t border-neutral-200 dark:border-neutral-800" }, [
                            createVNode(_component_UButton, {
                              variant: "ghost",
                              color: "neutral",
                              onClick: withModifiers(($event) => isEditModalOpen.value = false, ["prevent"])
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.cancel")), 1)
                              ]),
                              _: 1
                            }, 8, ["onClick"]),
                            createVNode(_component_UButton, {
                              type: "submit",
                              loading: unref(isSavingMetadata),
                              disabled: !unref(isMetadataDirty) || unref(isSavingMetadata),
                              icon: "tabler:device-floppy"
                            }, {
                              default: withCtx(() => [
                                createTextVNode(toDisplayString(unref($t)("dashboard.photos.editModal.actions.save")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "disabled"])
                          ])
                        ]),
                        _: 1
                      }, 8, ["state"])
                    ])
                  ]),
                  _: 1
                }, 8, ["open", "onUpdate:open"]),
                createVNode(_component_UModal, {
                  open: unref(isDeleteConfirmOpen),
                  "onUpdate:open": ($event) => isRef(isDeleteConfirmOpen) ? isDeleteConfirmOpen.value = $event : null
                }, {
                  content: withCtx(() => [
                    createVNode("div", { class: "p-6 space-y-4" }, [
                      createVNode("div", { class: "flex items-start gap-3" }, [
                        createVNode(unref(__nuxt_component_0), {
                          name: "tabler:trash",
                          class: "mt-1 size-6 shrink-0 text-error-500"
                        }),
                        createVNode("div", { class: "space-y-2" }, [
                          createVNode("h3", { class: "text-lg font-semibold" }, toDisplayString(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.title") : unref($t)("dashboard.photos.delete.batch.title")), 1),
                          createVNode("p", { class: "text-sm text-neutral-600 dark:text-neutral-400" }, toDisplayString(unref(deleteMode) === "single" ? unref($t)("dashboard.photos.delete.single.message") : unref($t)("dashboard.photos.delete.batch.message", {
                            count: unref(deleteTargetPhotos).length
                          })), 1),
                          createVNode("p", { class: "text-sm text-error-500 dark:text-error-400" }, toDisplayString(unref($t)("dashboard.photos.delete.warning")), 1)
                        ])
                      ]),
                      createVNode("div", { class: "flex justify-end gap-2" }, [
                        createVNode(_component_UButton, {
                          variant: "ghost",
                          color: "neutral",
                          disabled: unref(isDeleting),
                          onClick: ($event) => isDeleteConfirmOpen.value = false
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.cancel")), 1)
                          ]),
                          _: 1
                        }, 8, ["disabled", "onClick"]),
                        createVNode(_component_UButton, {
                          color: "error",
                          icon: "tabler:trash",
                          loading: unref(isDeleting),
                          onClick: confirmDelete
                        }, {
                          default: withCtx(() => [
                            createTextVNode(toDisplayString(unref($t)("dashboard.photos.delete.buttons.confirm")), 1)
                          ]),
                          _: 1
                        }, 8, ["loading"])
                      ])
                    ])
                  ]),
                  _: 1
                }, 8, ["open", "onUpdate:open"]),
                createVNode(_component_UModal, {
                  open: unref(isImagePreviewOpen),
                  "onUpdate:open": ($event) => isRef(isImagePreviewOpen) ? isImagePreviewOpen.value = $event : null,
                  title: "Photo Preview",
                  description: unref(previewingPhoto)?.description || ""
                }, {
                  body: withCtx(() => [
                    createVNode("div", {
                      class: "flex items-center justify-center w-full",
                      style: { "max-height": "calc(100vh - 12rem)" }
                    }, [
                      createVNode("div", { class: "w-full max-w-2xl rounded-lg overflow-hidden" }, [
                        unref(previewingPhoto) ? (openBlock(), createBlock(_component_MasonryItemPhoto, {
                          key: 0,
                          photo: unref(previewingPhoto),
                          index: 0,
                          onVisibilityChange: () => {
                          },
                          onOpenViewer: ($event) => openInNewTab(`/${unref(previewingPhoto).id}`)
                        }, null, 8, ["photo", "onOpenViewer"])) : createCommentVNode("", true)
                      ])
                    ])
                  ]),
                  _: 1
                }, 8, ["open", "onUpdate:open", "description"])
              ])
            ];
          }
        }),
        _: 1
      }, _parent));
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/dashboard/photos.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
export {
  _sfc_main as default
};
